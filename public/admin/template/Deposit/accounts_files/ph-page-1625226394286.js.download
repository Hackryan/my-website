define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-refer-friend-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoReferFriend:"referFriend",ddoGetCategories:"getMasterCategories",keyUploadUrl:"/uploadFileReturnURL"}}}),define("v1/ph-refer-friend-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-refer-friend-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.ReferFriendService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-refer-friend",["require","exports","aurelia-framework","ph-common","./ph-refer-friend-config","./ph-refer-friend-service","aurelia-fetch-client","aurelia-event-aggregator"],function(e,t,o,i,a,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-refer-friend-v1",c="popup",d=function(e){function t(t,o,a,r){var n=e.call(this,t,o,l)||this;return n.element=t,n.commonService=o,n.eventAggregator=a,n.referFriendService=r,n.eventTag="",n.mode=c,n.profile={},n.categoryList=[{name:"Select",value:""}],n.showErrorMsg=!1,n.errorMessages={},n.saveSuccess=!1,n.saveFail=!1,n.duplicate=!1,n.referredByOther=!1,n.subscribers=[],n.showPopup=!1,n.validationController=new i.ValidationController,n.handleKeyPress=function(e){return 27==e.keyCode&&n.closePopup(),!0},n}return __extends(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){return Object.keys(this.profile)},enumerable:!0,configurable:!0}),t.prototype.attached=function(){var t=this;if(e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.uploadUrl=this.commonService.getBaseDomain()+a.WidgetConfig.v1.keyUploadUrl,this.fetchCategories(),this.validationController.validationErrors={},this.commonService.setValidationRules(phApp.validationRules||{}),this.commonService.setLangBundle(phApp.messages||{}),this.validationController.addValidationCtx(this.profile,this.commonService.getValidationRules("profile")),this.commonService.getValidationRules("profile")&&this.commonService.getValidationRules("profile").message&&this.commonService.getValidationRules("profile").message.length&&this.commonService.getValidationRules("profile").message.length.maximum?(this.messageLimit=this.commonService.getValidationRules("profile").message.length.maximum,setTimeout(function(){var e=t.element.querySelector("#message");e&&e.setAttribute("maxlength",t.messageLimit)},250)):this.messageLimit=0,this.eventTag||(this.eventTag=""),this.mode==c&&(this.showPopup=!1,this.subscribers.push(this.eventAggregator.subscribe(this.eventTag+"prefillData",function(e){Object.keys(e).forEach(function(o){t.profile[o]=e[o]}),t.showPopup=!0,document.getElementsByTagName("body")[0].classList.add("modal-open"),document.addEventListener("keydown",t.handleKeyPress),t.addTrackingData()})),this.subscribers.push(this.eventAggregator.subscribe(this.eventTag+"referPopupClose",function(){t.closePopup()}))),"flat"==this.mode&&(this.showPopup=!0),"hidePopup"==this.mode&&(this.showPopup=!1,document.addEventListener("keydown",this.handleKeyPress)),"showPopup"==this.mode){var o=JSON.parse(JSON.stringify(this.profile));setTimeout(function(){t.profile=o},250)}},t.prototype.detached=function(){this.subscribers.forEach(function(e){e.dispose()})},t.prototype.fetchCategories=function(){var e=this,t=a.WidgetConfig.v1.ddoGetCategories;this.referFriendService.makeDDORequest(l,t).then(function(t){t.data?t.data.forEach(function(t){t.device==window.phApp.deviceType&&e.categoryList.push({value:t.display_name,name:t.display_name})}):console.info("Error fetching category data")},function(e){new Error(e)})},t.prototype.uploadFile=function(){var e=this;this.profile.resumeUrl="",this.profile.resumeName=this.files[0].name,this.profile.resumeSize=this.files[0].size,this.validateResume();var t=this.validationController.validationErrors.resumeName,o=this.validationController.validationErrors.resumeSize;if(void 0!=t&&Array.isArray(t)&&t.length>0||void 0!=o&&Array.isArray(o)&&o.length>0)return void(this.profile.resumeUrl="invalid");var i=new FormData;i.append("file",this.files[0]);var a=new n.HttpClient;a.configure(function(e){e.useStandardConfiguration().withBaseUrl("api/upload")}),a.fetch(this.uploadUrl,{method:"POST",body:i,headers:new Headers}).then(function(e){return e.json()},function(e){console.log(e)}).then(function(t){t.status&&"SUCCESS"==t.status.toUpperCase()?(e.profile.resumeUrl=t.fileUrl||"",e.profile.resumeName=t.fileName||""):console.info("Resume upload failed"),e.validateResume()},function(t){e.validateResume(),console.log(t.message)})},t.prototype.submitForm=function(e){var t=this;if(this.showErrorMsg=!1,this.filterFieldsBeforeSubmit(),this.profile.resume=this.profile.resumeUrl||this.profile.linkedinUrl,this.validationController.validate(),!0===this.validationController.hasErrors())return this.generateErrorMessages(),void this.showError("E200",!0);if(!e){var o={form_step_data:{firstName:this.profile.firstName||"",lastName:this.profile.lastName||"",email:this.profile.email||"",mobile:this.profile.mobile||"",category:this.profile.category||"",designation:this.profile.designation||"",resumeUrl:this.profile.resumeUrl||"",resumeName:this.profile.resumeName||"",resumeSize:this.profile.resumeSize||"",linkedinUrl:this.profile.linkedinUrl||"",message:this.profile.message||""},trait260:this.profile.jobSeqNo?"job":"general",trait5:this.profile.jobSeqNo||"",trait261:this.profile.userId||""};this.commonService.processTrackingEvent("empoyee_refer_form_submit",void 0,o,{})}var i={mobile:this.profile.mobile||"",resumeUrl:this.profile.resumeUrl||"",resumeName:this.profile.resumeName||"",linkedinUrl:this.profile.linkedinUrl||"",firstName:this.profile.firstName||"",lastName:this.profile.lastName||"",email:this.profile.email||"",category:this.profile.category||"",designation:this.profile.designation||"",message:this.profile.message||"",userId:this.profile.userId||"",jobSeqNo:this.profile.jobId||"",jobId:this.profile.jobId||"",resendFlag:1==e,siteType:"external"},r=a.WidgetConfig.v1.ddoReferFriend;this.referFriendService.makeDDORequest(l,r,i).then(function(e){t.saveFail=!1,t.saveSuccess=!1,t.duplicate=!1,t.referredByOther=!1,e.status&&"string"==typeof e.status&&"SUCCESS"==e.status.toUpperCase()&&e.data&&e.data.referralStatus?("SUCCESS"==e.data.referralStatus.toUpperCase()?(t.saveSuccess=!0,t.eventAggregator.publish("updateReferrals")):"ALREADYREFERRED"==e.data.referralStatus.toUpperCase()?t.duplicate=!0:"REFERREDBYOTHER"==e.data.referralStatus.toUpperCase()?t.referredByOther=!0:(console.log("Error in referral"),t.saveFail=!0),t.scrollToTop()):(console.log("Error in referral"),t.saveFail=!0,t.scrollToTop())},function(e){console.log(e),t.saveFail=!0,t.scrollToTop()})},t.prototype.closeSaveMessage=function(){this.saveFail?this.saveFail=!1:this.closePopup()},t.prototype.closePopup=function(){var e=this;Object.keys(this.profile).forEach(function(t){e.profile[t]=""}),this.removeResumeFile(),this.saveFail=!1,this.saveSuccess=!1,this.validationController.validationErrors={},this.errorMessages={},this.showErrorMsg=!1,this.duplicate||this.referredByOther?(this.duplicate=!1,this.referredByOther=!1):"showPopup"==this.mode?this.closeFunction():this.mode==c&&(this.showPopup=!1,document.getElementsByTagName("body")[0].classList.remove("modal-open"),document.removeEventListener("keydown",this.handleKeyPress))},t.prototype.scrollToTop=function(){var e=document.querySelector('[id="'+this.eventTag+'top"]');e&&(e.scrollIntoView(),e.focus())},t.prototype.generateErrorMessages=function(){var e=this;Object.keys(this.profile).forEach(function(t){var o=e.validationController.validationErrors[t];if(e.errorMessages[t]=[],void 0!=o&&Array.isArray(o)&&o.length>0)if("string"==typeof o[0])for(var i=0;i<o.length;i++)e.errorMessages[t].push(o[i]);else for(var i=0;i<o.length;i++){var a={};a=o[i];for(var r in a)if(a.hasOwnProperty(r)){var n=[];if(n=a[r],n.length>0)for(var s=0;s<n.length;s++)n[s]&&"string"==typeof n[s]&&e.errorMessages[t].push(n[s])}}})},t.prototype.validateResume=function(){this.profile.resume=this.profile.linkedinUrl||this.profile.resumeUrl||this.profile.resumeName,this.validationController.validate("linkedinUrl"),this.validationController.validate("resumeUrl"),this.validationController.validate("resumeName"),this.validationController.validate("resumeSize"),this.validationController.validate("resume")},t.prototype.removeResumeFile=function(){this.profile.resumeName="",this.profile.resumeUrl="",this.profile.resumeSize=0,this.files=null,this.fileValue=null,this.validateResume()},t.prototype.filterFieldsBeforeSubmit=function(){var e=this;-1==this.categoryList.findIndex(function(t){return t.value==e.profile.category})&&(this.profile.category="")},t.prototype.showError=function(t,o){var i=this,a="profile_"+t;this.errorMessages.errors=[a];var r=setInterval(function(){var e=document.querySelector('[class^="alert-form-message"]');if(i.showErrorMsg=!0,null!=e&&(e.scrollIntoView(),e.focus(),clearInterval(r),o)){var t=document.querySelector(".error-block"),a=function(){t.removeEventListener("blur",a,!1)};t.addEventListener("blur",a,!1)}},100);e.prototype.hideLoader.call(this)},Object.defineProperty(t.prototype,"profileStr",{get:function(){return JSON.stringify(this.profile)},enumerable:!0,configurable:!0}),t.prototype.addTrackingData=function(){if(this.profile.jobSeqNo){var e=this.element.querySelector("#btnSubmit");e&&e.setAttribute("data-ph-tevent-attr-trait5",this.profile.jobSeqNo)}},Object.defineProperty(t.prototype,"messageCharLeft",{get:function(){if(this.messageLimit){if(this.profile.message){var e=this.messageLimit-this.profile.message.length;return e>0?e:0}return this.messageLimit}return-1},enumerable:!0,configurable:!0}),t.prototype.resetMessage=function(){this.profile.message=""},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"eventTag",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"profile",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"closeFunction",void 0),__decorate([o.computedFrom("messageLimit","profile.message"),__metadata("design:type",Object),__metadata("design:paramtypes",[])],t.prototype,"messageCharLeft",null),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(d=void 0!==i.CommonService&&i.CommonService)&&d||Object,s.EventAggregator,r.ReferFriendService])],t);var d}(i.PhenomWidget);t.ReferFriend=d}),define("text!v1/ph-refer-friend.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("text!v1/views/ph-refer-friend-v1/default/view.html",["module"],function(e){
e.exports='<template>\r\n\t\t<div class="quick-refer-area" data-ph-at-id="refer-friend" aria-label="Quick refer a friend" key-aria-label="referFriendWidget" role="region" key-role="regionRole" show.bind="showPopup">\r\n\t\t\t<button class="close-btn" click.delegate="closePopup()" role="button" key-role="btnRole" aria-label="Click to close the popup" key-aria-label="closeBtnLabel">\r\n\t\t\t\t<i class="fa fa-times" aria-hidden="true"></i>\r\n\t\t\t</button>\r\n\t\t\t<div class="heading-box" id="${eventTag}top">\r\n\t\t\t\t<h2 class="heading">\r\n\t\t\t\t\t<ppc-content key="headingText1" data-ph-at-id="heading-text">Quick Refer a Friend</ppc-content>\r\n\t\t\t\t</h2>\r\n\t\t\t\t<div class="sub-heading">\r\n\t\t\t\t\t<ppc-content key="subHeadingText">\r\n\t\t\t\t\t\tGot a resume? But don’t know where it goes?  Complete the form below and our recruiters will take it from here.\r\n\t\t\t\t\t</ppc-content>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\x3c!-- error messages block--\x3e\r\n\t\t\t<div class="alert-form-message" if.bind="showErrorMsg">\r\n\t\t\t\t<button focus.bind="showErrorMsgX" class="close-error" aria-label="Close this error message" click.delegate="showErrorMsg = false">\r\n\t\t\t\t\t<i class="icon icon-cancel" aria-hidden="true"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<div class="error-title-block" aria-hidden="true">\r\n\t\t\t\t\t<p class="error-title-text">\r\n\t\t\t\t\t\t<ppc-content key="pleaseEnterAllRequiredFieds">\r\n\t\t\t\t\t\t\tPlease enter all required fields:\r\n\t\t\t\t\t\t</ppc-content></p>\r\n\t\t\t\t\t<ul repeat.for="field of fields">\r\n\t\t\t\t\t\t<li repeat.for="error of errorMessages[field]" aria-label="${error | pht}">${error | pht}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\x3c!-- error messages block end--\x3e\r\n\t\t\t\r\n\t\t\t\x3c!-- main body start--\x3e\r\n\t\t\t<div class="refer-block" show.bind="!saveSuccess && !saveFail && !duplicate && !referredByOther">\r\n\t\t\t\t<form submit.delegate="submitForm()">\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="firstName">\r\n\t\t\t\t\t\t\t<ppc-content key="firstNameLabel1" data-ph-at-id="first-name-label-text">First Name</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').firstName.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type="text" class="${validationController.validationErrors.firstName.length ? \'error-block\' : \'\'}" value.bind="profile.firstName" blur.trigger="validationController.validate(\'firstName\')" placeholder="Type here" id="firstName" data-ph-at-id="first-name-input-field" role="textbox" key-role="txtRole" aria-label="Enter your first name" key-aria-label="firstNameInputBox">\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.firstName.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.firstName">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="lastName">\r\n\t\t\t\t\t\t\t<ppc-content key="lastNameLabel1" data-ph-at-id="last-name-label-text">Last Name</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').lastName.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type="text" class="${validationController.validationErrors.lastName.length ? \'error-block\' : \'\'}" value.bind="profile.lastName" blur.trigger="validationController.validate(\'lastName\')" placeholder="Type here" id="lastName" data-ph-at-id="last-name-input-field" role="textbox" key-role="txtRole" aria-label="Enter your last name" key-aria-label="lastNameInputBox">\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.lastName.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.lastName">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="email">\r\n\t\t\t\t\t\t\t<ppc-content key="emailLabel1" data-ph-at-id="email-label-text">Email</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').email.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type="text" name="email" class="${validationController.validationErrors.email.length ? \'error-block\' : \'\'}" value.bind="profile.email" blur.trigger="validationController.validate(\'email\')" placeholder="Type here" id="email" data-ph-at-id="email-input-field" role="textbox" key-role="txtRole" aria-label="Enter your email" key-aria-label="emailInputBox">\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.email.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.email">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="number">\r\n\t\t\t\t\t\t\t<ppc-content key="phoneLabel1" data-ph-at-id="phone-label-text">Contact Number</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').mobile.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type="text" class="${validationController.validationErrors.mobile.length ? \'error-block\' : \'\'}" value.bind="profile.mobile" blur.trigger="validationController.validate(\'mobile\')" placeholder="Type here" id="number" data-ph-at-id="phone-input-field" role="textbox" key-role="txtRole" aria-label="Enter your contact number" key-aria-label="phoneInputBox">\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.mobile.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.mobile">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="category">\r\n\t\t\t\t\t\t\t<ppc-content key="jobCategoryLabel1" data-ph-at-id="category-label-text">Job Category</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').category.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<select type="" class="${validationController.validationErrors.category.length ? \'error-block\' : \'\'}" value.bind="profile.category" blur.trigger="validationController.validate(\'category\')" placeholder="Type here" id="category" data-ph-at-id="category-select-field" role="combobox" key-role="comboRole" aria-label="Enter a Job Category" key-aria-label="jobCategorySelectBox">\r\n\t\t\t\t\t\t\t<option role="option" key-role="optionRole" repeat.for="category of categoryList" value.bind="category.value">${category.name}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<i class="fa fa-chevron-down select-chevron" aria-hidden="true"></i>\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.category.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.category">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="designation">\r\n\t\t\t\t\t\t\t<ppc-content key="occupationLabel1" data-ph-at-id="designation-label-text">Occupation</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').designation.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type="text" class="${validationController.validationErrors.designation.length ? \'error-block\' : \'\'}" value.bind="profile.designation" blur.trigger="validationController.validate(\'designation\')" placeholder="Type here" id="designation" data-ph-at-id="designation-input-field" role="textbox" key-role="txtRole" aria-label="Enter your Occupation" key-aria-label="occupationInputBox">\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.designation.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.designation">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="form-field">\r\n\t\t\t\t\t\t<label for="resume">\r\n\t\t\t\t\t\t\t<ppc-content key="resumeOrLinkedInProfileLabel1" data-ph-at-id="resume-label-text">Resume/LinkedIn profile</ppc-content>\r\n\t\t\t\t\t\t\t<span class="required-field" if.bind="commonService.getValidationRules(\'profile\').resume.presence"><ppc-content key="requiredStar">*</ppc-content></span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="errorMessages.resume.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.resume">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<div class="resume-links">\r\n\t\t\t\t\t\t\t<div class="resume-name-block" show.bind="!profile.resumeUrl">\r\n\t\t\t\t\t\t\t\t<input type="file" files.bind="files" value.bind="fileValue" change.delegate="uploadFile()" class="upload-Resume-Button" data-ph-at-id="resume-input-field" role="textbox" key-role="txtRole" aria-label="Click to upload your resume" key-aria-label="resumeInputBox">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t<i class="fa fa-upload" aria-hidden="true"></i> \r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t<ppc-content key="uploadResumeLabel" data-ph-at-id="upload-resume-label">Upload Resume</ppc-content>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="resume-pdf-block" show.bind="profile.resumeUrl">\r\n\t\t\t\t\t\t\t\t<div class="profile-name">\r\n\t\t\t\t\t\t\t\t\t<i class="fa fa-file-pdf-o" aria-hidden="true"></i> \r\n\t\t\t\t\t\t\t\t\t<span class="resume-name">${profile.resumeName}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="delete-resume">\r\n\t\t\t\t\t\t\t\t\t<button click.delegate="removeResumeFile()" class="delete-btn">\r\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-trash-o" aria-hidden="true"></i>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.resumeUrl.length || validationController.validationErrors.resumeName.length ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.resumeUrl">${error | pht}</span>\r\n\t\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.resumeName">${error | pht}</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<label for="LinkedIn Link">\r\n\t\t\t\t\t\t\t<i class="fa fa-link" aria-hidden="true"></i> \r\n\t\t\t\t\t\t\t<ppc-content key="LinkedInProfileLabel" data-ph-at-id="linkedin-profile-label">LinkedIn Profile Link</ppc-content>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type="text" name="Linkkedin Profile" class="${validationController.validationErrors.resume.length ? \'error-block\' : \'\'}" value.bind="profile.linkedinUrl" blur.trigger="validateResume()" placeholder="Add link here" id="resume" style="padding: 10px 15px;" data-ph-at-id="linkedin-input-field">\r\n\t\t\t\t\t\t<span aria-relevant="additions removals" class="error errorText error-active" role.bind="validationController.validationErrors.linkedinUrl.length>0 ? \'alert\':\'\'" aria-atomic="true">\r\n\t\t\t\t\t\t\t<span repeat.for="error of validationController.validationErrors.linkedinUrl">${error | pht}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="submit-block">     \r\n\t\t\t\t\t\t<button type="submit" data-ph-at-id="submit-button">\r\n\t\t\t\t\t\t\t<ppc-content key="submitButtontext11" data-ph-at-id="submit-button-text">\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>                                                                 \r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t\x3c!-- main body end--\x3e\r\n\t\r\n\t\t\t\x3c!-- Success message block start--\x3e\r\n\t\t\t<div class="success-message-block" show.bind="saveSuccess || saveFail">  \r\n\t\t\t\t<div class="success-button" show.bind="saveSuccess">     \r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<i class="fa fa-check"></i>\r\n\t\t\t\t\t\t<ppc-content key="candidateReferredSuccessfullyButtontext">\r\n\t\t\t\t\t\t\tCandidate referred successfully\r\n\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>   \r\n\t\t\t\t<div class="error-button" show.bind="saveFail">     \r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<i class="fa fa-times"></i>\r\n\t\t\t\t\t\t<ppc-content key="tryAgainButtonText">\r\n\t\t\t\t\t\t\tCould not complete action. Please try again.\r\n\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div class="content-block" show.bind="saveSuccess"> \r\n\t\t\t\t\t<div class="content-image">\r\n\t\t\t\t\t\t<figure>\r\n\t\t\t\t\t\t\t<ppc-content type="image">\r\n\t\t\t\t\t\t\t\t<img ph-src="assets/images/internal-mobility/im-email-icon.png" key-ph-src="imEmailIconImg" alt="Email Image" key-alt="emailImageSuccess">\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</figure>\r\n\t\t\t\t\t</div> \r\n\t\t\t\t\t<div class="content-text">\r\n\t\t\t\t\t\t<p if.bind="profile.jobSeqNo">\r\n\t\t\t\t\t\t\t<ppc-content key="weHaveSent">\r\n\t\t\t\t\t\t\t\tWe have sent an email to \r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t\t${profile.firstName}. \r\n\t\t\t\t\t\t\t<ppc-content key="weWillKeep">\r\n\t\t\t\t\t\t\t\tWe will keep you informed when \r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t\t\t${profile.firstName} \r\n\t\t\t\t\t\t\t<ppc-content key="appliesForThisJob">\r\n\t\t\t\t\t\t\t\tapplies for this job.\r\n\t\t\t\t\t\t\t</ppc-content> \r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p if.bind="!profile.jobSeqNo">\r\n\t\t\t\t\t\t\t<ppc-content key="weHaveSent">\r\n\t\t\t\t\t\t\t\tWe have sent an email to \r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t\t${profile.firstName}. \r\n\t\t\t\t\t\t\t<ppc-content key="weWillKeep">\r\n\t\t\t\t\t\t\t\tWe will keep you informed when \r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t\t\t${profile.firstName} \r\n\t\t\t\t\t\t\t<ppc-content key="appliesForAJob">\r\n\t\t\t\t\t\t\t\tapplies for a job.\r\n\t\t\t\t\t\t\t</ppc-content> \r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div class="got-it-button">     \r\n\t\t\t\t\t<button click.delegate="closeSaveMessage()" role="button" key-role="btnRole">\r\n\t\t\t\t\t\t<ppc-content key="OkGotItButtontext1">Ok Got It</ppc-content>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t\t\x3c!-- same job/category refer message block --\x3e\r\n\t\t\t<div class="same-job-refer-block" show.bind="duplicate">\r\n\t\t\t\t<div class="content-block"> \r\n\t\t\t\t\t<div class="content-image">\r\n\t\t\t\t\t\t<figure>\r\n\t\t\t\t\t\t\t<ppc-content type="image">\r\n\t\t\t\t\t\t\t\t<img ph-src="assets/images/internal-mobility/refer-duplicate.png" key-ph-src="referDuplicateImg" alt="Refer Profile Image" key-alt="referProfileIageAltText">\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</figure>\r\n\t\t\t\t\t</div> \r\n\t\t\t\t\t<div class="content-text-block">\r\n\t\t\t\t\t\t<div class="caution-image">\r\n\t\t\t\t\t\t\t<ppc-content type="image">\r\n\t\t\t\t\t\t\t\t<img ph-src="assets/images/internal-mobility/refer-caution.png" key-ph-src="referCautionImg" alt="Refer Caution Image" key-alt="referCautionAltText">\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h4 class="content-text-head">\r\n\t\t\t\t\t\t\t<ppc-contenet key="duplicateReferText1">\r\n\t\t\t\t\t\t\t\tDuplicate Refer\r\n\t\t\t\t\t\t\t</ppc-contenet>\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t<p class="content-text-descr" if.bind="profile.jobSeqNo">\r\n\t\t\t\t\t\t\t<ppc-content key="duplicateMessageForSameJob">\r\n\t\t\t\t\t\t\t\tYou have already referred your friend for the same job. We will inform you once your friend applies for the job you have referred.\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p class="content-text-descr" if.bind="!profile.jobSeqNo">\r\n\t\t\t\t\t\t\t<ppc-content key="duplicateMessageForSameCategory">\r\n\t\t\t\t\t\t\t\tYou have already referred your friend for same category. We have sent an email to your friend. Our HR team will connect with your friend soon.\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div class="remainder-block">\r\n\t\t\t\t\t<h4 class="title">\r\n\t\t\t\t\t\t<ppc-contenet key="remainderText">\r\n\t\t\t\t\t\t\tYou can still send an email reminder to your friend.\r\n\t\t\t\t\t\t</ppc-contenet>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<button click.delegate="submitForm(true)" role="button" key-role="btnRole">\r\n\t\t\t\t\t\t<ppc-content key="sendRemainderMail1">\r\n\t\t\t\t\t\t\tSend Remainder Mail\r\n\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="jobs-matching-block">\r\n\t\t\t\t\t<h4 class="title">\r\n\t\t\t\t\t\t<ppc-contenet key="otherJobsText">\r\n\t\t\t\t\t\t\tYou can refer your friend for other jobs matching his profile.\r\n\t\t\t\t\t\t</ppc-contenet>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<a ph-href="referral-jobs" key-ph-href="referralJobsHref" role="link" key-role="linkRole" class="view-other-jobs">\r\n\t\t\t\t\t\t<ppc-content key="viewMatchingProfile1">\r\n\t\t\t\t\t\t\tView Other Jobs To Refer\r\n\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t\t\x3c!-- same job/category refer other employee --\x3e\r\n\t\t\t<div class="same-job-refer-block" show.bind="referredByOther">\r\n\t\t\t\t<div class="content-block"> \r\n\t\t\t\t\t<div class="content-image">\r\n\t\t\t\t\t\t<figure>\r\n\t\t\t\t\t\t\t<ppc-content type="image">\r\n\t\t\t\t\t\t\t\t<img ph-src="assets/images/internal-mobility/refer-duplicate.png" key-ph-src="referDuplicateImg" alt="Refer Profile Image" key-alt="referProfileIageAltText">\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</figure>\r\n\t\t\t\t\t</div> \r\n\t\t\t\t\t<div class="content-text-block">\r\n\t\t\t\t\t\t<div class="caution-image">\r\n\t\t\t\t\t\t\t<ppc-content type="image">\r\n\t\t\t\t\t\t\t\t<img ph-src="assets/images/internal-mobility/refer-caution.png" key-ph-src="referCautionImg" alt="Refer Caution Image" key-alt="referCautionAltText">\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h4 class="content-text-head">\r\n\t\t\t\t\t\t\t<ppc-contenet key="duplicateReferText1">\r\n\t\t\t\t\t\t\t\tDuplicate Refer\r\n\t\t\t\t\t\t\t</ppc-contenet>\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t<p class="content-text-descr" if.bind="profile.jobSeqNo">\r\n\t\t\t\t\t\t\t<ppc-content key="yourFriendAlreadyReferredByOtherEmployeeeForThisJob">\r\n\t\t\t\t\t\t\t\tyour friend has already been referred for this job by one of our employee.\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p class="content-text-descr" if.bind="!profile.jobSeqNo">\r\n\t\t\t\t\t\t\t<ppc-content key="yourFriendAlreadyReferredByOtherEmployeeeForThisCategory">\r\n\t\t\t\t\t\t\t\tyour friend has already been referred for this Category by one of our employee.\r\n\t\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> \r\n\t\t\t\t<div class="jobs-matching-block">\r\n\t\t\t\t\t<h4 class="title">\r\n\t\t\t\t\t\t<ppc-contenet key="youCanStillText">\r\n\t\t\t\t\t\t\tYou can still refer your friend for some interesting job.\r\n\t\t\t\t\t\t</ppc-contenet>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<a ph-href="referral-jobs" key-ph-href="referralJobsHref" role="link" key-role="linkRole" class="view-other-jobs-employee">\r\n\t\t\t\t\t\t<ppc-content key="viewOtherJobsToReferTextEmployee">\r\n\t\t\t\t\t\t\tView Other Jobs To Refer\r\n\t\t\t\t\t\t</ppc-content>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \r\n\t\t\t\x3c!-- background image block--\x3e\r\n\t\t\t<div class="background-image" show.bind="saveSuccess || saveFail || duplicate || referredByOther">\r\n\t\t\t\t<figure>\r\n\t\t\t\t\t<ppc-content type="image">\r\n\t\t\t\t\t\t<img ph-src="assets/images/internal-mobility/im-email-bg.png" key-ph-src="imEmailBgImg" alt="Email Background Image" key-alt="emailBackgroundAltText">\r\n\t\t\t\t\t</ppc-content>\r\n\t\t\t\t</figure>\r\n\t\t\t</div> \r\n\t\t</div>\r\n\t</template>\r\n\t'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!0,testing:!0}}),define("v3/ph-global-search-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"globalSearchV3",ddoKeyEvent:"globalSearchEventV3",landingpageddoKey:"getBusinessRules",ddoKeyMOSSEARCH:"globalSearchMOSTitles",ddoKeyGlobalSearchConfig:"globalSearchConfig",ddoKeyAgp:"getAgpMetaData",ddoKeyEagerLoad:"eagerLoadRefineSearch"}},t.globalSearchConfig={globalSearchFeature:{mobileSearch:!0,militarySearch:!1,mobileSearchWithHeaderIcon:!1}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e,this.params={}}return e.prototype.getSearchResults=function(e,t,o){var i=this.params;return o&&o.searchValue&&(delete i.field,delete i.sub_field,i.keywords=o.searchValue,i.category="category",i.location="location"),o&&o.condition&&o.condition.length&&(i.condition=o.condition),"globalSearchV3"==t&&(i.field="category",i.sub_field="internalCategoryId",i.location_size=2,i.category_size=2,i.job_size=3),this.commonService.getDDO(e,t,i).then(function(e){var o=e[t];if(o.jobLocations&&o.jobLocations.locations){var i=o.jobLocations.locations,a={};for(var r in i){var n=[];if(i.hasOwnProperty(r)){var s=i[r];for(var l in s){var c=s[l];c.location=c.name,c.field=r,n.push(c)}}a[r]=n}o[t]={locations:a}}return o})},e.prototype.getLandingpageKey=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getMOSSearchResults=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDOrequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.GlobalSearchService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-global-search-config","./ph-global-search-service"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=".ph-header-search-icon",l=".ph-a11y-search-box, input",c=["allCategories","suggestedJobs","suggestedLocations","suggestedCategories","suggestedRecentSearches","suggestedKeywords"],d=function(e){function t(t,o,i,a,r,n){var l=e.call(this,t,o,d.elementTag)||this;return l.element=t,l.commonService=o,l.globalSearchService=i,l.eventAggregator=a,l.localStorage=r,l.WidgetConfig=n,l.placeholderText="Enter job title",l.showTitle=!0,l.showCaption=!0,l.searchValue="",l.arrowNavigation=!0,l.reloadOnClear=!1,l.checkValidation=!1,l.searchUrl="search-results",l.isLandingPage=0,l.categoryColumnCount=2,l.inlineSearch=!0,l.preFillSearchedKey=!0,l.showDropDown=!1,l.showAllJobCategories=!0,l.showJobSuggestions=!0,l.showRecentSearches=!0,l.isDisabled=!0,l.recentlySearchedKeys=l.localStorage.getItem("globalSearch"),l.recentSearchStorage=[],l.itemSBHasFocus=!1,l.isEnterClick=!0,l.keywordsSearched=[],l.suggestedJobResults=[],l.suggestedJobResultsNames=[],l.suggestedMOSKeywords=[],l.gsFeature={},l.isMobileEnabled=!1,l.isMilitarySearch=!1,l.isMOSSearchEnabled=!0,l.isMOSClick=!1,l.mosCode="",l.showError=!1,l.suggestedKeywords=[],l.copyMOSKeywords=[],l.gsClrTxt=0,l.isSearchInFocus=!1,l.subscriptions=[],l.resultsUpdated=!1,l.searchBoxBackdrop=!1,l.isHeadSearchEnabled=!1,l.enableSuggestionResults=[],l.agpData={},l.allSuggestions=l.getAllJobSuggestions(),l.handleInputFocus=function(e){if(l.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){l.element.firstElementChild.classList.add("ph-mobile-search-enabled");var t=e&&e.target&&e.target.closest(".ph-search-group"),o=l.element.querySelector(".form-group");if(t&&o&&l.isMobileEnabled&&(o.classList.contains("ph-mobile-search")||o.classList.add("ph-mobile-search"),t.classList.contains("ph-mobile-search")||t.classList.add("ph-mobile-search")),document.body.scrollTop=0,document.body.style.overflow="hidden",l.element.querySelector(s)){l.isHeadSearchEnabled=!0;var i=l.element.querySelector("input.ph-input-search");i&&i.focus()}}},l}return __extends(t,e),d=t,t.prototype.getAllJobSuggestions=function(){var e=this.isFull;return{show:null,updateShow:function(){var t={jobs:e(this.jobs),locations:e(this.locations),categories:e(this.categories),keywords:e(this.keywords),searched:e(this.searched),all:!1};for(var o in t)if(t.hasOwnProperty(o)&&1==t[o]){t.all=!0;break}return t},jobs:null,locations:null,categories:null,keywords:null,searched:null,boundaries:null}},t.prototype.created=function(){this.fetchResultsConfig()},t.prototype.attached=function(){var t=this;if(e.prototype.attached.call(this),!this.hasFeature&&!this.hasFeature("auto-complete","a11y")){var o=this.handleActionOutsideScope.bind(this);document.addEventListener("mouseup",o,!1),document.addEventListener("keyup",this.keyUpCallback.bind(this),!1)}if(this.isMilitarySearch=!(!this.element||!this.element.getAttribute("ph-mos-search")),this.gsFeature=this.commonService.getSiteSettings("globalSearchFeature"),this.gsFeature&&this.gsFeature.hasOwnProperty("militarySearch")&&(this.isMOSSearchEnabled=this.isMilitarySearch||this.gsFeature.militarySearch),this.isDisabled=!!this.isMilitarySearch||this.checkValidation,this.preFillSearchedKey&&(this.searchValue=e.prototype.getSearchKeyword.call(this)||""),this.isLandingPage&&(this.rk=this.rk?this.rk:this.commonService.phenomAppManager.getSessionParams("rk"),this.rk&&this.rk.length>0)){var i={},a={};return a.landingPageKeys=[this.rk],i.pageIdentifier=a,this.globalSearchService.getLandingpageKey(d.elementTag,r.WidgetConfig[d.version].landingpageddoKey,i).then(function(e){e&&e.data&&e.data[t.rk]&&(t.condition=e.data[t.rk].condition)})}var n=this.commonService.getSiteSettings("globalSearchFeature");n&&Object.keys(n).length&&n.mobileSearch&&setTimeout(function(){window.addEventListener("resize",function(){t.eventAggregator.publish("globalsearchv3resize",{})}),t.handleSearchOnWindowResize()},500),this.subscriptions.push(this.eventAggregator.subscribe("globalsearchv3resize",function(e){t.handleSearchOnWindowResize()})),setTimeout(function(){var e=t.element.querySelector(l);e&&e.addEventListener("focus",function(){t.searchBoxBackdrop=!0})},100),this.fetchAgpFilterBasedJobs()},t.prototype.fetchAgpFilterBasedJobs=function(){var e=this.commonService.getCachedDDO(r.WidgetConfig[d.version][d.ddoKeyAgp]),t=this.commonService.getCachedDDO(r.WidgetConfig[d.version][d.ddoKeyEagerLoad]),o="";if(e&&e.data&&e.data.type&&t){o=e.data.type.split("-")[0],this.agpData={totalHits:t.totalHits,filterType:e.data[o]};var i=window.location.pathname;i&&(this.searchUrl=i.replace("/",""))}},t.prototype.fetchResultsConfig=function(){var e=this;this.globalSearchService.makeDDOrequest(d.elementTag,r.WidgetConfig[d.version][d.ddoKeyGlobalSearchConfig],{}).then(function(t){t&&t.data&&t.data.configured?e.enableSuggestionResults=t.data.data||[]:e.enableSuggestionResults=c},function(t){e.enableSuggestionResults=c,new Error(t)})},t.prototype.isSuggestionVisible=function(e){return-1==this.enableSuggestionResults.indexOf(e)},t.prototype.handleSearchOnWindowResize=function(){var e=this.element.querySelector(s),t=window.innerWidth;if(e&&this.gsFeature&&this.gsFeature.mobileSearchWithHeaderIcon)this.isMobileEnabled=!0,t<=767?e.addEventListener("click",this.handleInputFocus):(this.isMobileEnabled=!1,e.removeEventListener("click",this.handleInputFocus),this.clearBackdrop());else if(t<=767){this.isMobileEnabled=!0;for(var o=this.element.querySelectorAll("input.ph-input-search")||[],i=0;i<o.length;i++)o[i].addEventListener("focusin",this.handleInputFocus)}else{this.isMobileEnabled=!1;for(var o=this.element.querySelectorAll("input.ph-input-search")||[],i=0;i<o.length;i++)o[i].removeEventListener("focusin",this.handleInputFocus);this.clearBackdrop()}},t.prototype.handleSelection=function(e){if(this.inlineSearch)for(var t=e.target;t!=this;){if("A"==t.nodeName){var o=t.getAttribute("data-option-title");return void(o?this.searchValue=o:console.warn("value not found"))}t=t.parentNode}},t.prototype.handleActionOutsideScope=function(e){var t=e.target;if(13===e.keyCode||void 0==e.keyCode){for(var o=!0,i=void 0;t;)if(t=t.parentElement,i=t&&t.className){if(null==t||-1==i.indexOf("phs-global-search"))o=!0;else if(i.indexOf("phs-global-search")>=0){o=!1;break}}else t||(o=!0);o&&this.handleBlur()}else 27!=e.keyCode&&9!=e.keyCode||this.handleBlur()},t.prototype.handleBlur=function(){this.showDropDown=this.showAllJobCategories=this.showJobSuggestions=!1},t.prototype.handleSuggestedKeysArrowKeysData=function(){function e(){return t=document.querySelectorAll(".phs-keyword-suggestions li a"),o=t.length-1,i>=o?i=o:i<0&&(i=0),t[i]}var t,o,i=-1;return{next:function(){return i+=1,e()},prev:function(){return i-=1,e()}}},t.prototype.handleCategoryArrowKeysData=function(){function e(e){a=0==e&&0==a?n:0,i=o==i+1?0:i+1,n=t[i]?t[i].length-1:n}var t=this.allJobCategories,o=t.length,i=0,a=-1,r=1,n=t[i].length-1;return{next:function(){return r=1,a==n?e(r):a++,{column:i,
delta:a}},prev:function(){return r=0,0==a?e(r):a--,{column:i,delta:a}},reset:function(){a=r?a-1:a+1}}},t.prototype.searchValueChanged=function(e){var t=this,o=t.searchValue||"",i=o&&o.length>0;i&&(t.showDropDown=!0),t.showDropDown&&(i?(t.showAllJobCategories||t.showJobSuggestions)&&(this.isMilitarySearch?this.fetchMilitaryJobSuggestions():t.fetchJobSuggestions()):t.fetchJobCategories()),t.isDisabled=!i},t.prototype.handleCategoryOptions=function(e,t){var o,i;switch(e.keyCode){case 37:case 39:break;case 38:this.arrowNavigation&&(i=t.prev(),(o=document.querySelector("#phs-lia_"+i.column+"_"+i.delta))&&o.focus());break;case 40:this.arrowNavigation&&(i=t.next(),(o=document.querySelector("#phs-lia_"+i.column+"_"+i.delta))&&o.focus())}},t.prototype.handleSuggestedKeyOptions=function(e,t){var o;switch(e.keyCode){case 38:this.arrowNavigation&&(o=t.prev())&&o.focus();break;case 40:this.arrowNavigation&&(o=t.next())&&o.focus()}},t.prototype.keyUpCallback=function(e){if(9===e.keyCode){var t=document.querySelectorAll(".ph-suggestion-focus-block");if(t.length)for(var o=0,i=t;o<i.length;o++){var a=i[o],r=a&&a.contains(document.activeElement);r?this.itemSBHasFocus=!0:(this.handleBlur(),this.itemSBHasFocus=!1)}}if(27===e.keyCode)return this.handleBlur(),!0},t.prototype.arrowKeyUp=function(e){if(this.hasFeature&&this.hasFeature("auto-complete","a11y"))return!0;var t=null;if(13===e.keyCode&&!1===this.itemSBHasFocus){var o=e.target&&e.target.href||"";""===o&&this.handleSubmitClick(o)}else 1==this.showJobSuggestions?(t=this.allSuggestions.boundaries,this.handleSuggestedKeyOptions(e,t)):1==this.showAllJobCategories&&(t=this.allJobCategories.boundaries,this.handleCategoryOptions(e,t))},t.prototype.handleItemFocus=function(e){switch(e.type){case"focus":console.info("hello")}},t.prototype.clearBackdrop=function(e){var t=this.element.querySelectorAll(".ph-search-group"),o=this.element.querySelector(".form-group"),i=this.element.querySelector(".ph-mobile-search-enabled");if(t&&o&&i){i.classList.remove("ph-mobile-search-enabled"),o.classList.contains("ph-mobile-search")&&o.classList.remove("ph-mobile-search");for(var a=0;a<t.length;a++)t[a].classList.contains("ph-mobile-search")&&t[a].classList.remove("ph-mobile-search");if(this.showDropDown=!1,document.body.style.overflow="",e&&e.target){var r=this.element.querySelector(s),n=this.element.querySelector(".phs-search-submit");r&&this.gsFeature&&this.gsFeature.mobileSearchWithHeaderIcon?n=r:document.body.style.overflow="initial",n&&n.focus()}}},t.prototype.handleFocus=function(e){var t=this,o=t.searchValue||"";switch(e.type){case"focus":o.length>0?t.isMilitarySearch?t.fetchMilitaryJobSuggestions():t.fetchJobSuggestions():t.isMilitarySearch||t.fetchJobCategories()}},t.prototype.isFull=function(e){return null!=e&&"object"==typeof e&&Object.keys(e).length>0},t.prototype.clearSearch=function(e){var t=this;if(this.reloadOnClear){var o=window.location.origin+window.location.pathname;window.location.assign(o)}else this.isDisabled=!0,this.showDropDown=!1,this.searchValue="",this.gsClrTxt=1,this.element.querySelector(l)&&setTimeout(function(){t.element.querySelector(l).focus(),t.searchBoxBackdrop=!0},100)},t.prototype.isEmpty=function(e){return!e||0==e.length},t.prototype.fetchJobSuggestions=function(){var e=this;this.showDropDown=!1;var t={};t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition);var o=this.fetchMilitaryJobSuggestions(),i=this.globalSearchService.getSearchResults(d.elementTag,r.WidgetConfig[d.version][d.ddoKeyEvent],t).then(function(t){if(e.suggestedJobs=t.jobTitles.data.titles,e.suggestedKeywords=t.jobTitles.data.suggestions||[],e.suggestedJobs)for(var o=0;o<e.suggestedJobs.length;o++){var i=e.suggestedJobs[o].title.replace(/<em>/g,"");i=i.replace(/<\/em>/g,"")}if(t.jobLocations&&t.jobLocations.locations){if(e.suggestedLocations=[],t.jobLocations.locations.city)for(var a=0;a<t.jobLocations.locations.city.length;a++)e.suggestedLocations.push(t.jobLocations.locations.city[a]);if(t.jobLocations.locations.country)for(var a=0;a<t.jobLocations.locations.country.length;a++)e.suggestedLocations.push(t.jobLocations.locations.country[a]);if(t.jobLocations.locations.state)for(var a=0;a<t.jobLocations.locations.state.length;a++)e.suggestedLocations.push(t.jobLocations.locations.state[a])}if(e.suggestedCategories=t.jobCategories.data.agg,e.suggestedCategories)for(var a=0;a<e.suggestedCategories.length;a++)e.suggestedCategories[a].key=e.suggestedCategories[a].category;if(e.populateRecentSearches(),document.activeElement===e.element.querySelector(l)&&(e.showDropDown=!0),e.showAllJobCategories=!1,e.showJobSuggestions=!0,!e.isEmpty(e.suggestedJobs)||!e.isEmpty(e.suggestedLocations)||!e.isEmpty(e.suggestedCategories)||e.keywordsSearched&&e.keywordsSearched.length>0||!e.isEmpty(e.suggestedKeywords)){e.element.querySelector(".job-filter"),e.element.querySelector(".phs-keywords"),e.element.querySelectorAll(".phs-keyword-suggestions li")}return e.suggestedJobResults=[],e.suggestedJobResultsNames.length&&e.suggestedJobResultsNames.map(function(t){e.suggestedJobResults="keywordsSearched"==t?e.suggestedJobResults.concat(e[t].slice(0,3)):e.suggestedJobResults.concat(e[t])}),e.allSuggestions.searched&&(e.suggestedJobResults=e.suggestedJobResults.concat(e.allSuggestions.searched.slice(0,3))),e.suggestedJobResults},function(e){new Error(e)});return Promise.all([i,o]).then(function(t){return e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),t[0].concat(t[1])})},t.prototype.setMOSKeyword=function(e,t){this.setMOSKeywordValue(e,t),t&&"click"==t.type&&this.handleSubmitClick()},t.prototype.setMOSKeywordValue=function(e,t){if(e){var o="";e.title&&(o=e.title),this.isDisabled=!1,this.searchValue=o.replace(/<(?:.|\n)*?>/gm,""),this.mosCode=e.mos_code}},t.prototype.setMOSFocusField=function(e){-1==e&&(e=0);var t=!1;if(!this.isMOSClick&&this.searchValue.length&&this.suggestedMOSKeywords&&this.suggestedMOSKeywords.length){this.showDropDown=!1;for(var o=0;o<this.suggestedMOSKeywords.length;o++)this.searchValue==this.suggestedMOSKeywords[o]&&(t=!0);t||(e=e||0==e?e:0,this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].title&&this.suggestedMOSKeywords[e].title.length&&(this.searchValue=this.suggestedMOSKeywords[e].title),this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].mos_code&&(this.mosCode=this.suggestedMOSKeywords[e].mos_code))}},t.prototype.fetchMilitaryJobSuggestions=function(){var e=this;if(!this.isMOSSearchEnabled)return new Promise(function(e,t){e([])});"undefined"!=typeof event&&"object"==typeof event&&(this.focusedElement=event&&event.target),this.showDropDown=!1,this.isMOSClick=!1;var t=(this.allSuggestions,{});return t.size=3,t.keywords=this.searchValue,this.isMilitarySearch&&(t.size=5),this.condition&&this.condition.length>0&&(t.condition=this.condition),this.globalSearchService.getMOSSearchResults(d.elementTag,r.WidgetConfig[d.version][d.ddoKeyMOSSEARCH],t).then(function(t){return t=t&&t.data||{},t&&t.results&&t.results.length?(e.suggestedMOSKeywords=t.results,e.isDisabled=!1):t.searchConfig&&(e.suggestedMOSKeywords=[],e.isDisabled=!0,e.isMOSSearchEnabled=t.searchConfig.isMOSSearchEnabled),document.activeElement===e.element.querySelector(l)&&(e.showDropDown=!0),e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),e.suggestedMOSKeywords})},t.prototype.fetchJobCategories=function(){var e=this;this.showDropDown=!1;var t={};return t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition),this.globalSearchService.getSearchResults(d.elementTag,r.WidgetConfig[d.version][d.ddoKey],t).then(function(t){return t.data.category&&t.data.category.forEach(function(e){e.key||(e.key=e.category)}),document.activeElement===e.element.querySelector(l)&&(e.showDropDown=!0),e.populateRecentSearches(),e.allJobCategories=e.singleArrayChunk(t.data.category,e.categoryColumnCount),e.showAllJobCategories=!0,e.showJobSuggestions=!1,e.suggestedJobResults=[],e.keywordsSearched=e.keywordsSearched.slice(0,3),e.suggestedJobResults=e.suggestedJobResults.concat(t.data.category),e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),e.allJobCategories},function(e){new Error(e)})},t.prototype.onError=function(e){i.logger.debug("ph-global-search: error..."+e)},t.prototype.chunk=function(e,t){var o,i=[],a=t,r=Math.floor(e.length/a),n=e.length%a,s=0;for(n>0&&(r+=1);a;)o=1==a?e.length:s+r,i.push(e.slice(s,o)),s=o,a--;return i},t.prototype.handleSubmitClick=function(t){var o=this;if(this.isMilitarySearch){if(!this.suggestedMOSKeywords.length)return;var a=!1;this.suggestedMOSKeywords.forEach(function(e){e.title==o.searchValue&&(!o.mosCode&&e.mos_code&&(o.mosCode=e.mos_code),a=!0)}),a||(this.searchValue=this.suggestedMOSKeywords[0].title,this.mosCode=this.suggestedMOSKeywords[0].mos_code)}if(this.showError=!1,this.searchValue&&this.isEnterClick||!this.checkValidation){this.checkValidation=!1,this.isEnterClick=!1,this.mosCode||(this.updateLocalStrWithRecentSearchDetails(this.searchValue,!0),this.storeKeywordsForRecommendation());var r={};r.trait6=this.searchValue;try{this.commonService.processTrackingEvent("page_search",void 0,r)}catch(e){i.logger.debug(e.message)}var n=void 0,s="";if(this.mosCode&&(s="&ms=true&moscode="+this.mosCode),"search-results"==this.searchUrl)n=e.prototype.getUrl.call(this,null,this.searchUrl,{},"keywords="+this.searchValue+s);else{var l=-1==this.searchUrl.indexOf("?")?"?keywords=":"&keywords=";n=this.commonService.getBaseUrl()+this.searchUrl+l+this.searchValue+s}window.location.assign(n)}else this.showError=!0},t.prototype.updateLocalStorage=function(){var e=this.localStorage.getItem("globalSearch")||[];-1==e.indexOf(this.searchValue)&&(e.push(this.searchValue),this.localStorage.setItem("globalSearch",e)),this.recentSearchStorage=e},t.prototype.populateRecentSearches=function(){null!=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords)?(this.allSuggestions.searched=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords),this.showRecentSearches=!0):this.showRecentSearches=!1},t.prototype.getCategoryUrl=function(e){return"/us/en/c/"+e.toLowerCase()+"-jobs"},t.prototype.updateLocalStrWithRecentSearchDetails=function(e,t){if(!0===t||!1===this.inlineSearch){null!=e&&e.length>0&&(this.searchValue=e);var o=[];null!=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords)&&(o=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords)),this.searchValue&&this.searchValue.length&&(-1==o.indexOf(this.searchValue)?o.unshift(this.searchValue):(o.splice(o.indexOf(this.searchValue),1),o.unshift(this.searchValue)),this.commonService.setSpecificTrackCtx(d.globalSearchKeywords,o))}return!0},t.prototype.storeKeywordsForRecommendation=function(){var e=[];if(null!=this.commonService.getSpecificTrackCtx(d.searchKeywords)&&(e=this.commonService.getSpecificTrackCtx(d.searchKeywords)),this.searchValue&&this.searchValue.length){if(null!=e){for(var t in e)if(e[t].keyword==this.searchValue){e.splice(t,1);break}}else e=[];e.unshift({keyword:this.searchValue,timeStamp:(new Date).toUTCString()}),this.commonService.setSpecificTrackCtx(d.searchKeywords,e)}},t.prototype.detached=function(){if(this.element.firstElementChild&&this.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){window.removeEventListener("resize",this.handleSearchOnWindowResize);for(var e=this.element.querySelectorAll("input.ph-input-search"),t=0;t<e.length;t++)e[t].removeEventListener("focusin",this.handleInputFocus)}this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getWidgetBundleValue=function(e,t,o){return this.widgetBundle&&this.widgetBundle[e]?this.widgetBundle[e]:o?o.getAttribute(t):void 0},t.prototype.singleArrayChunk=function(e,t){window.innerWidth<=767&&(t=1);for(var o=[],i=[],a=Math.floor(e.length/t),r=e.length%t,n=0;n<t;n++){for(var s=[],l=0;l<a;l++){var c=l+n*a;s.push(e[c])}r>=1&&(s.push(e[e.length-(n+1)]),r-=1),o.push(s)}if(o.length){for(var d=0;d<o[0].length;d++)for(var p=0;p<o.length;p++)o[p][d]&&i.push(o[p][d]);o=i}return o},t.prototype.setKeywordSuggested=function(e){this.suggestedJobResultsNames=e},t.prototype.getFieldOptions=function(e){var t=this;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.fetchMilitaryJobSuggestions():this.fetchJobSuggestions():(this.isSearchInFocus=!0,this.isMilitarySearch?(this.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3),[]):this.fetchJobCategories())}},t.prototype.setFieldValue=function(e,t){switch(e){case"typehead":if(this.searchValue.length){if(this.isMilitarySearch){if(this.suggestedMOSKeywords.length&&this.suggestedMOSKeywords[t]){this.setMOSKeyword(this.suggestedMOSKeywords[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}else if(this.suggestedMOSKeywords.length&&-1==t){this.setMOSKeyword(this.suggestedMOSKeywords[0]),this.mosCode=this.suggestedMOSKeywords[0].mos_code,this.isMOSClick=!0;var o=this.element.querySelectorAll(".phs-suggested-mos-keywords-list li a");this.fireClick(o[0])}}else if(this.suggestedJobResults.length&&this.suggestedJobResults[t]){var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}else if(this.isMilitarySearch){if(this.allSuggestions.searched.length&&this.allSuggestions.searched[t]){this.setMOSKeyword(this.allSuggestions.searched[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}else if(this.allJobCategories.length&&this.allJobCategories[t]){var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}},t.prototype.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},t.prototype.getActiveIndex=function(e){var t=this,o=-1;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.suggestedMOSKeywords.forEach(function(e,i){e.title==t.searchValue&&(o=i)}):this.suggestedJobResults.forEach(function(e,i){var a=e&&e.key||e&&e.category;a&&a==t.searchValue&&(o=i)}):this.allJobCategories&&this.allJobCategories.length&&this.allJobCategories.forEach(function(e,i){e.key==t.searchValue&&(o=i)}),o}return o},t.prototype.clearFieldValue=function(e){},t.prototype.getActiveIndexOnBlur=function(e,t){this.gsClrTxt=0,this.isSearchInFocus=!1,this.element.querySelector(l)!=document.activeElement&&(this.searchBoxBackdrop=!1),this.showDropDown=!1,this.isMilitarySearch&&this.setMOSFocusField(e)},t.prototype.setFocusField=function(e,t){this.focusedField=e,t?(this.focusedField=void 0,this.showDropDown=!1):this.isMilitarySearch&&this.searchValue.length>0&&0==this.suggestedMOSKeywords.length?this.handleBlur():document.activeElement===this.element.querySelector(l)&&(this.showDropDown=!0)},t.prototype.getUrl=function(t,o,i,a,r){if(this.partnerUrl){var n=this.commonService.getParam("partnersUrl")||"",s=e.prototype.getUrl.call(this,t,o,i,a,r);return s=s.replace(this.commonService.getBaseUrl(),n)}if("job"==o||"search-results"==this.searchUrl||"category"==o){if(this.rk&&this.rk.length&&"job"!=o&&(a="&rk="+this.rk),"category"==o&&"search-results"!=this.searchUrl){a=a+"&category="+encodeURIComponent(i.key||i.name||"");var l=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,i,a,r),c=-1==this.searchUrl.indexOf("?")?"?":"&",s=this.commonService.getBaseUrl()+this.searchUrl+c+l;return s}return e.prototype.getUrl.call(this,t,o,i,a,r)}var l=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,i,a,r),c=-1==this.searchUrl.indexOf("?")?"?":"&",s=this.commonService.getBaseUrl()+this.searchUrl+c+l;return s},t.version="v3",t.ddoKey="ddoKey",t.ddoKeyEvent="ddoKeyEvent",t.ddoKeyMOSSEARCH="ddoKeyMOSSEARCH",t.ddoKeyGlobalSearchConfig="ddoKeyGlobalSearchConfig",t.elementTag="ph-global-search-"+d.version,t.globalSearchKeywords="globalSearch_keywords",t.searchKeywords="keywords",t.ddoKeyAgp="ddoKeyAgp",t.ddoKeyEagerLoad="ddoKeyEagerLoad",__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"placeholderText",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"showTitle",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"showCaption",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"searchValue",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"arrowNavigation",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"reloadOnClear",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"checkValidation",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"searchUrl",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"isLandingPage",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"rk",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"categoryColumnCount",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"partnerUrl",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"inlineSearch",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"preFillSearchedKey",void 0),t=d=__decorate([o.customElement(d.elementTag),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(p=void 0!==i.CommonService&&i.CommonService)&&p||Object,n.GlobalSearchService,a.EventAggregator,"function"==typeof(h=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&h||Object,Object])],t);var d,p,h}(i.PhenomWidget);t.GlobalSearch=d}),define("text!v3/ph-global-search.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-global-search-v3/default/view.html",["module"],function(e){
e.exports='<template>\n<form role="search" class="phs-global-search-area ph-widget-box"  keyup.delegate="arrowKeyUp($event)" novalidate>\n    <div class="search-text-block">\n        <h1 if.bind="showTitle">\n            <ppc-content key="literal-1482132226713-45">Do what you love </ppc-content>\n        </h1>\n        <p if.bind="showCaption">\n            <ppc-content key="literal-1482132226714-46">Search jobs</ppc-content>\n        </p>\n    </div>\n    <div class="form-group">\n        <div class="input-group">\n            <div class="job-filter ph-suggestion-focus-block">\n                <label class="sr-only" for="search">\n                      <ppc-content key="literal-1481279554825-44">Search</ppc-content>\n                 </label>\n                <input type="search" \n                       name="phsKeywords" \n                       placeholder.bind="placeholderText" \n                       class="form-control phs-keywords input-lg" \n                       value.bind="searchValue & debounce:100"\n                       focus.trigger="handleFocus($event)" \n                       autocomplete="off"\n                       id="search"\n                       aria-describedby="${placeholderText}">\n                        <span class="search-sym">\n                            <ppc-content type="icon"><i class="icon icon-search"></i></ppc-content>\n                        </span>\n                        <a class="phs-keysearch-clear" click.trigger="clearSearch($event)" show.bind="searchValue" href="javascript:void(0)">\n                            <ppc-content type="icon"><i class="icon icon-cancel"></i></ppc-content>\n                                <span class="sr-only">\n                                    <ppc-content key="literal-1481279554825-45">Search menu open clear text</ppc-content>\n                                </span>\n                        </a>\n                <div class="phs-search-suggestions" if.bind="showDropDown">\n                    <div class="phs-search-type-ahead phs-onclick-category" if.bind="showAllJobCategories">\n                        <div class="phs-search-categories">\n                            <h3><ppc-content key="literal-1481279554825-46">Job Categories</ppc-content></h3>\n                            <ul class="phs-search-category-list" repeat.for="categoryColumns of allJobCategories">\n                                <li repeat.for="category of categoryColumns" class="job-search-keyblock job-container-category_${$parent.$index}_${$index}" >\n                                    <a ph-tevent="job_category_click"  \n                                        id="phs-lia_${$parent.$index}_${$index}" \n                                        ref="linkEle"\n                                        data-option-title="${category.key}"\n                                        href="${getUrl(linkEle, \'category\', category)}">\n                                        <span class="phs-${category.key}">${category.key}</span>\n                                        <span class="phs-jobs-count phs-${category.total_count}">${category.total_count}</span>\n                                        \x3c!--<span>${category.key}</span>\n                                         <span class="phs-jobs-count">${category.total_count}</span>--\x3e\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="phs-keyword-suggestions" if.bind="showAllJobCategories">\n                        \x3c!--Location--\x3e\n                        \x3c!--TODO: for city, state, country property name dependent on app changes expected locationName--\x3e\n                        <div class="phs-locations-suggested" if.bind="allSuggestions.show.locations && (allSuggestions.locations.city.length || allSuggestions.locations.state.length || allSuggestions.locations.country.length)">\n                            <h3 tabindex="0">\n                                <ppc-content key="literal-130">\n                                    Location\n                                </ppc-content>\n                            </h3>\n                            <ul class="phs-locations-suggested-list">\n                                <li repeat.for="eachCity of allSuggestions.locations.city" class="phsLocationsSuggested_${$index}">\n                                    <a ph-tevent="type_ahead_search" ref="linkEle"\n                                        id="phs-lia_1_${$index}"\n                                        href="${getUrl(linkEle, \'search-results\', eachCity, \'qcity=\'+eachCity.city+\'&qstate=\'+eachCity.state+\'&qcountry=\'+eachCity.country)}" \n                                        data-ph-tevent-attr-trait59="location" \n                                        data-ph-tevent-attr-trait60="${eachCity.name}"\n                                        data-option-title="${eachCity.name}" \n                                        data-category="${eachCity.name}">\n                                        <span innerhtml= "${(eachCity.locationName ? eachCity.locationName_html : eachCity.cityStateCountry) | sanitizeHTML}"></span>\n                                        <span if.bind="eachCity.isSuggested" class="suggested-location">   \n                                            <ppc-content key="literal-132"> . suggested location</ppc-content>\n                                        </span>\n                                        <span class="phs-jobs-count">${eachCity.count}</span>\n                                    </a>\n                                </li>\n                                <li repeat.for="eachState of allSuggestions.locations.state" class="phsLocationsSuggested_${$index}">\n                                    <a ph-tevent="type_ahead_search" ref="linkEle"\n                                        id="phs-lia_2_${$index}"\n                                        href="${getUrl(linkEle, \'search-results\', eachState, \'qstate=\'+eachState.state+\'&qcountry=\'+eachState.country)}" \n                                        data-ph-tevent-attr-trait59="location" \n                                        data-ph-tevent-attr-trait60="${eachState.name}" \n                                        data-option-title="${eachState.name}" \n                                        data-category="${eachState.name}">\n                                        <span innerhtml= "${(eachState.locationName ? eachState.locationName_html : eachState.stateCountry) | sanitizeHTML}"></span>\n                                        <span if.bind="eachState.isSuggested" class="suggested-location">   \n                                            <ppc-content key="literal-132"> . suggested location</ppc-content>\n                                        </span>\n                                        <span class="phs-jobs-count">${eachState.count}</span>\n                                    </a>\n                                </li>\n                                <li repeat.for="eachCountry of allSuggestions.locations.country " class="phsLocationsSuggested_${$index}">\n                                    <a ph-tevent="type_ahead_search" ref="linkEle"\n                                        id="phs-lia_3_${$index}" \n                                        href="${getUrl(linkEle, \'search-results\', eachCountry, \'qcountry=\'+eachCountry.name)}" \n                                        data-ph-tevent-attr-trait59="location" \n                                        data-ph-tevent-attr-trait60="${eachCountry.name}"\n                                        data-option-title="${eachCountry.name}"  \n                                        data-category="${eachCountry.name}"> \n                                        <span innerhtml= "${(eachCountry.locationName ? eachCountry.locationName_html : eachCountry.stateCountry) | sanitizeHTML}"></span>\n                                        <span if.bind="eachCountry.isSuggested" class="suggested-location">   \n                                            <ppc-content key="literal-132"> . suggested location</ppc-content>\n                                        </span>\n                                        <span class="phs-jobs-count">${eachCountry.count}</span>\n                                    </a>\n                                </li>\n                            </ul>\n                    \n                        </div>\n                        \x3c!--Jobs--\x3e\n                        <div class="phs-jobs-suggested" if.bind="allSuggestions.show.jobs">\n                            <h3><ppc-content key="literal-127">Jobs</ppc-content></h3>\n                            <ul class="phs-jobs-list">\n                                <li repeat.for="eachJob of allSuggestions.jobs">\n                                    <a ph-tevent="type_ahead_search" \n                                        id="phs-lia_0_${$index}" ref="linkEle" \n                                        href="${getUrl(linkEle, \'job\', eachJob)}" \n                                        data-ph-tevent-attr-trait59="jobId"\n                                        data-ph-tevent-attr-trait60="${eachJob.jobSeqNo}"\n                                        data-option-title="${eachJob.title}"  \n                                        data-title="${eachJob.title}"\n                                        data-jobid="${eachJob.id}">\n                                        <div class="phs-job-title">\n                                            <span class="sr-only">\n                                                <ppc-content key="literal-128">Job title</ppc-content>\n                                            </span>\n                                            <span innerhtml="${eachJob.title_html | sanitizeHTML}"></span>\n                                        </div>\n                                        \n                                        <div class="phs-job-info" if.bind="eachJob.location">\n                                            <span class="phs-job-location">\n                                                <span class="sr-only"><ppc-content key="literal-129">Location</ppc-content></span>\n                                                ${eachJob.location}\n                                            </span>\n                                            <span class="phs-job-category">\n                                                <span class="sr-only">\n                                                    <ppc-content key="literal-130">Category</ppc-content>\n                                                </span>\n                                                ${eachJob.category}\n                                            </span>\n                                        </div>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                        \x3c!--Category--\x3e\n                        <div class="phs-categorys-suggested" if.bind="allSuggestions.show.categories">\n                        \n                            <h3>\n                                <ppc-content key="literal-132">Category</ppc-content>\n                            </h3>\n                            <ul class="phs-categorys-suggested-list">\n                                <li repeat.for="eachCategory of allSuggestions.categories">\n                                    <a ph-tevent="type_ahead_search" id="phs-lia_0_${$index}"\n                                       ref="linkEle" \n                                       href="${getUrl(linkEle, \'category\', eachCategory)}" data-ph-tevent-attr-trait59="category"\n                                       data-ph-tevent-attr-trait60="${eachCategory.category}"\n                                       data-option-title="${eachCategory.category}" \n                                       data-category="${eachCategory.category}"> \n                                       ${eachCategory.category}\n                                        <span class="phs-jobs-count">${eachCategory.count}</span>\n                                        </a>\n                                </li>\n                            </ul>\n                        </div>\n                            \x3c!--Recent Searches--\x3e\n                        <div class="phs-recentsearches-suggested" if.bind="allSuggestions.show.searched">\n                            <h3>\n                                <ppc-content key="literal-133">Recent Searches</ppc-content>\n                            </h3>\n                            <ul class="search-recentsearchs-list">\n                                <li repeat.for="eachKeyword of allSuggestions.searched" show.bind="$index < 3">\n                                    <a ph-tevent="type_ahead_search" \n                                        id="phs-lia_4_${$index}" ref="linkEle" \n                                        data-ajax="false"\n                                        data-option-title="${eachKeyword}"  \n                                        click.delegate="updateLocalStrWithRecentSearchDetails(eachKeyword)"\n                                        href="${getUrl(linkEle, \'search-results\', {keyword: eachKeyword}, \'keywords=\'+eachKeyword)}"\n                                        data-ph-tevent-attr-trait59="recent_keyword" \n                                        data-ph-tevent-attr-trait60="${eachKeyword}">${eachKeyword}</a>\n                                </li>\n                            </ul>\n                        </div>\n                        \x3c!--Suggested Keywords--\x3e\n                        \x3c!--property name dependent on app changes expected locationName--\x3e\n                        <div class="phs-suggested-keywords-suggested" if.bind="allSuggestions.show.keywords && !allSuggestions.show.jobs" >\n                            <h3>\n                                <ppc-content key="literal-134">\n                                    Suggested keywords\n                                </ppc-content>\n                            </h3>\n                            <ul class="phs-suggested-keywords-list" click.delegate="handleSelection($event)">\n                                <li repeat.for="eachKeyword of allSuggestions.keywords" show.bind="$index < 3">\n                                    <a ph-tevent="type_ahead_search" \n                                        id="phs-lia_5_${$index}" \n                                        ref="linkEle" \n                                        data-ajax="false"\n                                        data-option-title="${eachKeyword}"  \n                                        click.delegate="updateLocalStrWithRecentSearchDetails(eachKeyword)"\n                                        href="${inlineSearch ? \'javascript:void(0)\' : getUrl(linkEle, \'search-results\', {keyword: eachKeyword}, \'keywords=\'+eachKeyword)}"\n                                        data-ph-tevent-attr-trait59="recent_keyword" \n                                        data-ph-tevent-attr-trait60="${eachKeyword}">${eachKeyword}</a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                <div class="phs-search-suggestions" if.bind="showDropDown && !showAllJobCategories">\n                    <div class="phs-keyword-suggestions">\n                       <ul class="phs-locations-suggested-list">\n                        <li> No data found</li>\n                    </div>\n                </div>\n            </div>\n            <span class="input-group-btn">\n                <button type="submit"\n                        submit.delegate="handleSubmitClick()" \n                        click.delegate="handleSubmitClick()" \n                        title="Find jobs"\n                        class="btn primary-button btn-lg phs-search-submit">\n                    <ppc-content type="icon"><i class="icon icon-search"></i></ppc-content>\n                    <span><ppc-content key="literal-135">Find jobs</ppc-content></span>\n                </button>\n             </span>\n        </div>\n    </div>\n</form>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-social-share-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobDetails",ddoKey2:"googleShortUrl",ddoKeyShareDetails:"getSocialSharingDetails",ddoShareOption:"jobsharewidgetsettings",ddoBaseUrls:"baseUrls"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share-service",["require","exports","aurelia-framework","ph-common","./ph-social-share-config"],function(e,t,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,o){this.commonService=e,this.WidgetConfig=t,this.serviceRequest=o}return e.prototype.getShortUrl=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e.googleShortUrl&&e.googleShortUrl.status&&"failed"==e.googleShortUrl.status?"#":encodeURIComponent(e.googleShortUrl.shortUrl)})},e.prototype.getSocialUrls=function(e,t,o,i){var r=this;if(this.jobDetails=t,"internal"!=this.commonService.getSiteType()){var n=this.commonService.getUrl("job",t);return n=this.removeLastCharIfExists(n,"/"),n+="/?",this.getShareUrl(e,"googleShortUrl",n,o).then(function(e){return e})}var s={jobSeqNo:t.jobSeqNo,jobId:t.jobId,medium:"social-share",campaign:"social",source:o.name};i&&(s.siteType=i);var l=a.WidgetConfig.v3.ddoKeyShareDetails;return this.commonService.getDDO(e,l,s).then(function(t){if(t&&t[l]&&t[l].status&&"SUCCESS"==t[l].status.toUpperCase()&&t[l].data&&t[l].data.jdUrl){var i=t[l].data.jdUrl;return i=r.removeLastCharIfExists(i,"/"),i+="/?",t[l].data.referrerToken&&(i+="referrerToken="+t[l].data.referrerToken+"&"),r.getShareUrl(e,"googleShortUrl",i,o).then(function(e){return e})}return console.info("Error getting url"),"#"})},e.prototype.getShareUrl=function(e,t,o,i){var a=this;o+="utm_source="+i.name+"&utm_campaign=job-share&utm_medium=social-share";var r={url:o};return"whatsapp"!=i.name?this.getShortUrl(e,t,r).then(function(e){return a.updateReqParamsToUrl(i,e)}):new Promise(function(e,t){e(a.updateReqParamsToUrl(i,a.shareInfoText+" "+o))})},e.prototype.updateReqParamsToUrl=function(e,t){var o=""+e.baseUrl+t;if(e.settings.params){var i=e.settings.params;i.hasOwnProperty("media")&&(this.tagValue=this.getTagValue());for(var a in i)i.hasOwnProperty(a)&&(o+="&"+a+"="+this[i[a]]);return o}return o},e.prototype.removeLastCharIfExists=function(e,t){return e.length&&e[e.length-1]==t&&(e=e.substring(0,e.length-1)),e},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e?e[t]:{}})},e.prototype.getTagValue=function(){return document.querySelector("meta[property='og:image']").content},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object,Object,"function"==typeof(r=void 0!==i.ServiceRequest&&i.ServiceRequest)&&r||Object])],e);var t,r}();t.SocialShareService=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-social-share",["require","exports","aurelia-framework","ph-common","./ph-social-share-config","./ph-social-share-service","aurelia-event-aggregator"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-social-share-v3",l=function(e){function t(t,o,i,a){var r=e.call(this,t,o,s)||this;return r.commonService=o,r.socialShareService=i,r.eventAggregator=a,r.currentJobObj={},r.showMailTo=!1,r.isErrorMsgReqd=!1,r.isShareIcon=!0,r.isPopup=!1,r.showTitle=!0,r.detailObj={},r.loadingText="Loading ...",r.replaceJobSeqNo=!1,r.shareObj={},r.showErrorMsg=!1,r.sociaurl=[],r.showEmailView=!1,r.shareInfoText="Interesting Job Posting at {{category}}, {{location}}, {{title}}",r.isEmailClientEnabled=!1,r}return __extends(t,e),t.prototype.attached=function(){if(e.prototype.hideLoader.call(this),e.prototype.attached.call(this),this.fetchJobObj(),"e"==e.prototype.getQueryParam.call(this,"vt")&&(this.siteType="external"),this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.configureShare(),this.showMailTo){var t=encodeURIComponent(window.location.href);this.strMailtoProto="mailto:?subject=Check out this job!&body=Hi,%0A%0AI noticed a Job Opportunity at "+t+"%0A%0A"}},t.prototype.created=function(){var t=this;this.eventAggregator.subscribe("updateJob",function(o){(!t.jobSeqNo||o.jobSeqNo&&t.jobSeqNo!=o.jobSeqNo)&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo&&(o.jobSeqNo=o.jobId),t.currentJobObj=o,t.jobSeqNo=t.currentJobObj.jobSeqNo,t.category=t.currentJobObj.category)})},t.prototype.fetchJobObj=function(){Object.keys(this.detailObj)&&Object.keys(this.detailObj).length?this.currentJobObj=this.detailObj:this.currentJobObj=this.commonService.getCachedDDO("jobDetail"),this.currentJobObj&&this.currentJobObj.data&&(this.currentJobObj=this.currentJobObj.data.job,this.currentJobObj&&(this.jobSeqNo=this.currentJobObj.jobSeqNo,this.category=this.currentJobObj.category))},t.prototype.configureShare=function(){var t=this;try{this.shareOption=this.shareOption?JSON.parse(this.shareOption):{};var o=!0;this.shareOption&&this.shareOption.options&&this.shareOption.options.length||(o=!1,this.socialShareService.makeDDORequest(s,a.WidgetConfig.v3.ddoShareOption,{}).then(function(o){e.prototype.hideLoader.call(t),o&&o.data?(t.shareOption=o.data||{},t.shareOption.options=t.shareOption.options||[]):t.shareOption.options=[],t.checkEmailExists()},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})),o&&this.checkEmailExists()}catch(e){}},t.prototype.checkEmailExists=function(){this.isShareEmailFound=this.shareOption.options.findIndex(function(e){return"email"==e.name}),this.isShareEmailFound=-1!=this.isShareEmailFound},t.prototype.closeShareJob=function(e,t){var o=this;t?this.isShareIcon=!0:(event,this.shareTimer&&clearTimeout(this.shareTimer),this.shareTimer=setTimeout(function(){o.isShareIcon=!1},300))},t.prototype.handlePopup=function(t){var o=this;this.widgetBundle.shareInfoText&&(this.shareInfoText=this.widgetBundle.shareInfoText),this.shareInfoText=this.shareInfoText.replace("{{categoryName}}","{{category}}"),this.socialShareService.shareInfoText=this.commonService.getTranslation(this.shareInfoText,this.currentJobObj,!0),e.prototype.unhideLoader.call(this);var i={},a={};if(i.trait5=this.jobSeqNo,i.trait14=this.category,t.eventName&&this.commonService.processTrackingEvent(t.eventName,void 0,i),"email"==t.name)if(this.isEmailClientEnabled)this.handleEmailClientOrJob();else{this.showEmailView=!this.showEmailView,i.params={toggle:this.showEmailView};var r=document.querySelector('[as-element^="ph-email-job"]');if(r){if(this.commonService.smoothScroll){var n=window.pageYOffset,l=this.commonService.getNearestSectionElemOffsetTop(r);n<l?this.commonService.smoothScroll(n,l,!0,30):this.commonService.smoothScroll(n,l,!1,30)}else r.scrollIntoView(!1);if(r.au&&r.au.controller&&r.au.controller.viewModel&&!r.au.controller.viewModel.isPopupReqd){var c=r.au.controller.viewModel,d=c.element.querySelector(".ph-a11y-email-job-heading");d&&d.focus()}}this.showEmailView&&e.prototype.raiseEvent.call(this,"show-email-job",{})}else a=window.open("","",t.settings.popUpParams);"email"!=t.name&&(a.document.body.innerHTML=this.loadingText,this.socialShareService.getSocialUrls(s,this.currentJobObj,t,this.siteType).then(function(t){e.prototype.hideLoader.call(o),a.location.href=t},function(t){new Error(t),e.prototype.hideLoader.call(o),o.handleError("")}))},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{"google-plus":"google-plus",facebook:"facebook",linkedin:"linkedin",twitter:"twitter",email:"share via mail",xing:"xing",pinterest:"pinterest",vk:"vk",whatsapp:"whatsapp",weibo:"weibo"}},t.prototype.handleEmailClientOrJob=function(){var t=this.widgetBundle.emailClientBody||"Check out this job:";try{t=decodeURIComponent(t)}catch(e){i.logger.error(e)}var o=this.widgetBundle.emailClientSubject||"{{title}} at {{companyName}}",a=this.commonService.getTranslation(o,this.currentJobObj),r=this.commonService.getTranslation(t,this.currentJobObj),n=e.prototype.getUrl.call(this,"","job",this.currentJobObj);n&&n.length&&(n=n.replace("/i/","/")),window.location.href="mailto:?subject="+encodeURIComponent(a)+"&body="+encodeURIComponent(r)+n},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"currentJobObj",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showMailTo",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"shareOption",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isShareIcon",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isPopup",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showTitle",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"detailObj",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"loadingText",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,r.SocialShareService,n.EventAggregator])],t);var l}(i.PhenomWidget);t.SocialShare=l}),define("text!v3/ph-social-share.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-social-share-v3/default/view.html",["module"],function(e){e.exports='<template>\n<div class="phs-share-job-area ph-widget-box" role="region" key-role="regionRole" aria-label="Social share" key-aria-label="socialShare">\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n    <div class="widget-container">\n        <div class="phs-widget-heading">\n            <h2>\n                <ppc-content key="socialShareHeading" data-ph-at-id="heading-text">Share this Opportunity</ppc-content>\n            </h2>\n        </div>\n        <div class="content-block">\n            <ul data-ph-at-id="share-options-list">\n               \n                <li repeat.for="eachIndicator of shareOption">\n                    <a class="${eachIndicator}" click.trigger="handlePopup(eachIndicator)" aria-label="Share via ${eachIndicator}" key-aria-label="share${eachIndicator}"\n                        href="javascript:void(0)" data-ph-at-id="share-${eachIndicator}-link" title="Share via ${eachIndicator}"  \n                        key-title="share${eachIndicator}Title" target="_blank" blur.trigger="closeShareJob($event, true)">\n                        <i class="icon icon-${eachIndicator}"></i> ${widgetBundle[eachIndicator] | pht}\n                        <span class="sr-only">\n                            <ppc-content key="share${eachIndicator}Text" data-ph-at-id="share-${eachIndicator}s-text">  ${widgetBundle[eachIndicator] | pht}</ppc-content>\n                        </span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-cookie-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"cookiePopup"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CookiePopupService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-cookie-popup-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-cookie-popup-v2",s="top",l='[as-element^="ph-cookie-popup"] .ph-sticky-header',c={top:"cookie-popup-top",
bottom:"cookie-popup-bottom"},d=function(e){function t(t,o,i,a,r,l){var c=e.call(this,t,o,n)||this;return c.element=t,c.commonService=o,c.cookiePopupService=i,c.cookieManager=a,c.eventAggregator=r,c.localStorageContext=l,c.doNotHide=!1,c.showCookiePopup=!0,c.cookieValue="",c.position=s,c.isAccepted=!0,c.cookieType="",c.cookieWindowType="default",c.subscriptions=[],c}return __extends(t,e),t.prototype.created=function(){var e=this,t=this.commonService.getSiteSettings("cookiePopup");t&&t.position&&(this.position=t.position),this.subscriptions.push(this.eventAggregator.subscribe("close_cvd_popup",function(){e.setCookieBodyHeight()}))},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this);var o=this.commonService.getSiteSettings("gdpr");this.cookieType=o?o.cookieType:"",this.cookieWindowType=o&&o.cookieWindowType||"default",this.cookieValue=this.cookieManager.get("PHPPPE_GCC"),this.showCookiePopup="s"==this.cookieValue||!1,this.cookieValue?(("tentative"==this.cookieType&&"u"==this.cookieValue||"sticky"==this.cookieType&&"s"==this.cookieValue)&&(this.handleCookieArea(),this.doNotHide&&(this.cookieValue="d","tentative"==this.cookieType?this.setGdprCookie(!0):this.setGdprCookie(!1),this.setCookie(),this.commonService.removeRecomContentFromLocalStorage())),this.isAccepted="a"==this.cookieValue,this.raiseGdprActionEvent(),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)):setTimeout(function(){t.showCookiePopup=!0,t.handleCookieArea()},10),this.subscriptions.push(this.eventAggregator.subscribe("close_cookie_popup",function(e){t.doNotHide||(t.showCookiePopup=!1,t.setCookieAction(!1)),t.isAccepted=!(!e||!e.cookieValue||"a"!=e.cookieValue)}))},t.prototype.handleCookieArea=function(){var e=this,t=this.commonService.getSiteSettings("gdpr");this.doNotHide||this.toggleBodyClass(),t&&t.hasOwnProperty("cookieType")&&!this.cookieValue&&this.setGdprCookie(!0),setTimeout(function(){e.setCookieBodyHeight()},0),window.addEventListener("resize",function(){e.setCookieBodyHeight()}),this.addModalPopup()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.setCookieBodyHeight=function(){var e=this;if(this.showCookiePopup){for(var t=document.querySelector(".ph-header"),o=document.querySelector("body"),i=document.querySelector(l),a=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),r=document.querySelector('[as-element*="header"] .ph-sticky-header');t&&i;)if(t&&t.firstElementChild&&window.getComputedStyle(t).position,!(t=t.firstElementChild)){var n=a&&a.offsetHeight||0;o.style.paddingTop=n+(i&&i.offsetHeight)+"px",i&&(i.style.top=n+"px"),r&&(r.style.top=n+(i&&i.offsetHeight)+"px"),r&&setTimeout(function(){e.setCookieBodyHeight()},5e3)}}else window.removeEventListener("resize",function(){e.setCookieBodyHeight()})},t.prototype.addModalPopup=function(){var t=this;this.element.querySelector(".ph-a11y-modal-area")&&setTimeout(function(){var o=t.element.querySelector(".ph-a11y-popup-start-focus");t.closePopupCallback(o,"ph-a11y-modal-area"),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area",document.body,o)},0)},t.prototype.closePopupCallback=function(t,o){var i=this;document.addEventListener("keyup",function(t){"Escape"!=t.key&&27!==t.keyCode&&27!==t.which||e.prototype.closeDialogPopup.call(i)})},t.prototype.removeCookieBodyHeight=function(){var e=document.querySelector("body"),t=document.querySelector(l),o=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),i=document.querySelector('[as-element*="header"] .ph-sticky-header');if(o&&t.offsetHeight){var a=e.style.paddingTop;a=parseInt(a)-t.offsetHeight+"px",e.style.paddingTop=a,o.style.top="0px",i&&(i.style.top=e.style.paddingTop)}else e.style.removeProperty("padding-top"),i&&(i.style.top="0px")},t.prototype.setCookie=function(){var e=new Date;e.setTime(e.getTime()+7776e6);var t={expires:e,path:"/"};this.cookieManager.set("PHPPPE_GCC",this.cookieValue,t)},t.prototype.setGdprCookie=function(e){var t=!!this.cookieValue;e?"tentative"==this.cookieType?this.cookieValue?this.cookieValue="a":this.doNotHide?(this.cookieValue="d",this.isAccepted=!1,this.commonService.removeRecomContentFromLocalStorage()):this.cookieValue="u":"sticky"!=this.cookieType||t?this.cookieValue="a":this.cookieValue="s":this.cookieValue="d",this.setCookie(),(!e||t&&"u"!=this.cookieValue)&&this.eventAggregator.publish("close_cookie_popup",{cookieValue:this.cookieValue}),e&&"s"!=this.cookieValue||this.commonService.removeRecomContentFromLocalStorage();var o={},i=e?"cookies_allow_click":"cookies_decline_click";this.commonService.processTrackingEvent(i,void 0,o),this.raiseGdprActionEvent()},t.prototype.acceptAndClose=function(){this.setGdprCookie(!0),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.declineAndClose=function(){this.setGdprCookie(!1),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed")},t.prototype.raiseGdprActionEvent=function(){"d"==this.cookieValue?this.raiseActionEvent("ph:gdpr:cookie:declined"):"a"==this.cookieValue&&this.raiseActionEvent("ph:gdpr:cookie:accepted")},t.prototype.raiseActionEvent=function(e){var t=new CustomEvent(e,{bubbles:!0,detail:{}});document.dispatchEvent(t)},t.prototype.setCookieAction=function(t){this.toggleBodyClass(),this.removeCookieBodyHeight(),e.prototype.hideContainer.call(this)},t.prototype.toggleBodyClass=function(){var e=this.showCookiePopup,t=document.querySelector("body");t&&(e?t.classList.contains(c[this.position])||(t.className=t.className+" "+c[this.position]):t.className=t.className.replace(c[this.position],""))},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"doNotHide",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(d=void 0!==i.CommonService&&i.CommonService)&&d||Object,r.CookiePopupService,"function"==typeof(p=void 0!==i.CookieManager&&i.CookieManager)&&p||Object,a.EventAggregator,"function"==typeof(h=void 0!==i.LocalStorageContext&&i.LocalStorageContext)&&h||Object])],t);var d,p,h}(i.PhenomWidget);t.CookiePopup=d}),define("text!v2/ph-cookie-popup.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v2/views/ph-cookie-popup-v2/default/view.html",["module"],function(e){e.exports='<template>\n    <div class="phs-cookie-popup ph-widget-box" show.bind="showCookiePopup">\n      <div class="phs-cookie-msg ph-html">\n        <p>\n          <ppc-content>\n            This site uses cookies to provide you with a more responsive and personalised service. By using this site you agree to our use of cookies. Please read our\n          </ppc-content>\n          <ppc-content type="link">\n            <a href="https://www.accenture.com/gb-en/privacy-policy.aspx" class="ph-link-url" target="_blank">\n              <span class="ph-link-text">cookie notice</span>\n            </a>\n          </ppc-content>\n          <ppc-content>\n            &nbsp;for more information on the cookies we use and how to delete or block them.&nbsp;\n          </ppc-content>\n        </p>\n      </div>\n      <div class="phs-accept-btn">\n        <ppc-content type="link">\n          <a class="phs-cookie-accept" id="phs-cookieaccept" role="button" class="ph-link-url" click.trigger = "acceptAndClose()">\n            <ppc-content type="icon">\n              <i class="fa fa-check-square-o"></i>\n            </ppc-content>\n            <span class="ph-link-text">Accept</span>\n          </a>\n        </ppc-content>\n      </div>\n      <div class="phs-accept-btn">\n                      \n              \n        <ppc-content type="link">\n          <a class="phs-cookie-accept" id="phs-cookiedecline" role="button" class="ph-link-url" click.trigger = "showImplicationAlert=!showImplicationAlert">\n            <ppc-content type="icon">\n              <i class="fa fa-check-square-o"></i>\n            </ppc-content>\n            <span class="ph-link-text">Decline</span>\n          </a>\n        </ppc-content>\n      </div>\n    </div>\n    <span show.bind="showImplicationAlert == true" click.trigger=\'hideCookiePopup()\'> kkkk${implicationAlert}</span>\n  </template>\n  '}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!0,testing:!0}}),define("v3/ph-job-cart-count-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobCartCountV2"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-job-cart-count-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.jobCartCount=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.JobCartCountService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-job-cart-count",["require","exports","aurelia-framework","ph-common","./ph-job-cart-count-config","./ph-job-cart-count-service","aurelia-event-aggregator"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v3",l="ph-job-cart-count-"+s,c=function(e){function t(t,o,i,r){var n=e.call(this,t,o,l)||this;return n.eventAggregator=i,n.jobCartCountService=r,n.jobCartCount=0,n.getJobCartCount=function(){n.jobCartCountService.jobCartCount(l,a.WidgetConfig[s].ddoKey,{}).then(function(e){n.jobCartCount=e.result})},n.updatedJobCartCount=function(){n.eventAggregator.subscribe("jobCartUpdatedCount",function(e){n.getJobCartCount()})},n}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.getJobCartCount(),this.updatedJobCartCount()},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==i.CommonService&&i.CommonService)&&c||Object,n.EventAggregator,r.JobCartCountService])],t);var c}(i.PhenomWidget);t.JobCartCount=c}),define("text!v3/ph-job-cart-count.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-job-cart-count-v3/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-facets-service",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common"],function(e,t,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.commonService=e,this.eventAggregator=t,this.isImSearch=!1}return e.prototype.getSearchData=function(e,t,o,i,a,r,n,s){return void 0===o&&(o=[]),void 0===i&&(i={}),__awaiter(this,void 0,void 0,function(){var l,c,d,p=this;return __generator(this,function(h){switch(h.label){case 0:return l=JSON.parse(JSON.stringify(i)),c="eagerLoadRefineSearch",l.keywords=r?encodeURIComponent(r):"",l.global=!0,l.size=l.size||50,l.all_fields=l.all_fields||["city","state","category","type","orgFunction","country"],l.selected_fields=l.selected_fields||{},o.forEach(function(e){l.selected_fields[e.facet]||(l.selected_fields[e.facet]=[]),-1==l.selected_fields[e.facet].indexOf(e.name)&&l.selected_fields[e.facet].push(e.name)}),l.sortBy&&"Most recent"==l.sortBy?(l.sort={},l.sort.order="desc",l.sort.field="postedDate"):l.sortBy&&"Most popular"==l.sortBy?(l.sort={},l.sort.order="desc",l.sort.field="mostpopular"):l.sortBy&&"Most relevant"==l.sortBy&&(l.sortBy=""),l.subsearch&&(l.subsearch=encodeURIComponent(l.subsearch)||""),n&&(l.pageIdentifier=n),s&&(l.locationData=s),l.rk&&(l.rkstatus=!0),a||this.commonService.clearDDO(c),this.isImSearch=this.commonService.getSiteSettings("isUseDefaultSearchForIm"),l.siteType&&"internal"==l.siteType?(t="refineSearchIM",[4,this.getImconfigurations(e,"getIMConfigurations")]):[3,2];case 1:d=h.sent(),d&&d.imTenant&&(l.isInternal=d.imTenant),this.isImSearch?l.isInternal=!1:l.isInternal=!0,h.label=2;case 2:return this.eventAggregator.publish("searchInitiated",l),[2,new Promise(function(o,i){var a=p.commonService.getCachedDDO(c,e);if(l.siteType&&"internal"==l.siteType&&l.isInternal)t="refineSearchIM",p.commonService.getDDO(e,"refineSearchIM",l).then(function(t){if(t.refineSearch.data&&!t.refineSearch.data.ui_selections&&(t.refineSearch.data.ui_selections={}),t.refineSearch.data&&t.refineSearch.data.ui_selections){if(l.selected_fields&&!l.selected_fields.visibilityType&&t.refineSearch.data.ui_selections.visibilityType&&t.refineSearch.data.ui_selections.visibilityType.length,t.refineSearch.data.ui_selections.visibilityType&&t.refineSearch.data.ui_selections.visibilityType.length){var i=t.refineSearch.data.ui_selections.visibilityType.findIndex(function(e){return"internal/external"==e.toLocaleLowerCase()||"external/internal"==e.toLocaleLowerCase()});-1!=i&&t.refineSearch.data.ui_selections.visibilityType.splice(i,1),l.imVariantsLength&&l.imVariantsLength<2&&(t.refineSearch.data.ui_selections.visibilityType=[])}t.refineSearch.selected_fields=t.refineSearch.data.ui_selections||l.selected_fields,l.selected_fields=t.refineSearch.selected_fields,o(t)}else p.eventAggregator.publish(p.commonService.getErrorChannel(e),{})});else if(a&&a.data&&a.data.jobs){var r={refineSearch:a};r.refineSearch.data&&r.refineSearch.data.ui_selections?(r.refineSearch.selected_fields=r.refineSearch.data.ui_selections,l.selected_fields=r.refineSearch.selected_fields):r.refineSearch.selected_fields=l.selected_fields,p.commonService.getDDO(e,"eagerLoadRefineSearchSession",l),o(r)}else l.isSliderEnable?(l.s="1",p.commonService.getDDO(e,c,l).then(function(t){t&&t.eagerLoadRefineSearch?(t={refineSearch:t.eagerLoadRefineSearch},t.refineSearch.data&&t.refineSearch.data.ui_selections?(t.refineSearch.selected_fields=t.refineSearch.data.ui_selections,l.selected_fields=t.refineSearch.selected_fields):t.refineSearch.selected_fields=l.selected_fields,o(t)):p.eventAggregator.publish(p.commonService.getErrorChannel(e),{}),p.commonService.getDDO(e,"eagerLoadRefineSearchSession",l)})):l.rk||l.ak?(l.s="1",p.commonService.getDDO(e,c,l).then(function(t){t&&t.eagerLoadRefineSearch?(t={refineSearch:t.eagerLoadRefineSearch},t.refineSearch.data&&t.refineSearch.data.ui_selections?(t.refineSearch.selected_fields=t.refineSearch.data.ui_selections,l.selected_fields=t.refineSearch.selected_fields):t.refineSearch.selected_fields=l.selected_fields,o(t)):p.eventAggregator.publish(p.commonService.getErrorChannel(e),{}),p.commonService.getDDO(e,"eagerLoadRefineSearchSession",l)})):(p.commonService.getDDO(e,"eagerLoadRefineSearchSession",l),p.commonService.getDDO(e,t,l).then(function(t){t&&t.refineSearch?(t.refineSearch.selected_fields=t.refineSearch.ui_selections||l.selected_fields,o(t)):p.eventAggregator.publish(p.commonService.getErrorChannel(e),{})}))})]}})})},e.prototype.getLocations=function(e,t,o){if(o){var i={};return i.keywords=o,this.commonService.getDDO(e,t,i).then(function(e){return e[t]})}},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getImconfigurations=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]&&e[t].data?e[t].data:e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==a.CommonService&&a.CommonService)&&t||Object,i.EventAggregator])],e);var t}();t.FacetsService=r}),define("v1/field-glocation-handler",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="glocations",i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},a=function(){function e(e,t,i,a,r,n){this.fields={},this.fieldType=o,this.activeIndex=-1,this.elementTag=e,this.element=r,this.fields=t,this.facetsService=i,this.a11yAutoComplete=a,this.facetContext=n}return e.prototype.onFocus=function(e){this.fields.glocations&&this.fields.glocations.value&&this.fields.glocations.results&&this.fields.glocations.results.length&&(this.fields.glocations.showListBox=!0,this.activeIndex=-1)},e.prototype.onKeyup=function(e){var t=e.target;if(t&&this.fields[o]){switch(e.which||e.keyCode){case i.UP:case i.DOWN:case i.RETURN:case i.ESC:return void e.preventDefault()}var a=t.value;a&&a.length?this.fetchGLocations():this.fields.glocations.showListBox=!1}},e.prototype.onPaste=function(e){var t=e.target,o=t.value;o&&o.length?this.fetchGLocations():this.fields.glocations.showListBox=!1},e.prototype.autoFillValue=function(e,t,i){var a=this.fields[this.fieldType].results;this.fields[this.fieldType].showListBox&&a.length&&((this.fields[o].autoSuggestCompleteOnkeyUp||i)&&(this.fields[this.fieldType].value=a[this.fields[this.fieldType].activeIndex].key,this.facetContext.setLocation(a[this.fields[this.fieldType].activeIndex])),i&&(this.fields[this.fieldType].results=[a[this.fields[this.fieldType].activeIndex]]),this.fields[this.fieldType].showListBox=t)},e.prototype.onEnter=function(e){-1!=this.activeIndex&&this.autoFillValue(e,!1,!0)},e.prototype.onKeydown=function(e){var t=e.target;if(t&&this.fields[o])switch(e.which||e.keyCode){case i.DOWN:this.moveDown(t);break;case i.UP:this.moveUp(t);break;case i.RETURN:return void this.onEnter(t)}},e.prototype.moveDown=function(e){if(this.fields[this.fieldType].showListBox){var t=this.fields[this.fieldType].results;t.length&&(++this.activeIndex,this.fields[this.fieldType].activeIndex>-1&&(t[this.fields[this.fieldType].activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0),this.a11yAutoComplete&&this.a11yAutoComplete.moveDown&&(this.a11yAutoComplete.moveDown(this.fields,e,this.fieldType,t,this.activeIndex,this.element),this.autoFillValue(e,!0)))}},e.prototype.moveUp=function(e){if(this.fields[this.fieldType].showListBox){var t=this.fields[this.fieldType].results;t.length&&(--this.activeIndex,this.fields[this.fieldType].activeIndex>-1&&(t[this.fields[this.fieldType].activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0),this.a11yAutoComplete&&this.a11yAutoComplete.moveDown&&(this.a11yAutoComplete.moveDown(this.fields,e,this.fieldType,t,this.activeIndex,this.element),this.autoFillValue(e,!0)))}},e.prototype.fetchGLocations=function(){var e=this;if(this.fields.glocations.results=[],this.fields.glocations.value.length){this.activeIndex=-1,this.fieldType=o;var t={};t.locationValue=this.fields.glocations.value;var i=this.fields.glocations.value;this.fields.condition&&this.fields.condition.length&&(t.condition=this.fields.condition),this.facetsService.getLocations(this.elementTag,this.fields.glocations.ddoKey,i).then(function(t){e.fields.glocations.results=t.predictions,e.fields.glocations.results&&e.fields.glocations.results.length&&(e.fields.glocations.showListBox=!0)},function(e){new Error(e)})}},e}();t.GLocationHandler=a}),define("v1/ph-facets-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"refineSearch",ddoPlaceAutoComplete:"placeAutoComplete",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatus:"getJobStatus",ddoKeyStatusList:"getJobStatusListV2",ddoKeyEagerLoad:"eagerLoadRefineSearch",ddokeyRefineSearchIM:"refineSearchIM",imVariantsConfigInfo:"imVariantsConfigInfo"},fields:{locations:{field:"locations",ddoKey:"locations",autoSuggestOnfocus:!0,autoSuggestCompleteOnkeyUp:!0,autoPopulateOnBlur:!0,autoSuggestOnfocusDdoKey:"",results:[],showListBox:!1,activeIndex:-1},glocations:{field:"glocations",ddoKey:"placeAutoComplete",autoSuggestOnfocus:!1,autoSuggestCompleteOnkeyUp:!1,autoSuggestOnfocusDdoKey:"",results:[],showListBox:!1,activeIndex:-1}},modeConfig:{"facet-locations":{fields:["glocations"]}}}});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-facets",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-facets-config","./ph-facets-service","./field-glocation-handler"],function(e,t,o,i,a,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="ph-facets-v1",c="eager",d=5,p="3",h=function(e){function t(t,o,i,r,n,s,d,h){var u=e.call(this,t,o,l)||this;return u.element=t,u.commonService=o,u.facetsService=i,u.localStorage=r,u.cookieManager=n,u.a11yAutoComplete=s,u.geoLocationService=d,u.eventAggregator=h,u.searchParams={sortBy:"",subsearch:"",from:0},u.searchFacets={},u.searchFacetKeys=[],u.searchSelections={},u.searchSelectionKeys=[],u.tempSearchSelectionKeys=[],u.jobResults=[],u.tempJobResultsForLazyLoad=[],u.triggerSpellCheck=!0,u.spellCheckObject={},u.searchConfigData={},u.pageResults=[],u.pages=1,u.pageSize=10,u.paginationBlockSize=10,u.paginationRange=[],u.totalJobs=0,u.filteredTotalJobs=0,u.currentSelectedPage=1,u.startingJobNumberInPage=1,u.endingJobNumberInpage=1,u.prevButtonVisibility=!0,u.nextButtonVisibility=!0,u.jobsViewed=[],u.jobsViewedFlag=!0,u.firstTime=!1,u.allResults=!1,u.isAccessbility=!1,u.showErrorMsg=!1,u.bulkcart=!1,u.clickTojd=!1,u.loadType=c,u.facetsToEnable=[],u.facetDisplayNames={},u.facetPlaceholderNames={},u.defaultFacetsToOpen=[],u.openFacets=[],u.personalizedData=[],u.showMultiLocationInlineView=!1,u.locationSliderFacet=!1,u.sliderRadius=305,u.placeVal="",u.showLocationDropdown=!0,u.locationSliderMode=!1,u.locationRangeEnd=300,u.locationSliderFacetMaxRange=300,u.locationSliderFacetUnbounded=!0,u.aboveMaxRadius=!0,u.location="",u.workLocation="",u.enableLocationSlider=!0,u.subscriptions=[],u.selectedSkill=[],u.skills=[],u.bodyClass="",u.clearResults="",u.sort="",u.onlyCounts=0,u.isCritical=!1,u.clearAll=!1,u.facetSelectionCounts={},u.lastSelection={},u.inputFields={},u.fieldsEnabled=[],u.fields={},u.noResults=!1,u.resultsUpdated=!1,u.resultsDisplayMode="",u.handleFieldFocus=function(e){var t=e.target;if(t){var o=u.getFieldName(t),i=u.getFieldHandler(o);i&&i.onFocus&&i.onFocus(e),u.resetFieldListBox(o),u.autoPopulateOnBlur(o),u.setActiveField(o)}},u.locationBlur=function(e){var t=e.target;if(t){var o=u.getFieldName(t);setTimeout(function(){u.fields[o].showListBox=!1},250)}},u.handleKeyup=function(e){var t=e.target;if(t){var o=u.getFieldName(t),i=u.getFieldHandler(o);i&&i.onKeyup&&i.onKeyup(e),27==e.which&&u.resetFieldListBox()}},u.handleKeydown=function(e){var t=e.target;if(t){var o=u.getFieldName(t),i=u.getFieldHandler(o);i&&i.onKeydown&&i.onKeydown(e)}},u.handlepaste=function(e){var t=e.target;if(t){var o=u.getFieldName(t),i=u.getFieldHandler(o);i&&i.onPaste&&setTimeout(function(){i.onPaste(e)},0)}},u.addJobContext=function(){u.commonService.addJobContext(l,u.jobResults),u.commonService.jobContext(l)},u.getDataCount=function(){return u.totalJobs?u.totalJobs:0},u.widgetViewType=e.prototype.getQueryParam.call(u,"m"),u.searchKeyword=e.prototype.getSearchKeyword.call(u),u.queryCity=e.prototype.getQueryParam.call(u,"qcity"),u.queryState=e.prototype.getQueryParam.call(u,"qstate"),u.queryCountry=e.prototype.getQueryParam.call(u,"qcountry"),u.placeId=e.prototype.getQueryParam.call(u,"p"),u.locationKey=e.prototype.getQueryParam.call(u,"lk"),u.category=decodeURIComponent(e.prototype.getQueryParam.call(u,"c")||e.prototype.getQueryParam.call(u,"category")||""),u.subCategory=e.prototype.getQueryParam.call(u,"subCategory"),u.workLocation=e.prototype.getQueryParam.call(u,"workLocation"),u.latitude=e.prototype.getQueryParam.call(u,"latitude"),u.longitude=e.prototype.getQueryParam.call(u,"longitude"),u.rk=e.prototype.getQueryParam.call(u,"rk")||u.commonService.getSessionParam("rk"),u.ak=e.prototype.getQueryParam.call(u,"ak")||u.commonService.getSessionParam("ak"),u.sort=decodeURIComponent(e.prototype.getQueryParam.call(u,"sortBy")||""),u.triggerSpellCheck=e.prototype.getQueryParam.call(u,"triggerSpellCheck"),u.fields.glocations={},u.fields.glocations.value="",u.widgetViewType==p?u.location=decodeURIComponent(e.prototype.getQueryParam.call(u,"location")||""):u.placeId&&u.placeId.trim().length?(u.locationSliderMode=!0,u.placeVal=decodeURIComponent(e.prototype.getQueryParam.call(u,"location")||""),u.fields.glocations.value=decodeURIComponent(e.prototype.getQueryParam.call(u,"location")||""),u.placeVal&&u.placeVal.trim().length&&(u.enableLocationSlider=!0)):u.city=decodeURIComponent(e.prototype.getQueryParam.call(u,"location")||""),u.eventAggregator.subscribe("GeoLocation",function(e){a.logger.debug("payload location ::"+e),u.locationLatLongs=e}),u.eventAggregator.subscribe("GeoLocationDetails",function(e){a.logger.debug("payload location ::"+e),u.locationLatLongs=e}),u.geoLocationService.askForLocation(),u}return __extends(t,e),t.prototype.fetchBodyClass=function(){return this.bodyClass=document.body.className,this.bodyClass},t.prototype.shouldAddSessionParams=function(){var t=!1;return"1"==e.prototype.getQueryParam.call(this,"s")&&(t=!0),t},t.prototype.hasLocationSliderFacet=function(){return-1!=this.facetsToEnable.indexOf("phLocSlider")},t.prototype.created=function(){this.populateSelectedFields(),this.localStorage.removeItem("sbts"),this.localStorage.getItem("jobsViewed")||this.localStorage.setItem("jobsViewed",[]);var e=this.commonService.getSiteSettings("refineSearch");e&&e.enabledFacets&&(this.facetsToEnable=e.enabledFacets,this.facetDisplayNames=e.facetDisplayNames,this.facetPlaceholderNames=e.facetPlaceholderNames,this.defaultFacetsToOpen=e.defaultFacetsToOpen),this.hasLocationSliderFacet()&&(e&&e.facetConfig&&(this.locationRangeEnd=e.facetConfig.phLocSlider.locationRangeEnd,this.sliderRadius=e.facetConfig.phLocSlider.sliderRadius,this.locationSliderFacetMaxRange=this.locationRangeEnd,this.aboveMaxRadius=e.facetConfig.phLocSlider.aboveMaxRadius,d=e.facetConfig.phLocSlider.sliderDelta),this.locationSliderFacetUnbounded&&(this.locationRangeEnd=this.locationRangeEnd+d)),this.handleEventSubscriptions()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.handleEventSubscriptions=function(){var e=this
;this.subscriptions.push(this.eventAggregator.subscribe("ph:clearSelection",function(t){e.clearSelection(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:resetAll",function(t){e.emptySelectionsAndCallSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:subSearchReset",function(t){e.clearSubSearchAndCallSearch(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:subSearch",function(t){e.searchParams.subsearch=t.subsearch,e.filterSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:sortBy",function(t){e.searchParams.sortBy=t.sortBy,e.sortfilterSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:pullResults",function(t){e.raiseSearchResultsEvent()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:showfilter",function(t){e.facetFilter=t,e.showFacetFilter()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:showMore",function(t){e.showMoreResults(t)})),this.subscriptions.push(this.eventAggregator.subscribe("selectFields",function(t){e.saveFacetSelection()})),this.subscriptions.push(this.eventAggregator.subscribe("selectedSkillField",function(t){e.handleSelectedSkills(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:gotoPageEvent",function(t){e.gotoPage(t)}))},t.prototype.handleSelectedSkills=function(e){var t=!1;this.searchKeyword.split(",");for(var o=0;o<e.length;o++)this.searchKeyword.indexOf(e[o])>-1&&(t=!0),t||(this.searchKeyword+=","+e[o]),t=!1;this.selectedSkill=e,this.searchData(1,"")},t.prototype.saveFacetSelection=function(){var e={};e.selected_fields={},this.searchSelectionKeys.forEach(function(t){e.selected_fields[t.facet]||(e.selected_fields[t.facet]=[]),-1==e.selected_fields[t.facet].indexOf(t.name)&&e.selected_fields[t.facet].push(t.name)}),e.all_fields=this.facetsToEnable,e.facetDisplayNames=this.facetDisplayNames,e.keywords=this.searchKeyword,e.subsearch=this.searchParams.subsearch;var t=this.commonService.getSiteSettings("refineSearch"),o=t&&t.facetConfig&&t.facetConfig.phLocSlider,i=this.rk;o&&(e.phLocSlider=o),i&&(e.rk=i),this.placeId&&(e.placeId=this.placeId,e.sliderRadius=this.sliderRadius,e.placeVal=this.placeVal);var a=Object.keys(e.selected_fields||{});e.isSearchRefined=!!(a.length||e.keywords||a.subsearch),this.eventAggregator.publish("saveSelections",e)},t.prototype.populateSelectedFields=function(t){if(this.searchParams.sortBy=this.commonService.getSessionParam("sortBy")||"",this.shouldAddSessionParams()){t=t||{};var o=t.locationData||this.commonService.getSessionParam("locationData");t=t.selected_fields||this.commonService.getSessionParam("selected_fields");var i={city:"qcity",state:"qstate",country:"qcountry"};i=this.addExtraSelectionsFromUrl(i,"key");for(var a in i)i.hasOwnProperty(a)&&!this[a]&&this.commonService.getSessionParam(i[a])&&(this[a]=this.commonService.getSessionParam(i[a]),this.existsInSession(a,this[a]));if(t){t=this.parseJsonStringToObj(t);for(var r in t)if(t.hasOwnProperty(r))for(var n=t[r],s=0;s<n.length;s++)this.existsInSession(r,n[s])}if(o&&Object.keys(o).length){o=this.parseJsonStringToObj(this.commonService.getSessionParam("locationData"));for(var a in o)o.hasOwnProperty(a)&&(this[a]||"boolean"==typeof this[a]||(this[a]=o[a],"place_id"==a&&(this.placeId=o[a])));o.hasOwnProperty("sliderRadius")&&(this.sliderRadius=o.sliderRadius,this.aboveMaxRadius=o.aboveMaxRadius)}this.commonService.getSessionParam("subsearch")&&(this.searchParams.subsearch=decodeURIComponent(this.commonService.getSessionParam("subsearch"))||"");var l=e.prototype.getQueryParam.call(this,"from")||0;this.searchParams.from=parseInt(l),this.searchParams.from>0&&(this.currentSelectedPage=Math.ceil(this.searchParams.from/this.pageSize)+1)}},t.prototype.addExtraSelectionsFromUrl=function(t,o){for(var i,a,r=e.prototype.getQueryParamsMap.call(this),n=Object.keys(r),s=0;s<n.length;s++)n[s].startsWith("qk")&&(i=n[s].substr(2),a="key"==o?i:r[n[s]],t[i]=decodeURIComponent(a));return t},t.prototype.attached=function(){e.prototype.attached.call(this),this.pageName=this.commonService.getPageName(),this.pageType=this.commonService.getPageType(),this.clearResults=this.clearResults||this.commonService.getSiteSettings("clearResults"),this.clearResults||(this.clearResults="full"),this.categoryNameInput=this.categoryNameInput||this.category;var t={city:this.city||this.queryCity||"",state:this.queryState||"",country:this.queryCountry||"",category:this.categoryNameInput||"",subCategory:this.subCategory||"",workLocation:this.workLocation||""};t=this.addExtraSelectionsFromUrl(t,"val"),this.widgetViewType==p&&(t.location=this.location||"");var o=e.prototype.getQueryParam.call(this,"s_s");if(o&&(this.searchParams.subsearch=o),"1"!=e.prototype.getQueryParam.call(this,"s"))for(var i in t)t.hasOwnProperty(i)&&this.existsInSession(i,t[i]);this.populateSelectedFields(),this.landingPageKey&&this.landingPageType&&this.landingPageKey.trim().length>0&&this.landingPageType.trim().length>0&&(this.pageIdentifier={landingPageType:this.landingPageType,landingPageKey:this.landingPageKey});var a=this.commonService.getParam("sessionParams");if(!(this.sort||a&&a.hasOwnProperty("sortBy"))){var r=this.commonService.getSiteSettings("refineSearch");r&&r.sort&&("object"==typeof r.sort?this.sort="Most recent":this.sort=r.sort||"Most relevant")}!this.sort||a&&a.hasOwnProperty("sortBy")||(this.searchParams.sortBy=this.sort),0!=this.onlyCounts&&(this.showJobs="false",this.showCounts="false"),this.showJobs&&"false"==this.showJobs?this.searchParams.jobs=!1:this.searchParams.jobs=!0,this.showCounts&&"false"==this.showCounts?this.searchParams.counts=!1:this.searchParams.counts=!0,"internal"==this.commonService.getSiteType()?this.getimVariantsConfigInfo():this.searchData(this.currentSelectedPage,"",!0)},t.prototype.getimVariantsConfigInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,i,a;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.facetsService.makeDDORequest(l,r.WidgetConfig.v1.imVariantsConfigInfo,{})];case 1:return e=n.sent(),e.status&&"success"==e.status&&e.data&&e.data.values&&e.data.values.length&&-1!=(t=e.data.values.findIndex(function(e){return"jobs"==e.variant.toLowerCase()}))&&(o=e.data.values[t].types,i=void 0,o&&1==o.length&&(i="internal"==o[0]?"Internal":"External"),this.imVariantsLength=o&&o.length||0),this.searchData(this.currentSelectedPage,"",!0),[3,3];case 2:return a=n.sent(),console.log(a),[3,3];case 3:return[2]}})})},t.prototype.existsInSession=function(e,t){var o=!1;if(t.length>0){var i={facet:e,name:t};for(var a in this.searchSelectionKeys)if(this.searchSelectionKeys[a].facet==e&&this.searchSelectionKeys[a].name==t){o=!0;break}o||(this.searchSelectionKeys.push(i),this.updateFacetSelectionCounts(e))}},t.prototype.filterChanged=function(e,t){if(this.lastSelection={},this.lastSelection={facet:e,facetKey:t},e.checked){var o=this.commonService.getSiteSettings("refineSearch");if(o&&o.facetConfig){var i=o.facetConfig[t];if(i&&i.selectSingle)for(var a=0;a<this.searchSelectionKeys.length;a++)if(this.searchSelectionKeys[a].facet==t){this.searchSelectionKeys.splice(a,1),this.updateFacetSelectionCounts(t,{decrement:!0});break}}this.searchSelectionKeys.push(e),this.tempSearchSelectionKeys.push(e),this.updateFacetSelectionCounts(t)}else for(var r=e.name,a=0;a<this.searchSelectionKeys.length;a++)if(r==this.searchSelectionKeys[a].name&&this.searchSelectionKeys[a].facet==t){this.searchSelectionKeys.splice(a,1),this.updateFacetSelectionCounts(t,{decrement:!0});break}"accordion"==this.mode?this.openFacets[0]=e.facet:-1==this.openFacets.indexOf(e)&&this.openFacets.splice(this.openFacets.indexOf(e)),this.searchParams.from=0,this.searchData(1,e.facet);try{var n={};n.trait6=e.name,n.trait47=t||"",this.commonService.processTrackingEvent("refiner_search",void 0,n)}catch(e){}},t.prototype.filterSearch=function(e){this.searchData(1,""),this.focusSliderHandle(!1,!0);var t={};t.trait6=e||this.searchParams.subsearch,this.commonService.processTrackingEvent("results_search",void 0,t)},t.prototype.sortfilterSearch=function(){this.searchData(1,"");var e={};e.trait61=this.searchParams.sortBy,this.commonService.processTrackingEvent("sort_by_click",void 0,e)},t.prototype.emptySearchData=function(){this.searchFacetKeys=[],this.searchFacets={},this.pageResults=[],this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0}),this.searchParams.from=0},t.prototype.emptySelectionsAndCallSearch=function(){a.logger.debug("Request received at emptySearchDataAndCallSearch"),this.locationSliderMode||(this.searchFacetKeys=[]),this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0}),this.searchParams.from=0;var e={queryCity:"qcity",queryState:"qstate",queryCountry:"qcountry"};e=this.addExtraSelectionsFromUrl(e,"key");for(var t in e)e.hasOwnProperty(t)&&this[t]&&(this.searchParams[e[t]]="");"none"!=this.clearResults&&"keywords"!=this.clearResults&&(this.clearAll=!0,this.category="",this.location=""),"full"!=this.clearResults&&"keywords"!=this.clearResults||(this.clearAll=!0,this.searchKeyword=""),this.searchData(1,"")},t.prototype.gotoPage=function(e){e>0&&this.searchData(e,"")},t.prototype.searchData=function(t,o,i,a,n,s){var p=this;if(e.prototype.unhideLoader.call(this),this.eventAggregator.publish("ph:fetchingResults",{}),this.firstTime=i,this.resultsDisplayMode=s,this.searchParams.all_fields=this.facetsToEnable,this.searchParams.pageName=this.pageName,this.searchParams.pageType=this.pageType,this.searchParams.from=this.pageSize*(t-1),this.searchParams.size=this.pageSize,this.searchParams.rk=this.rk,this.searchParams.ak=this.ak,this.searchParams.clearAll=this.clearAll,this.searchParams.jdsource="facets",this.clearAll&&(this.searchParams.location=""),this.locationKey&&(this.searchParams.lk=this.locationKey),this.selectedSkill.length>0){var h={};h.skills=this.selectedSkill,this.searchParams.selected_suggestions=h}this.searchParams.isSliderEnable=this.hasLocationSliderFacet(),this.isCritical&&(this.searchParams.selected_fields={isCritical:["true"]});var u;this.placeId?(u={place_id:this.placeId,sliderRadius:this.sliderRadius,aboveMaxRadius:this.aboveMaxRadius,placeVal:this.isAccessbility?this.fields.glocations.value:this.placeVal},this.locationLatLongs&&this.locationLatLongs.coords?(u.latitude=this.locationLatLongs.coords.latitude,u.longitude=this.locationLatLongs.coords.longitude):this.latitude&&this.longitude&&(u.latitude=this.latitude,u.longitude=this.longitude)):this.hasLocationSliderFacet()&&(u={sliderRadius:this.sliderRadius,aboveMaxRadius:this.aboveMaxRadius});var g="ddoKey";this.rk&&this.searchParams.rk&&this.clearAll&&(g="ddoKeyEagerLoad"),this.commonService.getPageId()&&(this.searchParams.pageId=this.commonService.getPageId()),this.searchParams.siteType=this.commonService.getSiteType(),this.searchParams.forceSpellCheck=this.triggerSpellCheck,"internal"==this.searchParams.siteType&&this.imVariantsLength&&(this.searchParams.imVariantsLength=this.imVariantsLength),this.facetsService.getSearchData(l,r.WidgetConfig.v1[g],this.searchSelectionKeys,this.searchParams,this.firstTime,this.searchKeyword,this.pageIdentifier,u).then(function(t){p.locationSliderMode||(p.searchFacetKeys=[]),setTimeout(function(){p.scrollToSelection()},250);var s=t.refineSearch,h=s&&s.data&&s.data.jobs||[],u=s&&s.data&&s.data.spellCheckData||{},f=s&&s.data&&s.data.searchConfig||{};s&&s.allResults?p.allResults=s.allResults:p.allResults=!1;var m=".ph-a11y-noresult";h.length?(m=".ph-a11y-result-updated","ddoKey"==g&&(p.resultsUpdated=!0,setTimeout(function(){p.resultsUpdated=!1},500))):"ddoKey"==g&&(p.noResults=!0,setTimeout(function(){p.noResults=!1},500));var y=p.element.querySelector(m),v=y&&y.parentElement;if(v&&(y.removeAttribute("aria-hidden"),y.parentElement.removeChild(y),setTimeout(function(){v.append(y),setTimeout(function(){y.setAttribute("aria-hidden","true")},3e3)},100)),p.firstTime&&s.totalHits&&s.totalHits<=p.searchParams.from)return p.commonService.setPageState("results"),p.searchData(1,"",!0),!1;if(s.data&&s.data.searchConfig&&s.data.searchConfig.mostpopular&&(p.searchParams.isMostPopular=!0),s.data&&s.data.personalizedData&&(p.personalizedData=Object.keys(s.data.personalizedData).reduce(function(e,t){var o={};return o.displayName=t,o.data=s.data.personalizedData[t],e.push(o),e},[]),console.info("personalied data",p.personalizedData)),s.data&&s.data.searchConfig&&s.data.searchConfig.isPersonalizedSearchEnabled&&(p.searchParams.isPersonalizedSearchEnabled=!0),p.searchParams.sortBy.length&&"Most relevant"!=p.searchParams.sortBy&&(p.personalizedData=[]),h&&h.length>p.pageSize){var b=p.pageSize?p.pageSize:h.length;h.splice(b)}s.data&&(p.uiSkillSelection=s.data.ui_skills_selection||"");var S=s.data.locationData;if(s.data&&S&&Object.keys(S).length)for(var _ in S)S.hasOwnProperty(_)&&(p[_]=S[_],"place_id"==_?p.placeId=S[_]:"aboveMaxRadius"==_&&"false"==S[_]?p.aboveMaxRadius=!1:"locationRangeEnd"==_&&(p.locationRangeEnd=p.locationRangeEnd+d));if(p.placeVal&&p.placeVal.trim().length&&(p.enableLocationSlider=!0,p.aboveMaxRadius=!1,p.sliderRadius>p.locationSliderFacetMaxRange&&(p.aboveMaxRadius=!0)),p.loadType==c||""==o?(p.jobResults=h,p.totalJobs=s.totalHits||0,p.filteredTotalJobs=s.totalHits||0,p.spellCheckObject=u,p.searchConfigData=f,p.tempJobResultsForLazyLoad=h):"lazy"==p.loadType&&(p.tempJobResultsForLazyLoad=h,p.filteredTotalJobs=s.totalHits||0),s.selected_fields&&(p.searchSelectionKeys=[],p.updateFacetSelectionCounts(void 0,{reset:!0}),p.isCritical&&s.selected_fields.isCritical&&delete s.selected_fields.isCritical),(!p.searchSelectionKeys||!p.searchSelectionKeys.length)&&s.selected_fields){var w=s.selected_fields,k=s.data.aggregations;k&&k.length&&k.forEach(function(e){var t=w[e.field];if(t)for(var o in e.value)if(e.value.hasOwnProperty(o)){var i=e.value[o];if(!i){var a=t.indexOf(o);-1!=a&&p.updateFacetSelectionCounts(e.field,{decrement:!0})}}});for(var _ in w)!function(e){w[e]&&w[e].length&&w[e].forEach(function(t){p.searchSelectionKeys.push({facet:e,name:t}),p.updateFacetSelectionCounts(e)})}(_)}if(p.commonService.populateJobResults&&(p.jobResults=p.commonService.populateJobResults(p.jobResults,p.clickTojd,"job_click")),p.raiseSearchResultsEvent(),p.raiseSkillsResultsEvent(s.data),e.prototype.raiseDataFetchEvent&&setTimeout(function(){e.prototype.raiseDataFetchEvent.call(p)},250),p.bulkcart&&!p.commonService.isCrawlerUserAgent()){for(var C=[],j=0,E=h;j<E.length;j++){var x=E[j];h.isJobSaved=null,h.saveJobInterState=null,h.inProgress=!1,C.push(x.jobSeqNo)}var O={jobSeqNos:C};p.facetsService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyStatusList,O).then(function(e){if(e&&e.data)for(var t=e.data,o=0,i=h;o<i.length;o++){var a=i[o];a.isJobSaved=t[a.jobSeqNo]||!1,a.saveJobInterState=t[a.jobSeqNo]||!1}})}if(s&&s.data&&s.data.aggregations){var k=s.data.aggregations,P=s.selected_fields,D=p.parseJsonStringToObj(p.commonService.getSessionParam("selected_fields"));i&&D&&Object.keys(D).length&&(P=D),k.forEach(function(e){p.searchFacets[e.field]=[];var t={key:e.field,visible:!1};o==e.field&&(t.visible=!0);var a=!1;for(var r in e.value)if(e.value.hasOwnProperty(r)&&e.value[r]){var n=!1;P[e.field]&&-1!=P[e.field].indexOf(r)&&(n=!0,t.visible=!0,a=!0),p.searchFacets[e.field].push({name:r,checked:n,count:e.value[r],facet:e.field})}i&&a&&p.defaultFacetsToOpen.push(e.field)})}if(!i&&p.locationSliderMode||p.facetsToEnable&&p.facetsToEnable.forEach(function(e){var t={key:e,visible:!1};o!=e&&"phLocSlider"!=e||(t.visible=!0),p.searchFacetKeys.push(t),p.isAccessbility&&p.locationDropDownFun()}),i){p.openSpecificFacets(p.defaultFacetsToOpen),p.fields.glocations&&p.fields.glocations.value&&(p.placeVal=p.fields.glocations.value);var R={};R.searchKeyword=p.searchKeyword,R.placeVal=p.placeVal,R.category=p.category,R.city=p.city,p.showErrorMsg=!1,p.totalJobs?p.commonService.setPageState("results"):(p.hasLocationSliderFacet()||p.eventAggregator.publish("ph:noJobsFound",R),p.hasLocationSliderFacet()||p.commonService.setPageState("no-results"),p.commonService.setPageStateData(R),p.isErrorMsgReqd?p.showErrorMsg=!0:p.hasLocationSliderFacet()?p.enableLocationSlider=!0:e.prototype.hideContainer.call(p))}else p.openSpecificFacets(p.openFacets);a&&p.focusSliderHandle(n),i&&void 0!=u&&void 0!=u.spellCheckApplied&&u.spellCheckApplied&&e.prototype.trackWidgetClick.call(p,"search_with_spellcheck",s.data)})},t.prototype.locationDropDownFun=function(){var e=this;this.setFieldData(),this.fieldsEnabled=r.WidgetConfig.modeConfig["facet-locations"].fields,setTimeout(function(){var t=e.element.querySelectorAll(".ph-autocomplete-input-wrapper");if(t)for(var o=0;o<t.length;o++){var i=t[o];i&&e.a11yAutoComplete&&e.a11yAutoComplete.init&&e.a11yAutoComplete.init(i)}var a=e.element.querySelectorAll("[data-ph-autocomplete-input]");if(a)for(var o=0;o<a.length;o++){var r=a[o],n=e.getFieldName(r);e.inputFields[n]={field:r,handler:e.setHandler(n)},e.setupEventListeners(r)}},10)},t.prototype.setActiveField=function(e){this.activeField=e},t.prototype.setFieldData=function(){for(var e=r.WidgetConfig,t=e.modeConfig["facet-locations"].fields,o=0;o<t.length;o++){var i=t[o],a=e.fields[i],n=a.field||i;a&&a.autoSuggestField&&e.modeConfig["facet-locations"].fields.push(a.autoSuggestField);for(var s in a)a.hasOwnProperty(s)&&(this.fields[n]=this.fields[n]||{},this.fields[n][s]=a[s])}},t.prototype.setHandler=function(e){switch(e){case"glocations":return new s.GLocationHandler(l,this.fields,this.facetsService,this.a11yAutoComplete,this.element,this);default:return}},t.prototype.getFieldName=function(e){if(e&&e.getAttribute)return e.getAttribute("data-ph-autocomplete-input")},t.prototype.getFieldHandler=function(e){if(e){var t=this.inputFields[e];if(t&&t.handler)return t.handler}},t.prototype.autoPopulateOnBlur=function(e){this.activeField&&this.activeField!=e&&this.fields[this.activeField].autoPopulateOnBlur&&this.fields[this.activeField].value&&(this.fields[this.activeField].value=this.fields[this.activeField].results[0].key,this.fields[this.activeField].results=[this.fields[this.activeField].results[0]])},t.prototype.clearSearchValue=function(e,t){var o=this;this.fields[t].value="",this.fields[t].showListBox=!1,this.clearPlaceVal(),setTimeout(function(){o.inputFields[t].field.focus()},100)},t.prototype.isFieldEnabled=function(e){return-1!=this.fieldsEnabled.indexOf(e)},t.prototype.resetFieldListBox=function(e){var t=this,o=r.WidgetConfig;o.modeConfig["facet-locations"].fields.forEach(function(i){var a=t.fields[i]||t.fields[o.fields[i].field];a&&i!=e&&(a.showListBox=!1)})},t.prototype.setupEventListeners=function(e){e&&(e.addEventListener("focus",this.handleFieldFocus),e.addEventListener("keyup",this.handleKeyup),e.addEventListener("keydown",this.handleKeydown),e.addEventListener("paste",this.handlepaste),e.addEventListener("blur",this.locationBlur))},t.prototype.handleDoneButtonClick=function(){if("lazy"==this.loadType){this.jobResults=this.tempJobResultsForLazyLoad,this.totalJobs=this.filteredTotalJobs,this.tempSearchSelectionKeys=[],this.raiseSearchResultsEvent(),this.resetFacetFilter(),e.prototype.closeDialogPopup.call(this);var t=this.facetFilter.querySelector(".ph-a11y-row");t&&t.removeAttribute("aria-hidden")}},t.prototype.clearSelection=function(e){e&&(e.checked=!1,this.filterChanged(e,e.facet))},t.prototype.parseJsonStringToObj=function(e){return e&&"string"==typeof e&&(e=JSON.parse(e)),e},t.prototype.clearPlaceVal=function(){this.placeVal="",this.placeId="",this.showLocationDropdown=!1,this.locationSliderChanged(!0),this.searchData(1,"")},t.prototype.resetAllSelections=function(){var e=this;this.searchSelectionKeys.forEach(function(t){var o=e.searchFacets[t.facet];-1!=o.indexOf(t)&&(o[o.indexOf(t)].checked=!1)}),this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0})},t.prototype.showMoreResults=function(e){this.searchData(e.pageNumber,"",!1,!1,!1,e.resultsDisplayMode)},t.prototype.showFacetFilter=function(){var t=this;document.body.className=this.fetchBodyClass()+" facete",this.loadType="lazy",this.tempSearchSelectionKeys.length&&this.tempSearchSelectionKeys.forEach(function(e){t.searchSelectionKeys.push(e)});var o=this.element.parentElement.parentElement;o.classList.contains("ph-a11y-facets")||o.classList.add("ph-a11y-facets"),o.setAttribute("role","dialog");var i=this.facetFilter.querySelector(".ph-a11y-row");i&&i.setAttribute("aria-hidden",!0),setTimeout(function(){var i=t.facetFilter.querySelector(".ph-a11y-filter a"),a=o.querySelector(".ph-a11y-facets a");i||(i=t.facetFilter),e.prototype.openDialogPopup.call(t,o,i,a)},50),this.searchFacetKeys.forEach(function(e){e.visible=!1})},t.prototype.resetFacetFilter=function(){var e=this.fetchBodyClass()||"";document.body.className=e.replace(" facete",""),this.loadType=c},t.prototype.hideFacetFilter=function(){if(this.tempSearchSelectionKeys.length)for(var t=this.tempSearchSelectionKeys.length,o=this.searchSelectionKeys.length,i=0;i<t;i++)for(var a=0;a<o;a++)this.tempSearchSelectionKeys[i].name==this.searchSelectionKeys[a].name&&(this.searchSelectionKeys.splice(a,1),o=this.searchSelectionKeys.length);this.resetFacetFilter(),e.prototype.closeDialogPopup.call(this);var r=this.facetFilter.querySelector(".ph-a11y-row");r&&r.removeAttribute("aria-hidden")},t.prototype.adjustAccordian=function(e){if(this.mode){if("accordion"==this.mode)for(var t=this.searchFacetKeys[e].key,o=0;o<this.searchFacetKeys.length;o++)this.searchFacetKeys[o].key==t?this.searchFacetKeys[o].visible=!this.searchFacetKeys[o].visible:this.searchFacetKeys[o].visible=!1}else{this.searchFacetKeys[e].visible=!this.searchFacetKeys[e].visible;var i=this.facetsToEnable.indexOf("phLocSlider");-1!==i&&i!==e&&(this.searchFacetKeys[i].visible=!1)}},t.prototype.onJobClicked=function(){return this.localStorage.setItem("sbts",{sbts:1}),!0},t.prototype.clearSubSearchAndCallSearch=function(e){this.searchParams.subsearch="",this.filterSearch(e)},t.prototype.openSpecificFacets=function(e){if(e&&e.length>0)if("accordion"==this.mode){for(var t=0;t<this.searchFacetKeys.length;t++)if(this.searchFacetKeys[t].key==e[0]){this.searchFacetKeys[t].visible=!0;break}}else for(var t=0;t<this.searchFacetKeys.length;t++)e.indexOf(this.searchFacetKeys[t].key)>-1&&(this.searchFacetKeys[t].visible=!0)},t.prototype.hasSplRendering=function(e){return"phLocSlider"==e},t.prototype.locationSliderChanged=function(e){var t=this;setTimeout(function(){t.sliderRadius>t.locationSliderFacetMaxRange?t.aboveMaxRadius=!0:t.aboveMaxRadius=!1,t.searchData(1,"",void 0,!0,e)},0)},t.prototype.focusSliderHandle=function(e,t){var o=this;setTimeout(function(){var i=o.element.querySelector(".noUi-handle");if(e){var a=o.element.querySelector(".ph-a11y-search-location-box");a&&setTimeout(function(){a.focus()},700),o.inputFields.glocations&&o.inputFields.glocations.field&&setTimeout(function(){o.inputFields.glocations.field.focus()},700)}else t||(i?i.focus():o.focusSliderHandle(!1))},0)},t.prototype.fetchLocations=function(e){var t=this;if(this.currentfocusElem=e.target,40!=e.which&&16!=e.which&&9!=e.which){var o=e.target?e.target.value:void 0;o?this.facetsService.getLocations(l,r.WidgetConfig.v1.ddoPlaceAutoComplete,o).then(function(e){t.showLocationDropdown=!0,t.allLocations=e.predictions;var o=t.element.querySelector(".ph-ally-location-inner-search"),i=t.element.querySelector(".ph-a11y-search-location-box");t.element.querySelectorAll(".phs-locations-suggested-list li"),!t.isAccessbility&&o&&i&&t.dropdownAccessbility(o,t.showLocationDropdown,".phs-locations-suggested-list li",i,"a")},function(e){new Error(e)}):this.clearPlaceVal()}},t.prototype.dropdownAccessbility=function(e,t,o,i,a){var r=this;if(e instanceof HTMLElement||(e=this.element.querySelector(e)),this.element.querySelectorAll(o).length,o.length,e){var n=-1;e.addEventListener("keyup",function(e){switch(e.which){case 40:n<r.element.querySelectorAll(o).length?n++:n=r.element.querySelectorAll(o).length;break;case 38:if(0==n&&i)return i.focus(),void(n=-1);n>=0?n--:n=0;break;default:return}if(t||(n=0),n<r.element.querySelectorAll(o).length&&!(n<0)){var s=void 0;r.element.querySelectorAll(o).length&&r.element.querySelectorAll(o)[n]&&(s=a?r.element.querySelectorAll(o)[n].querySelector("a"):r.element.querySelectorAll(o)[n]),s&&s.focus()}})}},t.prototype.clearInnerFacetSearch=function(e,t,o){e.target.parentElement,o.filterKey="",document.querySelector("#facetInput_"+t).focus()},t.prototype.sliderFocus=function(e){this.currentfocusElem=e.target},t.prototype.setLocation=function(e){var t=this;e&&(this.locationSliderMode=!0,this.placeVal=e.description,this.fields.glocations.value=e.description,this.enableLocationSlider=!0,this.placeId=e.place_id,this.showLocationDropdown=!1,this.searchData(1,""),setTimeout(function(){t.inputFields.glocations&&t.inputFields.glocations.field&&t.inputFields.glocations.field.focus()},100))},t.prototype.raiseSearchResultsEvent=function(){var e=this,t=0;Object.keys(this.facetSelectionCounts).forEach(function(o){t+=e.facetSelectionCounts[o]||0}),this.eventAggregator.publish("ph:searchResults",{jobResults:this.jobResults,totalJobs:this.totalJobs,searchSelectionKeys:this.searchSelectionKeys,searchParams:this.searchParams,searchKeyword:this.searchKeyword,locationKeyword:(this.locationKey&&this.locationKey.length)>0?this.locationKey:this.isAccessbility?this.fields.glocations.value:this.placeVal,pageSize:this.pageSize,selectedSkills:this.uiSkillSelection,allResults:this.allResults,clearResults:this.clearResults,clearAll:this.clearAll,spellCheckObject:this.spellCheckObject,searchConfigData:this.searchConfigData,triggerSpellCheck:this.triggerSpellCheck,isLocationSlider:this.hasLocationSliderFacet(),filterCount:t,resultsDisplayMode:this.resultsDisplayMode})},t.prototype.raiseSkillsResultsEvent=function(e){e&&e.suggestions&&e.suggestions.skills&&this.eventAggregator.publish("skillsResultsEvent",e.suggestions.skills)},t.prototype.handleSaveJob=function(e){this.bulkcart&&!e.inProgress&&(e.inProgress=!0,e.saveJobInterState?this.deleteJobFromCart(e):this.addToJobCart(e))},t.prototype.addToJobCart=function(e){var t=this,o={job:{title:e.title,jobSeqNo:e.jobSeqNo,location:e.location,type:e.type,shortDescription:e.descriptionTeaser,applyUrl:e.applyUrl,category:e.category,postedDate:e.postedDate,expiryDate:e.expiryDate,reqId:e.reqId,multi_location:e.multi_location}};this.facetsService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyAdd,o).then(function(o){if(e.inProgress=!1,"602"==o.status){var i={trait5:e.jobSeqNo,trait14:e.category};e.saveJobInterState=!0,t.eventAggregator.publish("jobCartCount","+1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_added_to_jobcart",void 0,i)}else e.isJobSaved=!1,e.saveJobInterState=!1,console.info("failed on jobsave: "+o.status)})},t.prototype.deleteJobFromCart=function(e){var t=this,o={jobSeqNo:e.jobSeqNo};this.facetsService.makeDDORequest(l,r.WidgetConfig.v1.ddoKeyDelete,o).then(function(o){if(e.inProgress=!1,"605"==o.status){var i={};e.isJobSaved=!1,e.saveJobInterState=!1,i.trait5=e.jobSeqNo,i.trait14=e.category,t.eventAggregator.publish("jobCartCount","-1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_unfavorited",void 0,i)}else e.isJobSaved=!0,e.saveJobInterState=!0,console.info("failed on deleteJobFromCart")})},t.prototype.updateFacetSelectionCounts=function(e,t){t&&t.reset&&(this.facetSelectionCounts={}),e&&(this.facetSelectionCounts=this.facetSelectionCounts||{},void 0==this.facetSelectionCounts[e]&&(this.facetSelectionCounts[e]=0),t&&t.decrement?this.facetSelectionCounts[e]=this.facetSelectionCounts[e]-1:this.facetSelectionCounts[e]=this.facetSelectionCounts[e]+1)},t.prototype.scrollToSelection=function(){if(this.lastSelection&&this.lastSelection.facet)for(var e=void 0,t=this.element.querySelectorAll('[data-ph-at-text="'+this.lastSelection.facet.name+'"]'),o=0;o<t.length;o++)if(e=t[o],this.currentfocusElem=e,e.focus(),e&&e.getAttribute&&e.getAttribute("data-ph-at-id")){var i=e.getAttribute("data-ph-at-id");if(i=="facet-"+this.lastSelection.facet.facet&&e&&e.scrollIntoView){e.scrollIntoView(!1),this.eventAggregator.publish("scrollToResults",{});break}}return!0},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"pageSize",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"categoryNameInput",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"city",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isAccessbility",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"bulkcart",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"clickTojd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"loadType",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"landingPageKey",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"landingPageType",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"locationRangeEnd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"clearResults",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"sort",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showJobs",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showCounts",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"onlyCounts",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isCritical",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"clearAll",void 0),t=__decorate([o.customElement(l),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==a.CommonService&&a.CommonService)&&h||Object,n.FacetsService,"function"==typeof(u=void 0!==a.LocalStorageAPI&&a.LocalStorageAPI)&&u||Object,"function"==typeof(g=void 0!==a.CookieManager&&a.CookieManager)&&g||Object,"function"==typeof(f=void 0!==a.A11yAutoComplete&&a.A11yAutoComplete)&&f||Object,"function"==typeof(m=void 0!==a.GeoLocationService&&a.GeoLocationService)&&m||Object,i.EventAggregator])],t);var h,u,g,f,m}(a.PhenomWidget);t.Facets=h}),define("text!v1/ph-facets.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-search-results-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"",jobImageBasedOnTags:"jobImageBasedOnTags"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}
;define("v2/ph-search-results-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SearchResultsService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-search-results",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-search-results-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-search-results-v2",s="ph:showMore",l="job_click",c=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.element=t,r.commonService=o,r.searchResultsService=i,r.eventAggregator=a,r.pageSize=10,r.jobDateFormat="DEFAULT",r.mobilePaginationBlockSize=5,r.paginationBlockSize=10,r.jobsToShowBlockSize=10,r.linkBasedPagination=!1,r.jobImageTag="category",r.jobBadgeTag="category",r.searchParams={},r.subscriptions=[],r.jobResults=[],r.totalJobs=0,r.currentSelectedPage=1,r.startingJobNumberInPage=1,r.endingJobNumberInpage=1,r.prevButtonVisibility=!0,r.nextButtonVisibility=!0,r.paginationRange=[],r.mobilePaginationRange=[],r.searchSelectionKeys=[],r.paginationUrls={},r.mobilePaginationUrls={},r.noResults=!1,r.spellCheckFlag=!1,r.triggerSpellFlag=!0,r.originalSearchWord="",r.autocorrectedSearchWord="",r.clearResults="",r.clearAll=!1,r.isMostPopular=!1,r.showClearAll=!1,r.filterCount=0,r.textCleared=!1,r.scrollEnable=!1,r.sortByList=[{value:"Most relevant"},{value:"Most recent"}],r.isSortByDropdown=!1,r.addJobContext=function(){r.commonService.addJobContext(n,r.jobResults),r.commonService.jobContext(n)},r.handleSearchResultsEvent=function(t){t&&(e.prototype.hideLoader.call(r),"showMore"==t.resultsDisplayMode||"infinity"==t.resultsDisplayMode?r.jobResults=r.jobResults.concat(t.jobResults||[]):r.jobResults=t.jobResults||[],r.totalJobs=t.totalJobs||0,r.searchSelectionKeys=t.searchSelectionKeys||{},r.searchParams=t.searchParams||{},r.triggerSpellFlag=t.triggerSpellFlag,t.searchConfigData&&void 0!=t.searchConfigData.isSuggestionsEnabled&&1==t.searchConfigData.isSuggestionsEnabled&&t.spellCheckObject&&void 0!=t.spellCheckObject.spellCheckApplied&&(r.spellCheckFlag=t.spellCheckObject.spellCheckApplied,"".match(t.spellCheckObject.suggestedKeyword)&&(r.spellCheckFlag=!1),r.autocorrectedSearchWord=t.spellCheckObject.suggestedKeyword||t.searchKeyword,r.originalSearchWord=t.spellCheckObject.originalKeyword||t.searchKeyword),r.searchParams&&!r.searchParams.sortBy&&(r.searchParams.sortBy="Most relevant"),r.currentSelectedPage=1,r.searchKeyword=t.searchKeyword,r.locationKey=t.locationKeyword,r.pageSize=t.pageSize||r.pageSize,r.selectedSkillKeywords=t.selectedSkills||"",r.noResults=t.allResults,r.clearResults=t.clearResults,r.clearAll=t.clearAll,r.filterCount=t.filterCount,r.clearAll&&(r.searchKeyword=""),r.jobResults.forEach(function(e){e.fitLevel&&"BAD FIT"==e.fitLevel.toUpperCase()&&(e.fitLevel=null)}),r.jobWidgetSettingsPromise.then(function(e){r.onDataChange(l)}),(t.isLocationSlider||!r.isErrorMsgReqd&&r.jobResults.length)&&e.prototype.showContainer.call(r),r.addJobContext(),r.searchParams.from>0&&(r.currentSelectedPage=Math.ceil(r.searchParams.from/r.pageSize)+1),"pagination"==r.resultsDisplayMode&&r.applyPagination(),r.searchParams.isMostPopular&&(r.isMostPopular=!0),r.scrollEnable=!0,setTimeout(function(){e.prototype.fetchJobStatus.call(r)},250))},r.showResultsOnScroll=function(){if("infinity"==r.resultsDisplayMode&&r.scrollEnable&&document.querySelector("[data-ph-at-id='jobs-list']")&&document.querySelector("[data-ph-at-id='jobs-list']").lastChild&&document.querySelector("footer")){var e=document.querySelector("[data-ph-at-id='jobs-list']").lastChild.previousElementSibling,t=document.querySelector("footer");if(r.isScrolledIntoView(e,t)){r.scrollEnable=!1;var o={resultsDisplayMode:r.resultsDisplayMode,pageNumber:++r.currentSelectedPage};r.eventAggregator.publish(s,o)}}},r.isLocalDataSourceFn=function(){return!0},r.addSubscriptions(),r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),e.prototype.unhideLoader.call(this),this.resultsDisplayMode=this.commonService.getSiteSettings("resultsDisplayMode")||"pagination",setTimeout(function(){window.addEventListener("scroll",t.showResultsOnScroll)},200)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.addSubscriptions=function(){var t=this;this.subscriptions.push(this.eventAggregator.subscribe("ph:searchResults",this.handleSearchResultsEvent)),this.subscriptions.push(this.eventAggregator.subscribe("ph:fetchingResults",function(){e.prototype.unhideLoader.call(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(o){t.isErrorMsgReqd||e.prototype.hideContainer.call(t)})),this.subscriptions.push(this.eventAggregator.subscribe("scrollToResults",function(e){t.element.scrollIntoView()}))},t.prototype.loadOriginalKeywordSearchResults=function(){window.location.href=window.location.origin+window.location.pathname+"?keywords="+this.originalSearchWord+"&triggerSpellCheck=false"},t.prototype.loadAutoCorrectedWordSearchResults=function(){window.location.href=window.location.origin+window.location.pathname+"?keywords="+this.autocorrectedSearchWord+"&triggerSpellCheck=false"},t.prototype.onDataChange=function(t){e.prototype.onDataChange.call(this,t)},t.prototype.applyPagination=function(){var e=Math.ceil(this.totalJobs/this.pageSize),t=Math.ceil(this.paginationBlockSize/2),o=Math.ceil(this.paginationBlockSize/2)-1,i=Math.floor(this.mobilePaginationBlockSize/2),a=Math.floor(this.mobilePaginationBlockSize/2),r=e<this.paginationBlockSize?e:this.paginationBlockSize,n=e<this.mobilePaginationBlockSize?e:this.mobilePaginationBlockSize,s=this.currentSelectedPage-t>1?this.currentSelectedPage-t:1,l=this.currentSelectedPage+o>r?this.currentSelectedPage+o:r,c=this.currentSelectedPage-i>1?this.currentSelectedPage-i:1,d=this.currentSelectedPage+a>n?this.currentSelectedPage+a:n;l>e&&(l=e),d>e&&(d=e);var p=this.paginationBlockSize-(l-s);p>0&&(s-=p);var h=this.mobilePaginationBlockSize-(d-c+1);h>0&&(c-=h),this.paginationRange=[];for(var u=s;u<=l;u++)u>0&&(this.paginationRange.push(u),this.paginationUrls[u]=this.paginationUrl(u));this.mobilePaginationRange=[];for(var u=c;u<=d;u++)u>0&&(this.mobilePaginationRange.push(u),this.mobilePaginationUrls[u]=this.paginationUrl(u));this.startingJobNumberInPage=this.totalJobs?(this.currentSelectedPage-1)*this.pageSize+1:0,this.endingJobNumberInpage=this.totalJobs>this.currentSelectedPage*this.pageSize?this.currentSelectedPage*this.pageSize:this.totalJobs,this.prevButtonVisibility=1!=this.currentSelectedPage,this.nextButtonVisibility=this.currentSelectedPage<e},t.prototype.clearSelection=function(e){e&&1==this.searchSelectionKeys.length?this.emptySelectionsAndCallSearch():e&&(e.checked=!1),this.eventAggregator.publish("ph:clearSelection",e)},t.prototype.emptySelectionsAndCallSearch=function(){var e=this;this.searchSelectionKeys=[],this.eventAggregator.publish("ph:resetAll",{}),this.showClearAll=!0,setTimeout(function(){var t=e.element.querySelector(".ph-a11y-sortby select");t&&t.focus(),e.showClearAll=!1},2e3)},t.prototype.clearSubSearchAndCallSearch=function(){var e=this;this.eventAggregator.publish("ph:subSearchReset",this.searchParams.subsearch),this.searchParams.subsearch="",this.textCleared=!0,setTimeout(function(){e.textCleared=!1},1e3);var t=this.element.querySelector(".ph-a11y-subsearch");t&&t.focus()},t.prototype.filterSearch=function(){this.eventAggregator.publish("ph:subSearch",{subsearch:this.searchParams.subsearch})},t.prototype.sortfilterSearch=function(){this.eventAggregator.publish("ph:sortBy",{sortBy:this.searchParams.sortBy}),e.prototype.focusElement.call(this,".ph-a11y-sortby select",100)},t.prototype.showFacetFilter=function(){var e=this.element;this.eventAggregator.publish("ph:showfilter",e)},t.prototype.showMoreResults=function(){var e={resultsDisplayMode:this.resultsDisplayMode,pageNumber:++this.currentSelectedPage};this.eventAggregator.publish(s,e)},t.prototype.showLessResults=function(){this.jobResults=this.jobResults.slice(0,10),this.currentSelectedPage=1},t.prototype.isScrolledIntoView=function(e,t){if(e&&window.pageYOffset>e.offsetTop+e.offsetHeight-t.offsetHeight)return!0},t.prototype.paginationUrl=function(t){var o=this,i=(t-1)*this.pageSize,r="",n=window.location.origin+window.location.pathname,s=e.prototype.getQueryParam.call(this,"keywords"),l=e.prototype.getQueryParam.call(this,"lk"),c=e.prototype.getQueryParam.call(this,"rk")||this.commonService.getSessionParam("rk"),d=e.prototype.getQueryParam.call(this,"category"),p=e.prototype.getQueryParamsMap.call(this),h=Object.keys(p);if(this.triggerSpellFlag=e.prototype.getQueryParam.call(this,"triggerSpellCheck"),this.selectedSkillKeywords&&this.selectedSkillKeywords.length>0&&(s=this.selectedSkillKeywords),void 0!=s){var u=s;try{u=decodeURIComponent(s)}catch(e){a.logger.error(e)}r+="keywords="+encodeURIComponent(u)+"&",void 0!=this.triggerSpellFlag&&(r+="triggerSpellCheck="+this.triggerSpellFlag+"&")}return r+=i<=0?"s=1":"from="+i+"&s=1",l&&l.length>0&&(r+="&lk="+l),c&&c.length>0&&(r+="&rk="+c),d&&d.length>0&&(r+="&category="+d),h.forEach(function(t,i){var a=e.prototype.getQueryParam.call(o,t);a&&a.length&&a.startsWith("qk")&&(r+="&"+t+"="+a)}),this.clearAll&&("rules"==this.clearResults&&(r=r.replace("&lk="+l,""),r=r.replace("&category="+d,"")),"keywords"==this.clearResults&&(r=r.replace("keywords="+s,"")),"full"==this.clearResults&&(r="",r+=i<=0?"s=1":"from="+i+"&s=1")),n+="?"+r},t.prototype.handleGotoPageButton=function(t){e.prototype.getElement.call(this).scrollIntoView(),this.eventAggregator.publish("ph:gotoPageEvent",t)},t.prototype.stringify=function(e){return JSON.stringify(e)},t.prototype.getFieldOptions=function(e){if("sortBy"===e)return this.sortByList},t.prototype.setFieldValue=function(e,t,o){"sortBy"===e&&this.sortByList.length&&this.sortByList[t]&&(this.searchParams.sortBy=this.sortByList[t].value,this.sortfilterSearch())},t.prototype.getActiveIndex=function(e){return"sortBy"===e&&this.sortByList.length?this.matchingIndex(this.sortByList,this.searchParams.sortBy):-1},t.prototype.matchingIndex=function(e,t){return e.findIndex(function(e){return e.value===t})},t.prototype.clearFieldValue=function(e){},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"pageSize",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"jobDateFormat",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"mobilePaginationBlockSize",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"paginationBlockSize",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"jobsToShowBlockSize",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"linkBasedPagination",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobImageTag",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobBadgeTag",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(c=void 0!==a.CommonService&&a.CommonService)&&c||Object,r.SearchResultsService,i.EventAggregator])],t);var c}(a.PhenomJobWidget);t.SearchResults=c}),define("text!v2/ph-search-results.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/email-job-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.email="",this.name="",this.jobSeqNo="",this.siteType="external",this.referrerToken="",this.templateSiteType=""}return e}();t.EmailJobModel=o}),define("v1/ph-email-job-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"emailjob",jobDetailDDOKey:"jobDetail",ddoKeyShareDetails:"getSocialSharingDetails"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.emailThisJob=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e})},e.prototype.getSocialUrls=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.EmailJobService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-email-job",["require","exports","aurelia-framework","ph-common","./ph-email-job-config","./ph-email-job-service","./email-job-model"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-email-job-v1",l=function(e){function t(t,o,i,a){var r=e.call(this,t,o,s)||this;return r.commonService=o,r.emailJobService=i,r.emailJobModel=a,r.isPopupReqd=!1,r.isErrorMsgReqd=!1,r.replaceJobSeqNo=!1,r.disableName=!1,r.siteTypeExternal=!1,r.showSubTitle=!1,r.isDialog=!1,r.showDialogPopup=!1,r.showErrorMsg=!1,r.errors={},r.emailDomains=[],r.bodyclass="",r.isEmailClientEnabled=!1,r}return __extends(t,e),t.prototype.attached=function(){var t=this;this.isEmailClientEnabled=this.commonService.getSiteSettings("isNativeEmailClient"),this.isEmailClientEnabled||(e.prototype.attached.call(this),e.prototype.hideLoader.call(this),e.prototype.subscribeToEvent.call(this,"show-email-job",function(e){t.jobSeqNo||(t.jobSeqNo=e.jobSeqNo),t.openEmailDialog()}),e.prototype.subscribeToEvent.call(this,"JOB_DETAIL_OBJECT",function(e){e.visibilityType&&"Internal/External"==e.visibilityType?t.jobSeqNo=e.jobId:t.jobSeqNo=e.jobSeqNo,t.jobId=e.jobId}),e.prototype.subscribeToEvent.call(this,"updateJob",function(o){o.jobSeqNo&&(e.prototype.showContainer.call(t),t.replaceJobSeqNo?t.jobSeqNo=o.jobId:t.jobSeqNo=o.jobSeqNo,t.jobSiteType=o.siteType,t.jobLocation=o.location)}),this.fetchJobSeqNo())},t.prototype.getBodyClass=function(){this.bodyclass=document.body.className},t.prototype.fetchJobSeqNo=function(){if(this.jobSeqNo&&null!=this.jobSeqNo&&this.jobSeqNo.length>0);else{var t=this.commonService.getCachedDDO(a.WidgetConfig.v1.jobDetailDDOKey,s);t&&t.data&&t.data.job&&t.data.job.jobSeqNo?(this.replaceJobSeqNo&&t?this.jobSeqNo=t.data.job.jobId:this.jobSeqNo=t.data.job.jobSeqNo,this.category=t.data.job.category):(e.prototype.hideLoader.call(this),this.handleError(""))}},t.prototype.emailThisJob=function(){var t=this;if("internal"==this.commonService.getSiteType()){var o={jobSeqNo:this.jobSeqNo,jobId:this.jobId,medium:"email-share",campaign:"jobs-share",source:"email",siteType:"external",email:this.emailJobModel.email,jobSiteType:"internal"==this.jobSiteType?"external":this.jobSiteType,jobLocation:this.jobLocation,templateSiteType:this.commonService.getSiteType()};this.emailJobService.getSocialUrls(s,a.WidgetConfig.v1.ddoKeyShareDetails,o).then(function(o){e.prototype.hideLoader.call(t),o&&o.status&&"SUCCESS"==o.status.toUpperCase()&&o.data&&o.data.jdUrl&&(t.emailJobModel.referrerToken=o.data.referrerToken),t.emailJob()},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError("")})}else this.emailJob()},t.prototype.emailJob=function(){var t=this;if(this.emailJobModel.jobSeqNo=this.jobSeqNo,this.emailDomains=this.commonService.getSiteSettings("emailDomains"),this.errors.name={},this.errors.email={},this.disableName&&delete this.emailJobModel.name,this.emailDomains){for(var o=!1,i=0,r=this.emailDomains;i<r.length;i++){var n=r[i];if(this.validateEmail(this.emailJobModel.email,n)){o=!0;break}}this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?o?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}else{var l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.emailJobModel.name||this.disableName?(this.hasErrors=!1,this.errors.name.error=!1):(this.hasErrors=!0,this.errors.name.code="E101",this.errors.name.error=!0),this.emailJobModel.email?l.test(this.emailJobModel.email)?(this.hasErrors=!1,this.errors.email.error=!1,e.prototype.unhideLoader.call(this)):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E102"):(this.hasErrors=!0,this.errors.email.error=!0,this.errors.email.code="E101")}(this.errors.name.error||this.errors.email.error)&&(this.hasErrors=!0,e.prototype.hideLoader.call(this)),this.hasErrors?setTimeout(function(){t.errors.name.error?t.element.querySelector(".ph-a11y-form-control-name").focus():!t.errors.name.error&&t.errors.email.error&&t.element.querySelector(".ph-a11y-form-control-email").focus()},50):(this.emailJobModel.templateSiteType=this.commonService.getSiteType(),this.jobSiteType&&("internal"==this.jobSiteType?this.emailJobModel.jobSiteType="external":this.emailJobModel.jobSiteType=this.jobSiteType),this.emailJobModel.jobLocation=this.jobLocation,this.emailJobService.emailThisJob(s,a.WidgetConfig.v1.ddoKey,this.emailJobModel).then(function(o){var i=t.element.querySelectorAll(".feedbackText")[0];if("success"==o.emailjob.status){var a={};a.trait15=t.emailJobModel.name?t.emailJobModel.name:"",a.trait27=t.emailJobModel.email,a.trait5=t.jobSeqNo,a.trait14=t.category,t.commonService.processTrackingEvent("email_job",void 0,a),e.prototype.hideLoader.call(t),t.showEmailSuccess=!0;var r=document.querySelector(".ph-a11y-email-submit"),n=t.element.querySelectorAll(".success-hdlr .hdlr-block")[0];r&&n&&e.prototype.openDialogPopup.call(t,"success-hdlr",r,n),t.emailJobModel.name="",t.emailJobModel.email=""}else{e.prototype.hideLoader.call(t),t.showEmailFailure=!0;var r=document.querySelector(".ph-a11y-email-submit"),n=t.element.querySelectorAll(".failure-hdlr .hdlr-block")[0];r&&n&&e.prototype.openDialogPopup.call(t,"failure-hdlr",r,n)}i&&i.setAttribute("tabindex","0"),setTimeout(function(){i&&i.focus()},50),t.isDialog&&(t.showDialogPopup=!0,t.emailJobModel.name="",t.emailJobModel.email="")},function(e){t.showEmailSuccess=!1,t.showEmailFailure=!1,t.closeEmailDialog()}))},t.prototype.onBtnBlurHandler=function(e){e.target.setAttribute("tabindex","-1")},t.prototype.validateEmail=function(e,t){var o=e.toLowerCase().match("^(.+)@"+t.toLowerCase()+".com$");if(null==o)return!1;if(null!=o[1]){var i=/^\"?[\w-_\.]*\"?$/;return null!=o[1].match(i)}return!1},t.prototype.detached=function(){e.prototype.hideLoader.call(this)},t.prototype.openEmailDialog=function(){if(this.isPopupReqd){this.showEmailDialog=!0;var t=document.getElementsByClassName("email")[0],o=this.element.querySelectorAll(".form-control")[0];t&&e.prototype.openDialogPopup.call(this,"modal",t,o),this.showEmailSuccess=!1,this.showEmailFailure=!1,this.getBodyClass();var i=this.bodyclass+" overflow-hidden";document.body.className=i}else{var a=document.querySelector('[as-element^="ph-email-job"]');if(a){var r=window.pageYOffset;if(this.commonService.smoothScroll){var n=this.commonService.getNearestSectionElemOffsetTop(a);r<n?this.commonService.smoothScroll(r,n,!0,30):this.commonService.smoothScroll(r,n,!1,30);var s=a.querySelector("input");s&&s.focus()}else{a.scrollIntoView(!1);var l=document.querySelectorAll(".ph-sticky-header"),c=0,d=window.scrollY,p=0;if(l.length){for(var h=0;h<l.length;h++)c+=l[h].offsetHeight;d&&c>window.innerHeight/2&&(p=a.offsetHeight-(window.innerHeight-c),window.scroll(0,d-p))}}}}},t.prototype.closeEmailDialog=function(){if(this.showEmailDialog=!1,this.showEmailSuccess=!1,this.showEmailFailure=!1,e.prototype.closeDialogPopup.call(this),this.errors.name={},this.errors.email={},document.body.classList&&document.body.classList.contains("overflow-hidden")&&document.body.classList.remove("overflow-hidden"),this.shareHandler){this.shareHandler({share:{name:"email"}});var t={jobSeqNo:this.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",t)}var o=this.element.querySelector(".ph-a11y-email-button");o&&o.focus()},t.prototype.closeFeedbackPopup=function(t){e.prototype.closeDialogPopup.call(this),t?this.closeEmailDialog():(this.errors.name={},this.errors.email={},this.errors.senderName={},this.emailJobModel.name="",this.emailJobModel.email="")},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobId",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isPopupReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"replaceJobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Function)],t.prototype,"shareHandler",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"disableName",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"siteTypeExternal",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"showSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isDialog",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,r.EmailJobService,n.EmailJobModel])],t);var l}(i.PhenomWidget);t.EmailJob=l}),define("text!v1/ph-email-job.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-email-job-v1/default/view.html",["module"],function(e){e.exports='<template>\n  <div ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader" class="show-loader"></div>\n\t<a href="javascript:void(0)" class="btn default-button" click.delegate="openEmailDialog()">\n    \t<ppc-content>Email this Job</ppc-content>\n\t</a>\n  \t<div show.bind="showEmailDialog" class="phs-email-this-job-1 ph-widget-box">  \t\t\n  \t\t<div class="modal-backdrop fade in" click.delegate="closeEmailDialog()"></div>\n\t\t<div class="dialog-block">\n\t\t\t<div class="phs-widget-heading">\n\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t<i class="icon icon-send-masseg"></i>\n\t\t\t\t</ppc-content>\n\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t<i class="icon icon-cancel" click.delegate="closeEmailDialog()"></i>\n\t\t\t\t</ppc-content>\n\t\t\t\t<h2>\n\t\t\t\t\t<ppc-content>\n\t\t\t\t\t\tEmail this Job\n\t\t\t\t\t</ppc-content>\n\t\t\t\t</h2>\n\t\t\t\t<p>\n\t\t\t\t\t<ppc-content>\n\t\t\t\t\t\tTo access this job from another computer, email this information to yourself or a friend.\n\t\t\t\t\t</ppc-content>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="widget-container">\n\t\t\t\t<div class="content-block">\n\t\t\t\t\t<form role = "form" submit.delegate = "emailThisJob()" class="form-inline">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label for = "name"><ppc-content>From Name</ppc-content></label>\n\t\t\t\t\t\t\t<input type = "text" class="form-control" value.bind = "emailJobModel.name" placeholder = "Name" autocomplete="off">\n\t\t\t\t\t\t\t<span class="error" show.bind="errors.name.error && errors.name.code == \'E101\'"><ppc-content> Name should not empty </ppc-content> </span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t  \t\t<label for = "email"><ppc-content>To Email Address</ppc-content></label>\n\t\t\t\t\t  \t\t<input type = "text" class="form-control" value.bind = "emailJobModel.email" placeholder = "Email" autocomplete="off">\n\t\t\t\t\t  \t\t<span class="error" show.bind="errors.email.error && errors.email.code == \'E101\'"><ppc-content> Email should not empty </ppc-content> </span>\n\t\t\t\t\t  \t\t<span class="error" show.bind="errors.email.error && errors.email.code == \'E102\'"><ppc-content> Please enter email </ppc-content> </span>\n\t\t\t\t\t  \t</div>\n\t\t\t\t\t  \t<button type = "submit" class="btn primary-button"><ppc-content>Send</ppc-content></button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n  \t</div>\n  \t<div show.bind="showEmailSuccess" class="phs-email-this-job-1 ph-widget-box success-hdlr">\n  \t\t<div class="modal-backdrop fade in" click.delegate="closeEmailDialog()"></div>\n  \t\t<div class="hdlr-block">\n  \t\t\t<ppc-content type="icon">\n  \t\t\t\t<i class="icon icon-check"></i>\n  \t\t\t</ppc-content>\n  \t\t\t<h3>Success!</h3>\n  \t\t\t<p>Email has successfully sent</p>\n  \t\t</div>\n  \t</div>\n</template>\n'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-range-slider-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-range-slider-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e}();a=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(r=void 0!==i.CommonService&&i.CommonService)&&r||Object])],a),t.RangeSliderService=a;var r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-range-slider",["require","exports","aurelia-framework","ph-common","./ph-range-slider-service","nouislider"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-range-slider-v1",s=function(e){function t(t,o,i){var a=e.call(this,t,o,n)||this;return a.rangeSliderService=i,a.rangeVal=0,a.rangeStart=0,a.rangeEnd=100,a.step=1,a.prevVal=0,a}return __extends(t,e),t.prototype.rangeEndChanged=function(e,t){this.rangeEnd=e},t.prototype.rangeValChanged=function(e,t){this.slider&&this.slider.set(e)},t.prototype.triggerChange=function(){},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this);var o=document.createElement("div");this.element.appendChild(o),setTimeout(function(){var e;o&&(e=r.create(o,{start:[t.rangeVal],connect:!0,range:{min:t.rangeStart,max:t.rangeEnd},step:t.step}),t.slider=e,e&&(e.on("set",function(e,o){e&&e[0]&&(e=parseInt(e[0]),t.rangeVal!=e&&(t.rangeVal=e,t.changeHandler&&t.changeHandler.apply(null,[t.rangeVal])))}),e.on("end",function(e,o){e&&e[0]&&(e=parseInt(e[0]),t.rangeVal!=e&&(t.rangeVal=e,t.changeHandler&&t.changeHandler.apply(null,[t.rangeVal])))})))},0)},t}(i.PhenomWidget);__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],s.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],s.prototype,"rangeVal",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],s.prototype,"rangeStart",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],s.prototype,"rangeEnd",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],s.prototype,"step",void 0),__decorate([o.bindable(),__metadata("design:type",Function)],s.prototype,"changeHandler",void 0),s=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,a.RangeSliderService])],s),
t.RangeSlider=s;var l}),define("text!v1/ph-range-slider.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-range-slider-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-page-state-data-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-page-state-data-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e}();a=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(r=void 0!==i.CommonService&&i.CommonService)&&r||Object])],a),t.PageStateDataService=a;var r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-page-state-data",["require","exports","aurelia-framework","ph-common","./ph-page-state-data-service","aurelia-event-aggregator"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-page-state-data-v1",s=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.commonService=o,r.pageStateDataService=i,r.eventAggregator=a,r.pageStateData={},r.subscriptions=[],r}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.handleEventSubscriptions()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.handleEventSubscriptions=function(){var e=this;this.subscriptions.push(this.eventAggregator.subscribe("pageStateData",function(t){e.pageStateData=e.commonService.getPageStateData()}))},t}(i.PhenomWidget);__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],s.prototype,"tmpl",void 0),s=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,a.PageStateDataService,r.EventAggregator])],s),t.PageStateData=s;var l}),define("text!v1/ph-page-state-data.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-page-state-data-v1/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-skills-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:""}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-skills-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SkillsService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-skills",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-skills-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-skills-v1",s=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.element=t,r.commonService=o,r.skillsService=i,r.eventAggregator=a,r.skills=[],r.selectedSkill=[],r.maxDisplayCount=3,r.displayCount=5,r.seemoretext=!0,r.isSeeMore=!1,r.seeMoreCount=2,r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.tempMaxDisplayCount=this.maxDisplayCount,this.eventAggregator.subscribe("skillsResultsEvent",function(e){t.skills=e,t.maxDisplayCount=t.tempMaxDisplayCount,t.showMoreOption()})},t.prototype.showMoreOption=function(){this.seemoretext=this.seemoretext&&this.skills.length>this.maxDisplayCount,this.seemoretext?this.isSeeMore=!0:this.isSeeMore=!1},t.prototype.selectedSkills=function(e){this.selectedSkill.push(e),this.eventAggregator.publish("selectedSkillField",this.selectedSkill)},t.prototype.removeSkills=function(e){this.skills.splice(e,1),this.skills.length==this.maxDisplayCount&&(this.isSeeMore=!1)},t.prototype.seeMore=function(){var e=this;this.trackSeeMoreClick("skills_see_more_click",{});var t=this.maxDisplayCount;this.isSeeMore?this.maxDisplayCount+=this.seeMoreCount:this.maxDisplayCount=this.seeMoreCount,this.displayCount>this.maxDisplayCount?this.isSeeMore=!0:this.isSeeMore=!1,setTimeout(function(){e.element.querySelector('[data-access-list-item="'+t+'"]')&&e.element.querySelector('[data-access-list-item="'+t+'"]').focus()},150)},t.prototype.trackSeeMoreClick=function(t,o){e.prototype.trackWidgetClick&&e.prototype.trackWidgetClick.call(this,t,o)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"maxDisplayCount",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"displayCount",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==i.CommonService&&i.CommonService)&&s||Object,r.SkillsService,a.EventAggregator])],t);var s}(i.PhenomWidget);t.Skills=s}),define("text!v1/ph-skills.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-skills-v1/default/view.html",["module"],function(e){e.exports='<template>\n\x3c!-- view html here --\x3e\n  <div>\n        <ul if.bind="skills.length">\n            <li repeat.for="eachSkill of skills" show.bind="maxDisplayCount>$index">\n                <a href="javascript:void(0)" name.bind="eachSkill" click.delegate="selectedSkills(eachSkill)"> ${eachSkill}</a>\n                <a href="javascript:void(0)" name.bind="eachSkill" click.delegate="removeSkills($index)"> x</a>\n            </li>\n        </ul>\n        <div class="actions" show.bind="isSeeMore">\n            <a ref="linkEle" href="javascript:void(0)" click.delegate="seeMore()"><ppc-content>See more</ppc-content></a>\n        </div>\n    </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!0,testing:!0}}),define("v2/ph-language-selector-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"getRegionLocales",ddoKeySaveProfile:"editProfile"}}}),define("v2/ph-language-selector-data",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetData=[{id:"1",locale:"en_uk",primaryDisplayName:"English(United Kingdom)",displayName:"English(United Kingdom)",location:"uk",locationPrimaryDisplayName:"United Kingdom",locationDisplayName:"United Kingdom",language:"en",languagePrimaryDisplayName:"English",languageDisplayName:"English",isGroup:!1,parentId:null,isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/uk/en"},{id:"2",locale:"en_us",primaryDisplayName:"English(United States)",displayName:"English(United States)",location:"us",locationPrimaryDisplayName:"United States",locationDisplayName:"United States",language:"en",languagePrimaryDisplayName:"English",languageDisplayName:"English",isGroup:!1,parentId:null,isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/us/en"},{id:"10",locale:null,primaryDisplayName:null,displayName:null,location:"ca",locationPrimaryDisplayName:"Canada",locationDisplayName:"Canada",language:null,languagePrimaryDisplayName:null,languageDisplayName:null,isGroup:!0,parentId:null,isSiteAvailable:!1,isAvailableInMenu:!0},{id:"4",locale:"en_ca",primaryDisplayName:"Canada(English)",displayName:"Canada(English)",location:"ca",locationPrimaryDisplayName:"Canada",locationDisplayName:"Canada",language:"en",languagePrimaryDisplayName:"English",languageDisplayName:"English",isGroup:!1,parentId:"10",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/ca/en"},{id:"3",locale:"fr_ca",primaryDisplayName:"Canada(French)",displayName:"Canada(French)",location:"ca",locationPrimaryDisplayName:"Canada",locationDisplayName:"Canada",language:"French",languagePrimaryDisplayName:"French",languageDisplayName:"French",isGroup:!1,parentId:"10",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/ca/fr"},{id:"5",locale:"es_latam",primaryDisplayName:"Latam",displayName:"Latam",location:"es",locationPrimaryDisplayName:"Latam",locationDisplayName:"Latam",language:"Latam",languagePrimaryDisplayName:"Latam",languageDisplayName:"Latam",isGroup:!1,parentId:null,isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/latam/es"},{id:"6",locale:null,primaryDisplayName:null,displayName:null,location:"apac",locationPrimaryDisplayName:"Asia Pacific",locationDisplayName:"Asia Pacific",language:null,languagePrimaryDisplayName:null,languageDisplayName:null,isGroup:!0,parentId:null,isSiteAvailable:!1,isAvailableInMenu:!0},{id:"7",locale:"en_apac",primaryDisplayName:"Asia Pacific",displayName:"Asia Pacific",location:"apac",locationPrimaryDisplayName:"Asia Pacific",locationDisplayName:"Asia Pacific",language:"English",languagePrimaryDisplayName:"English",languageDisplayName:"English",isGroup:!1,parentId:"6",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/en"},{id:"8",locale:"auen_apac",primaryDisplayName:"Australia",displayName:"Australia",location:"au",locationPrimaryDisplayName:"Australia",locationDisplayName:"Australia",language:"English",languagePrimaryDisplayName:"Australia",languageDisplayName:"Australia",isGroup:!1,parentId:"6",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"9",locale:"en_emea",primaryDisplayName:"EMEA",displayName:"EMEA",location:"emea",locationPrimaryDisplayName:"EMEA",locationDisplayName:"EMEA",language:"English",languagePrimaryDisplayName:"EMEA",languageDisplayName:"EMEA",isGroup:!1,parentId:null,isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/emea/en"},{id:"12",locale:null,primaryDisplayName:null,displayName:null,location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:null,languagePrimaryDisplayName:null,languageDisplayName:null,isGroup:!0,parentId:null,isSiteAvailable:!1,isAvailableInMenu:!0},{id:"13",locale:"auen_eu",primaryDisplayName:"English",displayName:"English",location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:"English",languagePrimaryDisplayName:"England",languageDisplayName:"England",isGroup:!1,parentId:"12",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"14",locale:"aufr_eu",primaryDisplayName:"French",displayName:"French",location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:"English",languagePrimaryDisplayName:"French",languageDisplayName:"French",isGroup:!1,parentId:"12",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"15",locale:"auir_eu",primaryDisplayName:"Irish",displayName:"Irish",location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:"English",languagePrimaryDisplayName:"Irish",languageDisplayName:"Irish",isGroup:!1,parentId:"12",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"16",locale:"auirr_eu",primaryDisplayName:"Irish2",displayName:"Irish2",location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:"English",languagePrimaryDisplayName:"Irish2",languageDisplayName:"Irish2",isGroup:!1,parentId:"13",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"17",locale:"auis_eu",primaryDisplayName:"Irish1",displayName:"Irish1",location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:"English",languagePrimaryDisplayName:"Irish1",languageDisplayName:"Irish1",isGroup:!1,parentId:"13",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"18",locale:"gr_eu",primaryDisplayName:"german",displayName:"german",location:"eu",locationPrimaryDisplayName:"europe",locationDisplayName:"europe",language:"English",languagePrimaryDisplayName:"Irish",languageDisplayName:"Irish",isGroup:!1,parentId:"17",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"},{id:"19",locale:"ee_uk",primaryDisplayName:"Eng",displayName:"Eng",location:"uk",locationPrimaryDisplayName:"United Kingdom",locationDisplayName:"United Kingdom",language:"English",languagePrimaryDisplayName:"Eng",languageDisplayName:"Eng",isGroup:!1,parentId:"1",isSiteAvailable:!0,isAvailableInMenu:!0,siteUrl:"http://ipgmediabrands.dev.phenompro.com/apac/auen"}]});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-language-selector-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.LanguageSelectorService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v2/ph-language-selector",["require","exports","aurelia-framework","ph-common","./ph-language-selector-config","./ph-language-selector-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-language-selector-v2",s="modal-open",l=function(e){function t(t,o,i,a){var r=e.call(this,t,o,n)||this;return r.element=t,r.commonService=o,r.languageSelectorService=i,r.searchFilterValueConverter=a,r.isErrorMsgReqd=!1,r.samePage=!1,r.sortOption="alphabet",r.sortType="locale",r.saveProfile=!1,r.showErrorMsg=!1,r.languageCount=[],r.roots=[],r.searchArray=[],r.levelSize=0,r.currentLevel=0,r.isSelected=!1,r.filterTodisplay=!1,r.isshowDropDown=!1,r.isDropDown=!1,r.openModal=function(){r.isDropDown=!0,r.isshowDropDown=!0,document.body.classList.contains(s)||document.body.classList.add(s)},r.closeModal=function(){r.isDropDown=!1,r.isshowDropDown=!1,document.body.classList.contains(s)&&document.body.classList.remove(s)},r}return __extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.languageSelectorService.makeDDORequest(n,a.WidgetConfig.v2.ddoKey).then(function(o){o&&o.data?(t.flagResponse=o.data||[],t.flagResponse.forEach(function(e){e.id&&(e.id=parseInt(e.id))}),"alphabet"==t.sortOption&&t.flagResponse.sort(t.getSortOrder(t.sortType)),"source"==t.sortOption&&t.flagResponse.sort(t.getSortOrder("id")),t.getTreeStructure()):t.handleError(""),e.prototype.hideLoader.call(t),t.languageChanged(t.choosenLanguage,!0,!0)},function(e){new Error(e),t.handleError("")}),document.addEventListener("click",function(e){for(var o=e.target,i=!0;o;)if(null==(o=o.parentElement)||o.className&&-1==o.className.indexOf("phs-lang-select-area"))i=!0;else if(o.className.indexOf("phs-lang-select-area")>=0){i=!1;break}i&&(t.isDropDown=!1,t.isshowDropDown=!1)},!1)},t.prototype.getTreeStructure=function(){var e,t,o=this,a={};for(e=0;e<this.flagResponse.length;e+=1)this.flagResponse[e].siteUrl&&this.flagResponse[e].siteUrl.length>0&&(this.flagResponse[e].siteUrl=this.checkForUrlPath(this.flagResponse[e].siteUrl)),this.flagResponse[e].isAvailableInMenu&&(a[this.flagResponse[e].id]=e,this.flagResponse[e].children=[]);for(e=0;e<this.flagResponse.length;e+=1){var r=this.commonService.getLocale()||"";this.flagResponse[e].isAvailableInMenu&&(this.flagResponse[e].locale==r&&(this.choosenLanguage=this.flagResponse[e]),this.flagResponse[e].location==this.commonService.getCountry()&&(this.choosenLocation=this.flagResponse[e]),t=this.flagResponse[e],this.roots.push(t),this.searchArray.push(t),null!==t.parentId&&this.flagResponse[a[t.parentId]]&&this.flagResponse[a[t.parentId]].children.push(t))}this.roots.forEach(function(e){var t=e.locale.split("_")[0];-1==o.languageCount.indexOf(t)&&o.languageCount.push(t)}),i.logger.debug("payload location ::"+this.roots),this.roots.forEach(function(e){var t=o.getDepth(e);e.level=t,e.displayName=e.displayName||""}),this.searchArray.forEach(function(e){e.displayName=e.displayName||""}),this.createUrl(),i.logger.debug(this.roots)},t.prototype.getDepth=function(e){var t=this,o=1;return e.children&&e.children.length>0&&(this.flagResponse.sort(this.getSortOrder("locale")),e.children.forEach(function(e){var i=t.getDepth(e)+1;o=Math.max(i,o)})),o},t.prototype.getSortOrder=function(e){return function(t,o){return t[e]>o[e]?1:t[e]<o[e]?-1:0}},t.prototype.toggleDropdown=function(e){e.stopPropagation(),this.isshowDropDown=!this.isshowDropDown},t.prototype.onBlurHandler=function(e,t){var o=this;return t?(this.blurTimers&&clearTimeout(this.blurTimers),this.isDropDown=!0,this.isshowDropDown=!0):(this.blurTimers&&clearTimeout(this.blurTimers),this.blurTimers=setTimeout(function(){o.isDropDown=!1,o.isshowDropDown=!1},300)),!0},t.prototype.sortArray=function(e){this.roots=this.searchFilterValueConverter.toView(this.searchArray,e,"displayName")},t.prototype.clearSearch=function(){this.filterKey="",this.sortArray(""),this.isshowDropDown=!0,e.prototype.focusElement.call(this,".ph-a11y-search-area input",100)},t.prototype.checkForUrlPath=function(e){var t=this.getUrl(e);return t.pathname&&null!=t.pathname&&""!=t.pathname&&"/"!=t.pathname?e:e+"/home"},t.prototype.getUrl=function(e){var t=document.createElement("a");return t.href=e,{protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}},t.prototype.languageChanged=function(t,o,i){if(!t||o)return!0;var a={};a.localeName=t.locale,!i&&e.prototype.trackWidgetClick.call(this,"locale",a),this.saveProfile&&this.saveProfileLocale(t);var r=t.siteUrl;this.samePage&&(r+=location.pathname,location.search&&location.search.trim().length>0&&(r+=location.search)),location.assign(r)},t.prototype.saveProfileLocale=function(e){return __awaiter(this,void 0,void 0,function(){var t,o,i;return __generator(this,function(r){switch(r.label){case 0:return t=a.WidgetConfig.v2.ddoKeySaveProfile,o={editType:"accountDetails",accountDetails:{preferredLocale:e.locale}},[4,this.languageSelectorService.makeDDORequest(n,t,o)];case 1:if(i=r.sent(),200==i.status||"SUCCESS"===i.status.toUpperCase())return[2];throw new Error("Error in saving profile locale")}})})},t.prototype.createUrl=function(){for(var e=0;e<this.roots.length;e++)if(this.roots[e]){var t=this.roots[e].siteUrl;this.samePage&&(t+=location.pathname,location.search&&location.search.trim().length>0&&(t+=location.search)),this.roots[e].locationUrl=t}},t.prototype.handleError=function(t){e.prototype.hideLoader.call(this),this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getFieldOptions=function(e){var t=this,o=this.element.querySelector(".ph-a11y-dropdown-box .ph-a11y-search-area input");return o&&o.hasAttribute("aria-activedescendant")&&o.removeAttribute("aria-activedescendant"),this.roots&&(this.roots=this.searchArray.reduce(function(e,t){return t.primaryDisplayName&&t.displayName&&e.push(t),e},[]),this.roots=this.searchFilterValueConverter.toView(this.roots,this.filterKey,"displayName")),this.languageCount=[],this.roots.forEach(function(e){var o=e.locale.split("_")[0];-1==t.languageCount.indexOf(o)&&t.languageCount.push(o)}),this.isshowDropDown=!0,this.roots},t.prototype.setFieldValue=function(e,t){if(this.roots.length&&this.roots[t]){this.filterKey=this.roots[t].displayName;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o),this.isshowDropDown=!1}},t.prototype.getActiveIndex=function(e){var t=this,o=this.roots.findIndex(function(e){return e.displayName==t.filterKey});return this.filterKey||(o=this.roots.findIndex(function(e){return e.locationDisplayName==t.choosenLanguage.locationDisplayName})),o},t.prototype.clearFieldValue=function(e){},t.prototype.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"samePage",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"sortOption",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"sortType",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"saveProfile",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,r.LanguageSelectorService,"function"==typeof(c=void 0!==i.SearchFilterValueConverter&&i.SearchFilterValueConverter)&&c||Object])],t);var l,c}(i.PhenomWidget);t.LanguageSelector=l}),define("text!v2/ph-language-selector.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v2/views/ph-language-selector-v2/default/view.html",["module"],function(e){
e.exports='<template>\n    <div class="phs-lang-select-area ph-widget-box">\n        <span class="language-block">\n            <button click.delegate="isshowDropDown = !isshowDropDown" blur.trigger="onBlurHandler($event, false)">\n                <span class="flag flag-${choosenLanguage.location}" data-ph-at-id="selected-country-flag"></span>\n                <span class="selectedCountry" data-ph-at-id="selected-country">\n                    ${choosenLanguage.locationDisplayName}\n                </span>\n            </button>\n        </span>\n\n        <div class="dropdown-list" show.bind="isshowDropDown">\n            <input type="text" name="keyword" value.bind="filterKey" focus.trigger="onBlurHandler($event, true)" blur.trigger="onBlurHandler($event, false)"\n            />\n            <div class="dropdown-list-item" repeat.for="each of roots |searchFilter:filterKey:\'displayName\'">\n                <div show.bind="each.locale != choosenLanguage.locale">\n                    <div show.bind="each.children.length == 0">\n                        <button click.delegate="languageChanged(each)" data-ph-at-displayname-text="${each.displayName}">\n                            <span class="flag flag-${each.location}" data-ph-at-id="selected-country-flag"></span>\n                            <span class="selectedCountry" data-ph-at-id="selected-country">\n                                ${each.displayName}\n                            </span>\n                        </button>\n                    </div>\n\n                    <div show.bind="each.children.length == 2">\n                        <div show.bind="each.location != choosenLocation.location">\n                            <button click.delegate="each.isInnerDropdown = !each.isInnerDropdown" focus.trigger="onBlurHandler($event, true)" blur.trigger="onBlurHandler($event, false)">\n                                <span class="flag flag-${each.location}" data-ph-at-id="selected-country-flag"></span>\n                                <span data-ph-at-id="selected-country">\n                                    ${each.locationDisplayName}\n                                </span>\n                                <i class="icon ${each.isInnerDropdown ? \'icon-up-arrow\' : \'icon-down-arrow\'}"></i>\n                            </button>\n                            <div class="inner-dropdown" repeat.for="eachoption of each.children" show.bind="each.isInnerDropdown">\n                                <div class="dropdown-list-item" show.bind="eachoption.children.length == 0 && eachoption.locale != choosenLanguage.locale">\n                                    <button click.delegate="languageChanged(eachoption)" data-ph-at-display-name-text="${eachoption.displayName}" data-ph-at-language-display-name-text="${eachoption.languageDisplayName}">\n                                        <span show.bind="!isGroup">\n                                            ${eachoption.languageDisplayName}\n                                        </span>\n                                        <span show.bind="isGroup">\n                                            ${eachoption.displayName}\n                                        </span>\n\n                                    </button>\n                                </div>\n                                \x3c!-- inner1 loop for 2 children --\x3e\n                                <div show.bind="eachoption.children.length == 2">\n                                    <div show.bind="eachoption.location != choosenLocation.location ">\n                                        <button click.delegate="eachoption.isInnerDropdown1 = !eachoption.isInnerDropdown1" focus.trigger="onBlurHandler($event, true)"\n                                            blur.trigger="onBlurHandler($event, false)">\n                                            <span class="flag flag-${eachoption.location}" data-ph-at-id="selected-country-flag"></span>\n                                            <span data-ph-at-id="selected-country">\n                                                ${eachoption.locationDisplayName}\n                                            </span>\n                                            <i class="icon ${eachoption.isInnerDropdown1 ? \'icon-up-arrow\' : \'icon-down-arrow\'}"></i>\n\n                                        </button>\n                                        <div class="inner-dropdown" repeat.for="eachoption1 of eachoption.children" show.bind="eachoption.isInnerDropdown1">\n                                            <div class="dropdown-list-item" show.bind="eachoption1.locale != choosenLanguage.locale && !isGroup">\n                                                <button click.delegate="languageChanged(eachoption1)" data-ph-at-display-name-text="${eachoption1.displayName}" data-ph-at-language-display-name-text="${eachoption1.languageDisplayName}">\n                                                    <span show.bind="!isGroup">\n                                                        ${eachoption1.languageDisplayName}\n                                                    </span>\n                                                    <span show.bind="isGroup">\n                                                        ${eachoption1.displayName}\n                                                    </span>\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div show.bind="eachoption.location == choosenLocation.location ">\n                                        <div repeat.for="eachoption1 of eachoption.children">\n                                            <button></button> click.delegate="languageChanged(eachoption1)" data-ph-at-display-name-text="${eachoption1.displayName}"\n                                            if.bind="eachoption1.locale != choosenLanguage.locale"> ${eachoption1.displayName}\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                                \x3c!-- inner loop for 2 children end --\x3e\n                                <div show.bind="eachoption.children.length > 2">\n                                    <button click.delegate="eachoption.isInnerDropdown1 = !eachoption.isInnerDropdown1" focus.trigger="onBlurHandler($event, true)"\n                                        blur.trigger="onBlurHandler($event, false)">\n                                        <span class="flag flag-${eachoption.location}" data-ph-at-id="selected-country-flag"></span>\n                                        <span data-ph-at-id="selected-country">\n                                            ${eachoption.locationDisplayName}\n                                        </span>\n                                        <i class="icon ${eachoption.isInnerDropdown1 ? \'icon-up-arrow\' : \'icon-down-arrow\'}"></i>\n\n                                    </button>\n                                    <div class="inner-dropdown" repeat.for="eachoption1 of eachoption.children" show.bind="eachoption.isInnerDropdown1">\n                                        <div class="dropdown-list-item" show.bind="eachoption1.locale != choosenLanguage.locale && !isGroup">\n                                            <button click.delegate="languageChanged(eachoption1)" data-ph-at-display-name-text="${eachoption1.displayName}" data-ph-at-language-display-name-text="${eachoption1.languageDisplayName}">\n                                                <span show.bind="!isGroup">\n                                                    ${eachoption1.languageDisplayName}\n                                                </span>\n                                                <span show.bind="isGroup">\n                                                    ${eachoption1.displayName}\n                                                </span>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                                \x3c!-- inner loop for greater than 2 children ends --\x3e\n                            </div>\n                        </div>\n                        <div show.bind="each.location == choosenLocation.location ">\n                            <div repeat.for="eachoption of each.children">\n                                <button click.delegate="languageChanged(eachoption)" data-ph-at-display-name-text="${eachoption.displayName}" data-ph-at-language-display-name-text="${eachoption.languageDisplayName}"\n                                    if.bind="eachoption.locale != choosenLanguage.locale">\n                                    ${eachoption.displayName}\n                                </button>\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div show.bind="each.children.length > 2">\n                        <button click.delegate="each.isInnerDropdown = !each.isInnerDropdown" focus.trigger="onBlurHandler($event, true)" blur.trigger="onBlurHandler($event, false)">\n                            <span class="flag flag-${each.location}" data-ph-at-id="selected-country-flag"></span>\n                            <span data-ph-at-id="selected-country">\n                                ${each.locationDisplayName}\n                            </span>\n                            <i class="icon ${each.isInnerDropdown ? \'icon-up-arrow\' : \'icon-down-arrow\'}"></i>\n\n                        </button>\n                        <div class="inner-dropdown" repeat.for="eachoption of each.children" show.bind="each.isInnerDropdown">\n                            <div class="dropdown-list-item" show.bind="eachoption.children.length == 0 && eachoption.locale != choosenLanguage.locale">\n                                <button click.delegate="languageChanged(eachoption)" data-ph-at-display-name-text="${eachoption.displayName}" data-ph-at-language-display-name-text="${eachoption.languageDisplayName}">\n                                    <span show.bind="!isGroup">\n                                        ${eachoption.languageDisplayName}\n                                    </span>\n                                    <span show.bind="isGroup">\n                                        ${eachoption.displayName}\n                                    </span>\n\n                                </button>\n                            </div>\n                            <div show.bind="eachoption.children.length == 2">\n                                <div show.bind="eachoption.location != choosenLocation.location ">\n                                    <button click.delegate="eachoption.isInnerDropdown1 = !eachoption.isInnerDropdown1" focus.trigger="onBlurHandler($event, true)"\n                                        blur.trigger="onBlurHandler($event, false)">\n                                        <span class="flag flag-${eachoption.location}" data-ph-at-id="selected-country-flag"></span>\n                                        <span data-ph-at-id="selected-country">\n                                            ${eachoption.locationDisplayName}\n                                        </span>\n                                        <i class="icon ${eachoption.isInnerDropdown1 ? \'icon-up-arrow\' : \'icon-down-arrow\'}"></i>\n\n                                    </button>\n                                    <div class="inner-dropdown" repeat.for="eachoption1 of eachoption.children" show.bind="eachoption.isInnerDropdown1">\n                                        <div class="dropdown-list-item" show.bind="eachoption1.locale != choosenLanguage.locale && !isGroup">\n                                            <button click.delegate="languageChanged(eachoption1)" data-ph-at-display-name-text="${eachoption1.displayName}" data-ph-at-language-display-name-text="${eachoption1.languageDisplayName}">\n                                                <span show.bind="!isGroup">\n                                                    ${eachoption1.languageDisplayName}\n                                                </span>\n                                                <span show.bind="isGroup">\n                                                    ${eachoption1.displayName}\n                                                </span>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div show.bind="eachoption.location == choosenLocation.location ">\n                                    <div repeat.for="eachoption1 of eachoption.children">\n                                        <button click.delegate="languageChanged(eachoption1)" data-ph-at-display-name-text="${eachoption1.displayName}" if.bind="eachoption1.locale != choosenLanguage.locale">\n                                            ${eachoption1.displayName}\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                            \x3c!-- inner loop for 2 children end --\x3e\n                            <div show.bind="eachoption.children.length > 2">\n                                <button click.delegate="eachoption.isInnerDropdown1 = !eachoption.isInnerDropdown1" focus.trigger="onBlurHandler($event, true)"\n                                    blur.trigger="onBlurHandler($event, false)">\n                                    <span class="flag flag-${eachoption.location}" data-ph-at-id="selected-country-flag"></span>\n                                    <span data-ph-at-id="selected-country">\n                                        ${eachoption.locationDisplayName}\n                                    </span>\n                                    <i class="icon ${eachoption.isInnerDropdown1 ? \'icon-up-arrow\' : \'icon-down-arrow\'}"></i>\n\n                                </button>\n                                <div class="inner-dropdown" repeat.for="eachoption1 of eachoption.children" show.bind="eachoption.isInnerDropdown1">\n                                    <div class="dropdown-list-item" show.bind="eachoption1.locale != choosenLanguage.locale && !isGroup">\n                                        <button click.delegate="languageChanged(eachoption1)" data-ph-at-display-name-text="${eachoption1.displayName}" data-ph-at-language-display-name-text="${eachoption1.languageDisplayName}">\n                                            <span show.bind="!isGroup">\n                                                ${eachoption1.languageDisplayName}\n                                            </span>\n                                            <span show.bind="isGroup">\n                                                ${eachoption1.displayName}\n                                            </span>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                            \x3c!-- inner loop for greater than 2 children ends --\x3e\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n\n        </div>\n    </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-category-overview-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"categories",ddoKeyMasterData:"categoryMasterData",landingpageddoKey:"getBusinessRules",ddoKeyMasterDatav2:"categoryMasterDataV2"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-category-overview-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.getDefaultImg=function(e){return this.commonService.getImageUrl(e)},e.prototype.getCategories=function(e,t){return this.commonService.getDDO(e,t,{field:"category",sub_field:"internalCategoryId"}).then(function(e){return e.categories&&e.categories.data&&e.categories.data.category})},e.prototype.getLandingPageCategories=function(e,t,o){var i=this,a={field:"category",sub_field:"internalCategoryId",condition:o.landingPageCondition,rk:o.rk};return new Promise(function(o,r){var n=i.commonService.getCachedDDO("eagerLoadCategories",e);n?o(n.data.category):i.commonService.getDDO(e,t,a).then(function(e){o(e.categories&&e.categories.data&&e.categories.data.category)})})},e.prototype.getSubCategories=function(e,t,o,i){return this.commonService.getDDO(e,t,o).then(function(e){return e[t].data.category[i]||[]})},e.prototype.getCategoryMasterData=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e.prototype.getLandingpageKey=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CategoryOverviewService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-category-overview",["require","exports","aurelia-framework","ph-common","./ph-category-overview-config","aurelia-event-aggregator","./ph-category-overview-service"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-category-overview-v3",l=function(e){function t(t,o,i,a,r){var n=e.call(this,t,o,s)||this;return n.element=t,n.categoryOverviewService=i,n.localStorage=a,n.eventAggregator=r,n.mode="all",n.cardsPerSlide=4,n.cardsPerRow=3,n.rowCount=2,n.modeOptions={},n.type="category",n.categoryClass="",n.showErrorMsg=!1,n.isKeyPress=!1,n.isKeyPressEnabled=!1,n._defaultModeOptions={autoPlay:!1,interval:5e3,next:!0,prev:!0,indicators:!0,pauseOnHover:!1,loop:!1,viewMoreMode:"evenMore",navPosition:"center"},n._changeSlide=!0,n.cardStyleClassSuffix=3,n.gridColSize=12,n.viewEvenMoreCount=!0,n.hideViewAll=!0,n.hideViewEvenMore=!0,n.hideViewNext=!0,n.hideLess=!0,n.placeVal="",n.subscriptions=[],n}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this._updateModeOptions(),this.handleMouseHover(),this.entriesPerSlide=this.cardsPerSlide,this.asDependent&&e.prototype.hideContainer.call(this)},t.prototype.created=function(){var t=this;this.localStorage.getItem("categories")||this.localStorage.setItem("categories",[]),this.rk&&this.rk.length?this.getLandingPageKey().then(function(e){e&&e.data&&e.data[t.rk]?(t.landingPageCondition=e.data[t.rk].condition,t.getLandingPageCategories()):t.handleError("")}):this.type&&"subCategory"==this.type?this.getSubCategories():this.getCategories(),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(o){t.searchKeyword=o.searchKeyword,t.placeVal=o.placeVal,e.prototype.showContainer.call(t)}))},t.prototype.getLandingPageKey=function(){if(this.rk&&this.rk.length>0){var e={},t={};return t.landingPageKeys=[this.rk],e.pageIdentifier=t,this.categoryOverviewService.getLandingpageKey(s,a.WidgetConfig.v3.landingpageddoKey,e)}},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getLandingPageCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var o={landingPageCondition:this.landingPageCondition,rk:this.rk};this.categoryOverviewService.getLandingPageCategories(s,a.WidgetConfig.v3.ddoKey,o).then(function(e){t.categoryViewModel=e,t.getCategoryMasterData(e)})},t.prototype.getDefaultImg=function(e){return this.categoryOverviewService.getDefaultImg(e)},t.prototype.getCategories=function(){var t=this;e.prototype.unhideLoader.call(this),this.categoryOverviewService.getCategories(s,a.WidgetConfig.v3.ddoKey).then(function(e){t.categoryViewModel=e,t.getCategoryMasterData(e)})},t.prototype.getSubCategories=function(){var t=this;e.prototype.unhideLoader.call(this);var o={};o.field="category",o.sub_field="subCategory",this.categoryOverviewService.getSubCategories(s,a.WidgetConfig.v3.ddoKey,o,this.category).then(function(e){t.getCategoryMasterData(e,t.type)})},t.prototype.getCategoryMasterData=function(t,o){var i=this;"subCategory"==o?(this.categories=t,this.categoryViewModel=this.categories,this.cardStyleClassSuffix=this.gridColSize/this.cardsPerRow,this.handleCategoryView(),"slider"==this.mode&&(e.prototype.getSlideData.call(this),this.modeOptions.autoPlay&&this.autoplay()),this.categories.forEach(function(e){e.key||(e.key=e.category)}),e.prototype.hideLoader.call(this)):this.categoryOverviewService.getCategoryMasterData(s,a.WidgetConfig.v3.ddoKeyMasterDatav2).then(function(o){var a,r,n=[],s=[];if(o=o||{},o&&o.orderType&&"default"!=o.orderType?"custom"==o.orderType&&(a=o.categories||[],r=t||[]):(a=t||[],r=o.categories||[]),a.length){var l=void 0,c=void 0,d=void 0,p=void 0,h=void 0;for(c=0;c<a.length;c++)n.push(a[c].internalId);for(d=0;d<r.length;d++)s.push(r[d].internalId);for(p=0;p<n.length;p++)if(a[p].isRemoveEle=!0,-1!=(l=s.indexOf(n[p]))){a[p].isRemoveEle=!1,h=r[l];for(var u in h)(void 0==a[p][u]&&h.hasOwnProperty(u)||h.hasOwnProperty(u)&&!a[p].hasOwnProperty(u))&&(a[p][u]=h[u])}if(!i.showEmptyCategories&&"default"!=o.orderType){for(var g=[],f=0;f<a.length;f++)a[f].isRemoveEle||g.push(a[f]);a=g}a.length&&(i.categoryStaticContent=a,i.categories=a,i.categoryViewModel=a,i.cardStyleClassSuffix=i.gridColSize/i.cardsPerRow,i.handleCategoryView(),"slider"==i.mode&&(e.prototype.getSlideData.call(i),i.modeOptions.autoPlay&&i.autoplay()),i.categories.forEach(function(e){e.key||(e.key=e.category)}))}(o||o.categories||o.categories.length)&&(i.categoryViewModel.length||i.showEmptyCategories)||i.handleError(""),e.prototype.hideLoader.call(i)})},t.prototype.autoplay=function(){var t=this;this.modeOptions.autoPlay&&(this._timeout=setTimeout(function(){t._changeSlide&&(t.currSlide>=0&&t.currSlide<t.totalSlides-1?(e.prototype.goToNextSlide.call(t),t.autoplay()):t.currSlide==t.totalSlides-1&&t.modeOptions.loop&&(t.currSlide=-1,e.prototype.goToNextSlide.call(t),t.autoplay()))},this.modeOptions.interval||5e3))},t.prototype.handleMouseHover=function(){var e=this;("slider"!=this.mode||this.modeOptions.pauseOnHover)&&(this.element.addEventListener("mouseenter",function(t){e._changeSlide=!1}),this.element.addEventListener("mouseleave",function(t){e._changeSlide=!0,clearTimeout(e._timeout),e.currSlide>=0&&e.currSlide<e.totalSlides&&e.autoplay()}))},t.prototype.handleCategoryView=function(){var e=this.setCategoryCount();this.categoryViewModel.length&&"showMore"==this.mode&&this.categoryViewModel.length>e&&this.setShowMoreInitialStates(this.modeOptions.viewMoreMode)},t.prototype._updateModeOptions=function(){for(var e in this._defaultModeOptions)this._defaultModeOptions.hasOwnProperty(e)&&!this.modeOptions.hasOwnProperty(e)&&(this.modeOptions[e]=this._defaultModeOptions[e])},t.prototype.setShowMoreInitialStates=function(e){var t=this.setCategoryCount();this.categoryViewModel=this.categories.slice(0,t),"all"==e?this.hideViewAll=!1:"evenMore"==e?(this.hideViewEvenMore=!1,this.viewEvenMoreCount=!0):"viewNext"==e&&(this.hideViewNext=!1)},t.prototype.setCategoryCount=function(){return this.cardsPerRow*this.rowCount},t.prototype.viewLess=function(){var e=this;setTimeout(function(){e.setShowMoreInitialStates(e.modeOptions.viewMoreMode),e.hideLess=!0,!e.isKeyPress&&e.isKeyPressEnabled||(e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access="showMore"]')&&e.element.querySelector('[data-access="showMore"]').focus()},350))},150)},t.prototype.viewAll=function(){this.setCategoryCount(),this.categoryViewModel=this.categories,this.hideViewAll=!0,this.hideLess=!1},t.prototype.viewEvenMoreOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewNextOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewLessOnKeyup=function(e){return 13===e.keyCode&&(this.isKeyPress=!0,this.isKeyPressEnabled=!0),!0},t.prototype.viewEvenMore=function(){var e=this;setTimeout(function(){if(e.viewEvenMoreCount)e.viewNext(),e.viewEvenMoreCount=!1;else if(e.isKeyPress||!e.isKeyPressEnabled){e.isKeyPress=!1;var t=e.categories.length-(e.categories.length-e.categoryViewModel.length);setTimeout(function(){e.element.querySelector('[data-access-list-item="'+t+'"]')&&e.element.querySelector('[data-access-list-item="'+t+'"]').focus()},150),e.categoryViewModel=e.categories,e.hideViewEvenMore=!0,e.hideLess=!1}},150)},t.prototype.viewNext=function(){var e=this;setTimeout(function(){var t=e.setCategoryCount(),o=e.categoryViewModel.length;!e.isKeyPress&&e.isKeyPressEnabled||(e.isKeyPress=!1,setTimeout(function(){e.element.querySelector('[data-access-list-item="'+o+'"]')&&e.element.querySelector('[data-access-list-item="'+o+'"]').focus()},150));var i=e.categories.length-e.categoryViewModel.length;t<i?(i=t,e.categoryViewModel=e.categories.slice(0,e.categoryViewModel.length+i)):(e.categoryViewModel=e.categories,e.hideViewNext=!0,e.hideViewEvenMore=!0,e.hideLess=!1)},150)},t.prototype.getContextData=function(){return this.categories},t.prototype.goToNextSlide=function(){this.currSlide==this.totalSlides-1&&this.modeOptions.loop&&(this.currSlide=-1),e.prototype.goToNextSlide.call(this)},t.prototype.goToPrevSlide=function(){0==this.currSlide&&this.modeOptions.loop&&(this.currSlide=this.totalSlides),e.prototype.goToPrevSlide.call(this)},t.prototype.handleError=function(t){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getUrl=function(t,o,i,a,r){return this.rk&&this.rk.length&&(a="&rk="+this.rk),e.prototype.getUrl.call(this,t,o,i,a,r)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideSubTitle",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileImage",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideTileHoverImage",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideBlurb",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideJobCount",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerSlide",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"cardsPerRow",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"rowCount",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"hideWhenEmpty",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"modeOptions",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"type",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"categoryClass",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"asDependent",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"showEmptyCategories",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"rk",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,n.CategoryOverviewService,"function"==typeof(c=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&c||Object,r.EventAggregator])],t);var l,c}(i.PhenomWidget);t.CategoryOverview=l}),define("text!v3/ph-category-overview.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-category-overview-v3/default/view.html",["module"],function(e){
e.exports='<template>\n    <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" if.bind="showLoader"></div>\n    <div class="phs-category-area ph-widget-box" if.bind="!showLoader">\n        <div class="widget-container">\n            <div class="phs-widget-heading">\n                <h2 aria-label="Browse by Job Categories" if.bind="!hideTitle" tabindex="0">\n                    <ppc-content key="literal-1483436066244-30">\n                        Explore your future\n                    </ppc-content>\n                </h2>\n                <p if.bind="!hideSubTitle" tabindex="0">\n                    <ppc-content>\n                        We give you the tools you need to discover your perfect job match, and the freedom and support to take your career to the next level.\n                    </ppc-content>\n                </p>\n            </div>\n            <div class="content-block">\n                <div class="${mode}">\n                    <div class="row category-column-${cardsPerRow}">\n                        <div if.bind="mode == \'slider\'" class="col-md-${cardStyleClassSuffix} content-list-item" repeat.for="category of currSlideData">\n                            <a ph-tevent="job_category_click" ref="linkEle" href="${getUrl(linkEle, \'category\', category)}" class="category-${$index + 1} list-item-link">\n                                <div class="category-info">\n                                    <h3 class="title" title.bind="category.key">${category.key}</h3>\n                                    <p if.bind="category.total_count > 1 && !hideJobCount">${category.total_count}\n                                        <ppc-content key="literal-146">Jobs</ppc-content>\n                                    </p>\n                                    <p if.bind="category.total_count == 1 && !hideJobCount">${category.total_count}\n                                        <ppc-content key="literal-147">Job</ppc-content>\n                                    </p>\n                                </div>\n                            </a>\n\n                        </div>\n\n                        <div if.bind="mode != \'slider\'" class="col-md-${cardStyleClassSuffix} content-list-item" repeat.for="category of categoryViewModel">\n                            <a ph-tevent="job_category_click" ref="linkEle" href="${getUrl(linkEle, \'category\', category)}" class="category-${$index + 1} list-item-link">\n                                <div class="category-info">\n                                    <h3 class="title" title.bind="category.key">${category.key}</h3>\n                                    <p if.bind="category.total_count > 1 && !hideJobCount">${category.total_count}\n                                        <ppc-content key="literal-146">Jobs</ppc-content>\n                                    </p>\n                                    <p if.bind="category.total_count == 1 && !hideJobCount">${category.total_count}\n                                        <ppc-content key="literal-147">Job</ppc-content>\n                                    </p>\n                                </div>\n                            </a>\n                        </div>\n                    </div>\n\n                    <div class="actions" if.bind="mode != \'slider\'">\n                        <a ph-tevent="job_category_view_even_more_click" ref="linkEle" href="javascript:void(0)" role="button"  aria-label="View Even More Slides" title="View Even More Slides" class="action-btn" click.delegate="viewEvenMore()" if.bind="!hideViewEvenMore">\n                            <ppc-content key="literal-148">\n                                View Even More\n                            </ppc-content>\n                        </a>\n                        <a ph-tevent="job_category_view_next_click" ref="linkEle" href="javascript:void(0)" role="button" aria-label="View Next Slide" title="View Next Slide"  class="action-btn" click.delegate="viewNext()" if.bind="!hideViewNext">\n                            <ppc-content key="literal-148">\n                                View Next\n                            </ppc-content>\n                        </a>\n                        <a ph-tevent="job_category_view_all_click" ref="linkEle" href="javascript:void(0)" role="button" aria-label="View All Slides" title="View All Slides"  class="action-btn" click.delegate="viewAll()" if.bind="!hideViewAll">\n                            <ppc-content key="literal-148">\n                                View All\n                            </ppc-content>\n                        </a>\n                        <a ph-tevent="job_category_show_less_click" ref="linkEle" href="javascript:void(0)" role="button" class="action-btn" aria-label="Show Less Slide" title="Show Less Slide"  click.delegate="viewLess()" if.bind="!hideLess">\n                            <ppc-content key="literal-149">\n                                Show Less\n                            </ppc-content>\n                        </a>\n                    </div>\n\n\n                    \x3c!--show slider actions when mode is slider and mode option loop is true--\x3e\n\n                    <div class="slider-actions ${modeOptions.navPosition}" if.bind="mode == \'slider\' && !modeOptions.loop">\n                    \n                        <ppc-content type="link">\n                            <a ph-tevent="job_category_previous_slider_click" ref="linkEle" role="button" aria-label="View Previous Slide" href="javascript:void(0)" class="slide-left" role="button" data-slide="prev" click.delegate="goToPrevSlide()" if.bind="currSlide>0 && modeOptions.prev" tabindex="0" title="View Previous Slide">\n                                <i aria-hidden="true" class="icon icon-left-arrow"></i> Previous\n                            </a> \n                        </ppc-content>\n                        <ppc-content type="link">\n                            <a ph-tevent="job_category_next_slider_click" ref="linkEle" role="button" aria-label="View Next Slide" href="javascript:void(0)" class="slide-right" role="button" data-slide="next" click.delegate="goToNextSlide()" if.bind="currSlide< totalSlides-1 && modeOptions.next" title="View Next Slide">\n                                    Next <i aria-hidden="true" class="icon icon-arrow-right"></i>\n                            </a>\n                        </ppc-content>\n                        <div class="slider-indicators">\n                            <a ph-tevent="job_category_dot_slider_click" ref="linkEle" role="button" aria-label="View Slide ${$index+1}" href="javascript:void(0)" data-target="#" class="${$index == currSlide ? \'active\' : \'\'}" repeat.for="eachIndicator of totalSlides" if.bind="totalSlides > 1 && modeOptions.indicators" click.delegate="goToSlide($index)" tabindex="0" title="Slide ${$index+1}">\n                                \n                            </a>\n                        </div>\n                    </div>\n\n\n                    \x3c!--show slider actions when mode is slider and mode option loop is false--\x3e\n                    <div class="slider-actions ${modeOptions.navPosition}" if.bind="mode == \'slider\' && modeOptions.loop">\n\n                        <ppc-content type="link">\n                            <a ph-tevent="job_category_previous_slider_click" ref="linkEle" role="button" aria-label="View Previous Slide" href="javascript:void(0)" class="slide-left" role="button" data-slide="prev" click.delegate="goToPrevSlide()" show.bind="modeOptions.prev" tabindex="0" title="View Previous Slide">\n                                <i aria-hidden="true" class="icon icon-left-arrow"></i> Previous\n                            </a>\n                        </ppc-content>\n                        <ppc-content type="link">\n                            <a ph-tevent="job_category_next_slider_click" ref="linkEle" role="button" aria-label="View Next Slide" href="javascript:void(0)" class="slide-right" role="button" data-slide="next" click.delegate="goToNextSlide()" show.bind="modeOptions.next" title="View Next Slide">\n                                    Next <i aria-hidden="true" class="icon icon-arrow-right"></i>\n                            </a>\n                        </ppc-content>\n                        <div class="slider-indicators">\n                            <a ph-tevent="job_category_dot_slider_click" ref="linkEle" role="button" aria-label="View Slide ${$index+1}" href="javascript:void(0)" data-target="#" class="${$index == currSlide ? \'active\' : \'\'}" repeat.for="eachIndicator of totalSlides" if.bind="totalSlides > 1 && modeOptions.indicators" click.delegate="goToSlide($index)" tabindex="0" title="Slide ${$index+1}">\n                                \n                            </a>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <div class="no-data-view" if.bind="showErrorMsg">\n                <p>\n                    <ppc-content key="literal-150">\n                        No Categories.\n                    </ppc-content>\n                </p>\n            </div>\n        </div>\n    </div>\n</template>'}),define("components",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["v1/ph-refer-friend","v3/ph-global-search","v3/ph-social-share","v2/ph-cookie-popup","v3/ph-job-cart-count","v1/ph-facets","v2/ph-search-results","v1/ph-email-job","v1/ph-range-slider","v1/ph-page-state-data","v1/ph-skills","v2/ph-language-selector","v3/ph-category-overview"]}),define("main",["require","exports","./environment","./components"],function(e,t,o,i){"use strict";function a(e){e.use.standardConfiguration().plugin("ph-common").globalResources(i.default),o.default.debug&&e.use.developmentLogging(),window&&(window.localAurelia=e),window.pht=window.pht||{};for(var t=document.querySelectorAll("div.ph-widget-target[data-widget]"),a=0;a<t.length;a++){var r=t[a];if(r){var n=r.getAttribute("type");if(!n||"static"!=n){var s=r.innerHTML,l=r.getAttribute("as-element"),c=r.getAttribute("view")||"default";s&&s.trim().length&&(pht[l+"-"+c]=s.trim()),r.innerHTML=""}}}e.start().then(function(){return e.enhance({},document.body)})}P.config({longStackTraces:!1,warnings:{wForgottenReturn:!1}}),t.configure=a}),document&&document.body&&document.body.setAttribute("aurelia-app","main");